{"version":3,"file":"js/app.fdb71895.js","mappings":"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","sources":["webpack://allsing/./src/common/js/touchEmulate.js","webpack://allsing/./src/App.vue","webpack://allsing/./src/store/index.js","webpack://allsing/./src/App.vue?7ccd","webpack://allsing/./src/common/js/util.js","webpack://allsing/./src/common/js/flexible.js","webpack://allsing/./src/views/HomeView.vue","webpack://allsing/./src/views/HomeView.vue?1da1","webpack://allsing/./src/views/EditView.vue","webpack://allsing/./src/common/js/progress.js","webpack://allsing/./src/common/js/downloadAudio.js","webpack://allsing/./src/components/ReverbDialog.vue","webpack://allsing/./src/components/ReverbDialog.vue?ed25","webpack://allsing/./src/common/js/Pizzicato.js","webpack://allsing/./src/views/EditView.vue?eb6a","webpack://allsing/./src/views/RecordView.vue","webpack://allsing/./src/components/SettingDialog.vue","webpack://allsing/./src/components/SettingDialog.vue?de02","webpack://allsing/./src/views/RecordView.vue?5489","webpack://allsing/./src/views/ComposeView.vue","webpack://allsing/./src/views/ComposeView.vue?b024","webpack://allsing/./src/router/index.js","webpack://allsing/./src/main.js","webpack://allsing/webpack/bootstrap","webpack://allsing/webpack/runtime/chunk loaded","webpack://allsing/webpack/runtime/compat get default export","webpack://allsing/webpack/runtime/define property getters","webpack://allsing/webpack/runtime/global","webpack://allsing/webpack/runtime/hasOwnProperty shorthand","webpack://allsing/webpack/runtime/publicPath","webpack://allsing/webpack/runtime/jsonp chunk loading","webpack://allsing/webpack/startup"],"sourcesContent":["(function (window, document, exportName, undefined) {\r\n  \"use strict\";\r\n\r\n  var isMultiTouch = false;\r\n  var multiTouchStartPos;\r\n  var eventTarget;\r\n  var touchElements = {};\r\n\r\n  // polyfills\r\n  if (!document.createTouch) {\r\n    document.createTouch = function (\r\n      view,\r\n      target,\r\n      identifier,\r\n      pageX,\r\n      pageY,\r\n      screenX,\r\n      screenY,\r\n      clientX,\r\n      clientY\r\n    ) {\r\n      // auto set\r\n      if (clientX == undefined || clientY == undefined) {\r\n        clientX = pageX - window.pageXOffset;\r\n        clientY = pageY - window.pageYOffset;\r\n      }\r\n\r\n      return new Touch(target, identifier, {\r\n        pageX: pageX,\r\n        pageY: pageY,\r\n        screenX: screenX,\r\n        screenY: screenY,\r\n        clientX: clientX,\r\n        clientY: clientY,\r\n      });\r\n    };\r\n  }\r\n\r\n  if (!document.createTouchList) {\r\n    document.createTouchList = function () {\r\n      var touchList = new TouchList();\r\n      for (var i = 0; i < arguments.length; i++) {\r\n        touchList[i] = arguments[i];\r\n      }\r\n      touchList.length = arguments.length;\r\n      return touchList;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * create an touch point\r\n   * @constructor\r\n   * @param target\r\n   * @param identifier\r\n   * @param pos\r\n   * @param deltaX\r\n   * @param deltaY\r\n   * @returns {Object} touchPoint\r\n   */\r\n  function Touch(target, identifier, pos, deltaX, deltaY) {\r\n    deltaX = deltaX || 0;\r\n    deltaY = deltaY || 0;\r\n\r\n    this.identifier = identifier;\r\n    this.target = target;\r\n    this.clientX = pos.clientX + deltaX;\r\n    this.clientY = pos.clientY + deltaY;\r\n    this.screenX = pos.screenX + deltaX;\r\n    this.screenY = pos.screenY + deltaY;\r\n    this.pageX = pos.pageX + deltaX;\r\n    this.pageY = pos.pageY + deltaY;\r\n  }\r\n\r\n  /**\r\n   * create empty touchlist with the methods\r\n   * @constructor\r\n   * @returns touchList\r\n   */\r\n  function TouchList() {\r\n    var touchList = [];\r\n\r\n    touchList.item = function (index) {\r\n      return this[index] || null;\r\n    };\r\n\r\n    // specified by Mozilla\r\n    touchList.identifiedTouch = function (id) {\r\n      return this[id + 1] || null;\r\n    };\r\n\r\n    return touchList;\r\n  }\r\n\r\n  /**\r\n   * Simple trick to fake touch event support\r\n   * this is enough for most libraries like Modernizr and Hammer\r\n   */\r\n  function fakeTouchSupport() {\r\n    var objs = [window, document.documentElement];\r\n    var props = [\"ontouchstart\", \"ontouchmove\", \"ontouchcancel\", \"ontouchend\"];\r\n\r\n    for (var o = 0; o < objs.length; o++) {\r\n      for (var p = 0; p < props.length; p++) {\r\n        if (objs[o] && objs[o][props[p]] == undefined) {\r\n          objs[o][props[p]] = null;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * we don't have to emulate on a touch device\r\n   * @returns {boolean}\r\n   */\r\n  function hasTouchSupport() {\r\n    return (\r\n      \"ontouchstart\" in window || // touch events\r\n      (window.Modernizr && window.Modernizr.touch) || // modernizr\r\n      (navigator.msMaxTouchPoints || navigator.maxTouchPoints) > 2\r\n    ); // pointer events\r\n  }\r\n\r\n  /**\r\n   * disable mouseevents on the page\r\n   * @param ev\r\n   */\r\n  function preventMouseEvents(ev) {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * only trigger touches when the left mousebutton has been pressed\r\n   * @param touchType\r\n   * @returns {Function}\r\n   */\r\n  function onMouse(touchType) {\r\n    return function (ev) {\r\n      if (TouchEmulator.ignoreTags.indexOf(ev.target.tagName) < 0) {\r\n        // prevent mouse events\r\n        preventMouseEvents(ev);\r\n      }\r\n\r\n      if (ev.which !== 1) {\r\n        return;\r\n      }\r\n\r\n      // The EventTarget on which the touch point started when it was first placed on the surface,\r\n      // even if the touch point has since moved outside the interactive area of that element.\r\n      // also, when the target doesnt exist anymore, we update it\r\n      if (\r\n        ev.type == \"mousedown\" ||\r\n        !eventTarget ||\r\n        (eventTarget && !eventTarget.dispatchEvent)\r\n      ) {\r\n        if (ev.composedPath() && ev.composedPath().length > 0) {\r\n          eventTarget = ev.composedPath()[0];\r\n        } else {\r\n          eventTarget = ev.target;\r\n        }\r\n      }\r\n\r\n      // shiftKey has been lost, so trigger a touchend\r\n      if (isMultiTouch && !ev.shiftKey) {\r\n        triggerTouch(\"touchend\", ev);\r\n        isMultiTouch = false;\r\n      }\r\n\r\n      triggerTouch(touchType, ev);\r\n\r\n      // we're entering the multi-touch mode!\r\n      if (!isMultiTouch && ev.shiftKey) {\r\n        isMultiTouch = true;\r\n        multiTouchStartPos = {\r\n          pageX: ev.pageX,\r\n          pageY: ev.pageY,\r\n          clientX: ev.clientX,\r\n          clientY: ev.clientY,\r\n          screenX: ev.screenX,\r\n          screenY: ev.screenY,\r\n        };\r\n        triggerTouch(\"touchstart\", ev);\r\n      }\r\n\r\n      // reset\r\n      if (ev.type == \"mouseup\") {\r\n        multiTouchStartPos = null;\r\n        isMultiTouch = false;\r\n        eventTarget = null;\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * trigger a touch event\r\n   * @param eventName\r\n   * @param mouseEv\r\n   */\r\n  function triggerTouch(eventName, mouseEv) {\r\n    var touchEvent = document.createEvent(\"Event\");\r\n    touchEvent.initEvent(eventName, true, true);\r\n\r\n    touchEvent.altKey = mouseEv.altKey;\r\n    touchEvent.ctrlKey = mouseEv.ctrlKey;\r\n    touchEvent.metaKey = mouseEv.metaKey;\r\n    touchEvent.shiftKey = mouseEv.shiftKey;\r\n\r\n    touchEvent.touches = getActiveTouches(mouseEv, eventName);\r\n    touchEvent.targetTouches = getActiveTouches(mouseEv, eventName);\r\n    touchEvent.changedTouches = getChangedTouches(mouseEv, eventName);\r\n\r\n    eventTarget.dispatchEvent(touchEvent);\r\n  }\r\n\r\n  /**\r\n   * create a touchList based on the mouse event\r\n   * @param mouseEv\r\n   * @returns {TouchList}\r\n   */\r\n  function createTouchList(mouseEv) {\r\n    var touchList = new TouchList();\r\n\r\n    if (isMultiTouch) {\r\n      var f = TouchEmulator.multiTouchOffset;\r\n      var deltaX = multiTouchStartPos.pageX - mouseEv.pageX;\r\n      var deltaY = multiTouchStartPos.pageY - mouseEv.pageY;\r\n\r\n      touchList.push(\r\n        new Touch(\r\n          eventTarget,\r\n          1,\r\n          multiTouchStartPos,\r\n          deltaX * -1 - f,\r\n          deltaY * -1 + f\r\n        )\r\n      );\r\n      touchList.push(\r\n        new Touch(eventTarget, 2, multiTouchStartPos, deltaX + f, deltaY - f)\r\n      );\r\n    } else {\r\n      touchList.push(new Touch(eventTarget, 1, mouseEv, 0, 0));\r\n    }\r\n\r\n    return touchList;\r\n  }\r\n\r\n  /**\r\n   * receive all active touches\r\n   * @param mouseEv\r\n   * @returns {TouchList}\r\n   */\r\n  function getActiveTouches(mouseEv, eventName) {\r\n    // empty list\r\n    if (mouseEv.type == \"mouseup\") {\r\n      return new TouchList();\r\n    }\r\n\r\n    var touchList = createTouchList(mouseEv);\r\n    if (isMultiTouch && mouseEv.type != \"mouseup\" && eventName == \"touchend\") {\r\n      touchList.splice(1, 1);\r\n    }\r\n    return touchList;\r\n  }\r\n\r\n  /**\r\n   * receive a filtered set of touches with only the changed pointers\r\n   * @param mouseEv\r\n   * @param eventName\r\n   * @returns {TouchList}\r\n   */\r\n  function getChangedTouches(mouseEv, eventName) {\r\n    var touchList = createTouchList(mouseEv);\r\n\r\n    // we only want to return the added/removed item on multitouch\r\n    // which is the second pointer, so remove the first pointer from the touchList\r\n    //\r\n    // but when the mouseEv.type is mouseup, we want to send all touches because then\r\n    // no new input will be possible\r\n    if (\r\n      isMultiTouch &&\r\n      mouseEv.type != \"mouseup\" &&\r\n      (eventName == \"touchstart\" || eventName == \"touchend\")\r\n    ) {\r\n      touchList.splice(0, 1);\r\n    }\r\n\r\n    return touchList;\r\n  }\r\n\r\n  /**\r\n   * show the touchpoints on the screen\r\n   */\r\n  function showTouches(ev) {\r\n    var touch, i, el, styles;\r\n\r\n    // first all visible touches\r\n    for (i = 0; i < ev.touches.length; i++) {\r\n      touch = ev.touches[i];\r\n      el = touchElements[touch.identifier];\r\n      if (!el) {\r\n        el = touchElements[touch.identifier] = document.createElement(\"div\");\r\n        document.body.appendChild(el);\r\n      }\r\n\r\n      styles = TouchEmulator.template(touch);\r\n      for (var prop in styles) {\r\n        el.style[prop] = styles[prop];\r\n      }\r\n    }\r\n\r\n    // remove all ended touches\r\n    if (ev.type == \"touchend\" || ev.type == \"touchcancel\") {\r\n      for (i = 0; i < ev.changedTouches.length; i++) {\r\n        touch = ev.changedTouches[i];\r\n        el = touchElements[touch.identifier];\r\n        if (el) {\r\n          el.parentNode.removeChild(el);\r\n          delete touchElements[touch.identifier];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * TouchEmulator initializer\r\n   */\r\n  function TouchEmulator() {\r\n    if (hasTouchSupport()) {\r\n      return;\r\n    }\r\n\r\n    fakeTouchSupport();\r\n\r\n    window.addEventListener(\"mousedown\", onMouse(\"touchstart\"), true);\r\n    window.addEventListener(\"mousemove\", onMouse(\"touchmove\"), true);\r\n    window.addEventListener(\"mouseup\", onMouse(\"touchend\"), true);\r\n\r\n    window.addEventListener(\"mouseenter\", preventMouseEvents, true);\r\n    window.addEventListener(\"mouseleave\", preventMouseEvents, true);\r\n    window.addEventListener(\"mouseout\", preventMouseEvents, true);\r\n    window.addEventListener(\"mouseover\", preventMouseEvents, true);\r\n\r\n    // it uses itself!\r\n    window.addEventListener(\"touchstart\", showTouches, true);\r\n    window.addEventListener(\"touchmove\", showTouches, true);\r\n    window.addEventListener(\"touchend\", showTouches, true);\r\n    window.addEventListener(\"touchcancel\", showTouches, true);\r\n  }\r\n\r\n  // start distance when entering the multitouch mode\r\n  TouchEmulator.multiTouchOffset = 75;\r\n\r\n  // tags that shouldn't swallow mouse events\r\n  TouchEmulator.ignoreTags = [\"TEXTAREA\", \"INPUT\", \"SELECT\"];\r\n\r\n  /**\r\n   * css template for the touch rendering\r\n   * @param touch\r\n   * @returns object\r\n   */\r\n  TouchEmulator.template = function (touch) {\r\n    var size = 30;\r\n    var transform =\r\n      \"translate(\" +\r\n      (touch.clientX - size / 2) +\r\n      \"px, \" +\r\n      (touch.clientY - size / 2) +\r\n      \"px)\";\r\n    return {\r\n      position: \"fixed\",\r\n      left: 0,\r\n      top: 0,\r\n      background: \"#fff\",\r\n      border: \"solid 1px #999\",\r\n      opacity: 0.6,\r\n      borderRadius: \"100%\",\r\n      height: size + \"px\",\r\n      width: size + \"px\",\r\n      padding: 0,\r\n      margin: 0,\r\n      display: \"block\",\r\n      overflow: \"hidden\",\r\n      pointerEvents: \"none\",\r\n      webkitUserSelect: \"none\",\r\n      mozUserSelect: \"none\",\r\n      userSelect: \"none\",\r\n      webkitTransform: transform,\r\n      mozTransform: transform,\r\n      transform: transform,\r\n      zIndex: 100,\r\n    };\r\n  };\r\n\r\n  // export\r\n  if (typeof window.define == \"function\" && window.define.define.amd) {\r\n    window.define(function () {\r\n      return TouchEmulator;\r\n    });\r\n  } else if (typeof module != \"undefined\" && module.exports) {\r\n    module.exports = TouchEmulator;\r\n  } else {\r\n    window[exportName] = TouchEmulator;\r\n  }\r\n\r\n  var supportTouch = \"ontouchstart\" in window;\r\n  if (!supportTouch) {\r\n    new TouchEmulator();\r\n  }\r\n})(window, document, \"TouchEmulator\");\r\n","<template>\n  <router-view />\n  <!-- loading -->\n  <van-overlay :show=\"store.loading\">\n    <div class=\"wrapper\" @click.stop>\n      <van-loading type=\"spinner\" />\n    </div>\n  </van-overlay>\n  <!-- 转换中的遮罩层 -->\n  <van-overlay :show=\"store.rendering\">\n    <div class=\"wrapper\" @click.stop>\n      <div class=\"c-pg-barbox\">\n        <van-progress pivot-text=\"working...\" color=\"#ee0a24\" :percentage=\"store.renderingProgess\" />\n      </div>\n    </div>\n  </van-overlay>  \n</template>\n<script>\nimport useStore from \"./store\";\nimport { Overlay, Loading } from 'vant';\nimport NoSleep from \"nosleep.js/dist/NoSleep.min.js\";\n\nexport default {\n  name: \"AppView\",\n  components: {\n    Loading,\n    Overlay\n  },\n  setup() {\n    // 取store对象\n    const store = useStore();\n    return {store};\n  },\n  mounted() {\n    //this.noSleep();\n  },\n  methods: {\n    //禁止手机睡眠\n    noSleep () {\n      let noSleep = new NoSleep();\n      document.addEventListener('click',\n        function enableNoSleep () {\n          noSleep.enable();\n          document.removeEventListener('click', enableNoSleep, false);\n        },\n        false);\n    },\n  }\n}\n</script>\n<style>\n.wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n.wrapper .van-loading.van-loading--spinner .van-loading__spinner{\n  width: 70px;\n  height: 70px;\n}\nhtml,\nbody {\n  height: 100%;\n}\n#app .van-nav-bar {\n  background-color: rgb(235, 90, 37);\n  color: white;\n}\n#app .van-nav-bar__text,\n#app .van-nav-bar__title {\n  color: white;\n}\n#app .van-nav-bar__title {\n  font-size: 17px;\n}\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  max-width: 750px;\n  height: 100%;\n  margin: 0 auto;\n}\n#app .container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n#app .content {\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n}\n.c-mtop15 {\n  margin-top: 15% !important;\n}\n.c-mtop30 {\n  margin-top: 30% !important;\n}\n.c-text-center {\n  text-align: center !important;\n}\n/* 歌词滚动 */\n.c-lrcbox > div:not(.c-picker-scrolling) .van-picker-column__wrapper {\n  transition: all 0.5s ease-in-out !important;\n}\n.c-lrcbox .c-start-sing .van-picker-column__item--selected {\n  color: #ee1515 !important;\n}\n\n.c-e-name {\n  text-align: center;\n  font-size: 16px;\n  line-height: 20px;\n  height: 20px;\n  margin: 10px 6px;\n}\n\n.c-e-name-crop {\n  max-width: 80vw;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin: 10px auto;\n}\n\n.c-e-ctrlbox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 6px;\n}\n.c-e-sliderbox {\n  flex: 1;\n  margin: 0 10px;\n  display: flex;\n  flex-direction: column;\n}\n.c-e-ctrlitem {\n  width: 40px;\n  height: 40px;\n  font-size: 40px;\n  color: #fb1010;\n  display: flex;\n}\n\n.c-e-sliderbox-time {\n  text-align: right;\n  font-size: 14px;\n  width: 40px;\n  margin: 0 6px 0 4px;\n}\n.van-slider__button {\n  background-color: rgb(35, 126, 217) !important;\n}\n.van-slider {\n  background-color: #cccccc !important;\n}\n.c-e-editbox {\n  text-align: left;\n  margin: 18px 6px 6px;\n}\n.c-e-title {\n  font-size: 14px;\n  margin: 6px 6px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n.c-e-editbox .c-e-voicebox {\n  margin: 20px 12px;\n}\n.c-e-effectbox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0 10px;\n}\n.c-e-effectbox > div.c-e-effectbox-title {\n  flex: 1;\n  font-size: 14px;\n}\n.c-e-btnbox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  margin-top: 20px;\n}\n.c-e-btnbox .c-e-btn {\n  margin: 6px;\n}\n/* 编辑页面和合成页面共用 */\n.c-co-volbox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 14px 0 16px 0;\n}\n.c-co-volname {\n  margin-right: 8px;\n  width: 80px;\n  font-size: 14px;\n}\n.c-co-reverbbox{\n  flex: 1;\n  min-width: 0;\n  overflow-x: auto;\n  margin-top: 6px;\n}\n.c-co-reverbbox .van-radio-group--horizontal {\n  flex-wrap: nowrap !important;\n}\n.c-co-reverbox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-left: 18px;\n}\n.c-co-reverbitem {\n  min-width: 60px;\n}\n.c-co-lrcbox {\n  height: 24px;\n  overflow: hidden;\n  color: #f35c5a;\n  font-weight: bold;\n  font-size: 16px;\n}\n.c-pg-barbox {\n  width: 160px;\n}\n.c-e-cusbtn {\n  margin-right: 10px !important;\n}\n.van-nav-bar__content .van-nav-bar__text {\n  font-size: 16px !important;\n}\n\n.c-lrcbox [class*=van-hairline]:after{\n  border-color: #CCCCCC !important;\n}\n</style>\n","import { defineStore } from \"pinia\";\n\nconst useStore = defineStore(\"userData\", {\n  state: () => {\n    return {\n      // test\n      counter: 0,\n      // 伴奏文件\n      banzou: null,\n      // 歌词编码\n      lrcEncoding: \"GBK\",\n      // 歌词file\n      lrc: null,\n      // lrc文字内容\n      lrcText: \"\",\n      //保存带有时间戳的歌词\n      parsedLyrics: [],\n      // 歌词延迟时间\n      lrcDelayTime: 0,\n      // 伴奏的时长\n      banzouLength: 0,\n      // 录的时长 0就是和伴奏一样长, >0就是自定义时长\n      recordLength: 0,\n      // 伴奏的音量\n      banzouVolume: 0.7,\n      // 人声音量\n      humanVolume: 0.9,\n      // 升降调\n      banzouPitch: 0,\n      // 录音的二进制数据\n      audioChunk: [],\n      // 混响效果\n      reverb: false,\n      // 人声迟延\n      voiceDelay: 0,\n      //输出的时候是否压缩成mp3\n      compress: false,\n      // 加载中\n      loading: false,\n      // 音频生成中\n      rendering: false,\n      // 音频生成进度\n      renderingProgess: 0,\n      //全局alert\n      alertDialog: {\n        show: false,\n        text: \"\",\n      },\n      // 混响效果\n      reverbOption: {\n        time: 1.8,\n        decay: 1.5,\n        mix: 0.4\n      },\n      // 混响默认效果 恢复默认的时候使用 不要修改它!!!\n      reverbOption_default: {\n        time: 1.8,\n        decay: 1.5,\n        mix: 0.4\n      },      \n    };\n  },\n  actions: {\n    parseLRC() {\n      //console.log(\"开始解析歌词 \" + this.lrcText);\n      let lrcContent = this.lrcText;\n      if (!lrcContent) {\n        console.log(\"歌词内容为空\");\n        return;\n      }\n      const lines = lrcContent.split(/[\\r\\n]/);\n      const timeExp = /\\[(\\d{2}):(\\d{2})\\.(\\d{2,3})\\]/; // 匹配时间戳 [mm:ss.xx]\n      const lyricsList = [];\n\n      lines.forEach((line) => {\n        const match = timeExp.exec(line);\n        if (match) {\n          const minutes = parseInt(match[1], 10);\n          const seconds = parseInt(match[2], 10);\n          let milliseconds = parseInt(match[3], 10);\n          milliseconds = match[3].length > 2 ? parseInt(match[3], 10) / 1000 : parseInt(match[3], 10) / 100;\n          const timeInSeconds = minutes * 60 + seconds + milliseconds;\n\n          const lyricText = line.replace(timeExp, \"\").trim();\n\n          // 将歌词转换为Picker需要的格式  这个time和value貌似留一个就行,但是这个是ai写的,去掉也不知道哪会有问题,所以就先这样吧...\n          lyricsList.push({\n            text: lyricText,\n            value: timeInSeconds + this.lrcDelayTime,\n            time: timeInSeconds + this.lrcDelayTime,\n          });\n        }\n      });\n\n      this.parsedLyrics = lyricsList;\n    },\n    // 读取歌词\n    readLrcText() {\n      return this.readText().then((txt) => {\n        //console.log(\"读取歌词成功 \" + txt);\n        this.lrcText = txt;\n        this.parseLRC();\n      });\n    },\n\n    readText() {\n      if (!this.lrc) {\n        console.log(\"没有歌词文件\");\n        return;\n      }\n      return new Promise((rs) => {\n        let fr = new FileReader();\n        fr.onload = (e) => {\n          rs(e.target.result);\n        };\n        fr.readAsText(this.lrc, this.lrcEncoding);\n      });\n    },\n\n    // test\n    increment() {\n      this.counter++;\n    },\n\n    // 显示loading\n    showLoading() {\n      this.loading = true;\n    },\n\n    hideLoading() {\n      this.loading = false;\n    },\n    // 显示render progess\n    showProgess(n) {\n      this.rendering = true;\n      this.renderingProgess = n;\n    },\n\n    hideProgess() {\n      this.rendering = false;\n      setTimeout(() => {\n        this.renderingProgess = 0;\n      }, 1000);\n    },\n    showAlert(txt) {\n      this.alertDialog.show = true;\n      this.alertDialog.text = txt;\n    },\n\n    hideAlert() {\n      this.alertDialog.show = false;\n      this.alertDialog.text = \"\";\n    },\n  },\n  // 持久化\n  persist: {\n    paths: [\"lrcDelayTime\",\"lrcEncoding\",\"compress\", \"reverb\", \"reverbOption\", \"voiceDelay\", \"banzouVolume\", \"humanVolume\"],\n  },\n});\n\nexport default useStore;\n","import { render } from \"./App.vue?vue&type=template&id=8c0934f6\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=8c0934f6&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","let util = {\r\n  //返回指定格式的时间\r\n  getTime: function (date) {\r\n    date = date || new Date();\r\n    function formatNumber(n) {\r\n      n = n.toString();\r\n      return n[1] ? n : \"0\" + n;\r\n    }\r\n    var year = date.getFullYear();\r\n    var month = date.getMonth() + 1;\r\n    var day = date.getDate();\r\n\r\n    var hour = date.getHours();\r\n    var minute = date.getMinutes();\r\n    var second = date.getSeconds();\r\n\r\n    return (\r\n      [formatNumber(year), formatNumber(month), formatNumber(day)].join(\"-\") +\r\n      \" \" +\r\n      [formatNumber(hour), formatNumber(minute), formatNumber(second)].join(\":\")\r\n    );\r\n  },\r\n\r\n  getDate: function (date) {\r\n    return this.getTime(date).split(\" \")[0];\r\n  },\r\n\r\n  addDays: function (date, days) {\r\n    return this.addTimes(date, 60, 60, 24, days);\r\n  },\r\n  addHours: function (date, hours) {\r\n    return this.addTimes(date, 60, 60, hours, 1);\r\n  },\r\n  addMinutes: function (date, minutes) {\r\n    return this.addTimes(date, 60, minutes, 1, 1);\r\n  },\r\n  addSeconds: function (date, secs) {\r\n    return this.addTimes(date, secs, 1, 1, 1);\r\n  },\r\n  addTimes: function (date, s, m, h, days) {\r\n    //new时间对象\r\n    date = date || new Date();\r\n    //转换成毫秒\r\n    var mt = date.getTime();\r\n    //把毫秒时间对象减7天，转换成时间对象\r\n    var premt = mt + 1000 * s * m * h * days;\r\n    var dt = new Date(premt);\r\n    return dt;\r\n  },\r\n\r\n  //格式化时间\r\n  //参数: 时间对象\r\n  //      要转换换的格式 年:yyyy 月:MM 日: dd  时(24):HH 时(12):hh 分:mm 秒:ss\r\n  //返回值: 按传的参数输出字符串\r\n  formatTime: function (obj, arg) {\r\n    function fixNum(num) {\r\n      num = parseInt(num);\r\n      if (num < 10) return \"0\" + num;\r\n      return num;\r\n    }\r\n    function to12Hour(num) {\r\n      num = parseInt(num);\r\n      if (num > 12) {\r\n        return num - 12;\r\n      }\r\n      return num;\r\n    }\r\n    if (!obj) obj = new Date();\r\n    var year = obj.getFullYear();\r\n    var month = fixNum(obj.getMonth() + 1);\r\n    var date = fixNum(obj.getDate());\r\n    var hour24 = fixNum(obj.getHours());\r\n    var hour12 = fixNum(to12Hour(obj.getHours()));\r\n    var minute = fixNum(obj.getMinutes());\r\n    var second = fixNum(obj.getSeconds());\r\n    if (!arg) {\r\n      return \"\" + year + month + date + hour24 + minute + second;\r\n    }\r\n    arg = arg.replace(/yyyy/g, year);\r\n    arg = arg.replace(/MM/g, month);\r\n    arg = arg.replace(/dd/g, date);\r\n    arg = arg.replace(/HH/g, hour24);\r\n    arg = arg.replace(/hh/g, hour12);\r\n    arg = arg.replace(/mm/g, minute);\r\n    arg = arg.replace(/ss/g, second);\r\n    return arg;\r\n  },\r\n  getQueryString: function (queryStringName) {\r\n    var returnValue = \"\";\r\n    var URLString = window.location.href;\r\n    var serachLocation = -1;\r\n    var queryStringLength = queryStringName.length;\r\n    do {\r\n      serachLocation = URLString.indexOf(queryStringName + \"=\");\r\n      if (serachLocation != -1) {\r\n        if (\r\n          URLString.charAt(serachLocation - 1) == \"?\" ||\r\n          URLString.charAt(serachLocation - 1) == \"&\"\r\n        ) {\r\n          URLString = URLString.substr(serachLocation);\r\n          break;\r\n        }\r\n        URLString = URLString.substr(serachLocation + queryStringLength + 1);\r\n      }\r\n    } while (serachLocation != -1);\r\n    if (serachLocation != -1) {\r\n      var seperatorLocation = URLString.indexOf(\"&\");\r\n      if (seperatorLocation == -1) {\r\n        returnValue = URLString.substr(queryStringLength + 1);\r\n      } else {\r\n        returnValue = URLString.substring(\r\n          queryStringLength + 1,\r\n          seperatorLocation\r\n        );\r\n      }\r\n    }\r\n    return returnValue;\r\n  },\r\n  isMobile() {\r\n    let flag = navigator.userAgent.match(\r\n      /(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i\r\n    );\r\n    return !!flag;\r\n  },\r\n  HTMLDecode(text) {\r\n    var temp = document.createElement(\"div\");\r\n    temp.innerHTML = text;\r\n    var output = temp.textContent;\r\n    temp = null;\r\n    return output;\r\n  },\r\n  replaceTag(str) {\r\n    str = str.replace(/^\\<p\\s*\\>/, \"\").replace(/\\<\\/p\\s*\\>$/, \"\");\r\n    return str;\r\n  },\r\n  // 经过测试 pc端输入框比移动端的有时候会小一倍, 所以需要修正一下,\r\n  fixRem(w) {\r\n    if (this.isMobile()) {\r\n      return w;\r\n    }\r\n    if (window.devicePixelRatio == 1) {\r\n      return w * 2;\r\n    }\r\n    return w;\r\n  },\r\n  px2rem(w) {\r\n    return this.fixRem(window.lib.flexible.px2rem(parseFloat(w))) + \"rem\";\r\n  },\r\n  base64decode(str) {\r\n    var base64Chars =\r\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".split(\r\n        \"\"\r\n      );\r\n    var bc = str.replace(/=/g, \"\").split(\"\"),\r\n      y,\r\n      z,\r\n      c,\r\n      b,\r\n      bs = \"\";\r\n    for (y in bc) {\r\n      c = \"\";\r\n      for (z in base64Chars) {\r\n        if (bc[y] == base64Chars[z]) {\r\n          c = z;\r\n          break;\r\n        }\r\n      }\r\n      if (c == \"\") return \"编码有误\";\r\n      b = Number(c).toString(2);\r\n      if (b.length < 6) {\r\n        b = (\"00000\" + b).slice(-6);\r\n      }\r\n      bs += b;\r\n    }\r\n    var j = Math.floor(bs.length / 8),\r\n      i,\r\n      ha = \"\",\r\n      hb;\r\n    for (i = 0; i < j; i++) {\r\n      hb = parseInt(bs.slice(i * 8, i * 8 + 8), 2).toString(16);\r\n      if (hb.length < 2) hb = (\"00\" + hb).slice(-2);\r\n      ha += \"%\" + hb;\r\n    }\r\n    return decodeURIComponent(ha);\r\n  },\r\n\r\n  getListSearchOption: function () {\r\n    // 开始时间\r\n    var sDate = util.formatTime(util.addDays(new Date(), 0), \"yyyy-MM-dd\");\r\n    // var sDateMonth = util.formatTime(util.addDays(new Date(), -30), \"yyyy-MM-dd\");\r\n    // 结束时间\r\n    var eDate = util.formatTime(util.addDays(new Date(), 1), \"yyyy-MM-dd\");\r\n    // 当前月第一天\r\n    // var firstDate = util.formatTime(new Date((new Date()).setDate(1)),  \"yyyy-MM-dd\");\r\n    var count = 10;\r\n    var h = window.screen.height;\r\n    if (h > 900) {\r\n      count = 15;\r\n    }\r\n    return {\r\n      starttime: sDate,\r\n      endtime: eDate,\r\n      pagesize: count,\r\n    };\r\n  },\r\n  downloadFile: function (res) {\r\n    let blob = new Blob([res.data], {\r\n      type: `application/octet-stream;charset=utf-8`,\r\n    });\r\n    // 获取heads中的filename文件名\r\n    let downloadElement = document.createElement(\"a\");\r\n    // 创建下载的链接\r\n    let href = window.URL.createObjectURL(blob);\r\n    downloadElement.href = href;\r\n    // 下载后文件名\r\n    downloadElement.download = res.name;\r\n    document.body.appendChild(downloadElement);\r\n    // 点击下载\r\n    downloadElement.click();\r\n    // 下载完成移除元素\r\n    document.body.removeChild(downloadElement);\r\n    // 释放掉blob对象\r\n    window.URL.revokeObjectURL(href);\r\n  },\r\n  // 把一个对象的属性置位默认 只适用于数字,字符串,简单数组\r\n  resetObject: function(o) {\r\n    Object.keys(o).forEach(function(k){\r\n      if(typeof(o[k]) == \"number\") {\r\n        o[k] = 0;\r\n      }\r\n      else if(typeof(o[k]) == \"string\") {\r\n        o[k] = \"\";\r\n      }\r\n      else if(Object.prototype.toString.call(o[k]) == \"[object Array]\") {\r\n        o[k] = [];\r\n      }\r\n    })\r\n  },\r\n  // 转换单位为秒的时间为几分几秒的时间\r\n  convertTime(time) {\r\n    let minute = Math.floor(time / 60);\r\n    let second = Math.round(time % 60);\r\n    return `${minute}:${second < 10 ? \"0\" + second : second}`;\r\n  },\r\n  // 这个有刺耳的声音 最后放弃了\r\n  async connectReverbNode(node,  reverbSetting, audioContext) {\r\n    if(!reverbSetting) {\r\n      return {\r\n        outputNode: node,\r\n        reverbNodes: null,\r\n        disconnectReverb: () => {}\r\n      }\r\n    }\r\n    const optionsMap = {\r\n      effect1: {\r\n          delayTimes: [0.02, 0.03],// 左右声道的延迟时间 (秒)\r\n          feedbackGains: [0.5, 0.4], // 左右声道的反馈增益\r\n          dryGain: 0.6, // 干声增益\r\n          wetGain: 0.4, // 湿声增益\r\n          highCutFrequency: 5000,  // 高频衰减频率 (Hz)\r\n          preDelayTime: 0.02  // 预延迟时间 (秒)\r\n      },\r\n      // 添加其他效果类型\r\n      effect2: {\r\n          delayTimes: [0.05, 0.07],\r\n          feedbackGains: [0.6, 0.5],\r\n          dryGain: 0.5,\r\n          wetGain: 0.5,\r\n          highCutFrequency: 4000,\r\n          preDelayTime: 0.03\r\n      },\r\n      effect3: {\r\n        delayTimes: [0.02, 0.025], // 左右声道的延迟时间 (秒)，稍微错开以增加立体感\r\n        feedbackGains: [0.6, 0.5], // 降低反馈增益，避免信号放大过多\r\n        dryGain: 0.7, // 干声增益，保持较高的干声比例以保留原始声音的清晰度\r\n        wetGain: 0.3, // 湿声增益，较低的湿声比例可以避免过度混响\r\n        highCutFrequency: 4000, // 增加高频衰减频率，减少高频噪声\r\n        preDelayTime: 0.03  // 预延迟时间 (秒)，稍长的预延迟可以增加声音的清晰\r\n      }\r\n  };\r\n\r\n  // const settings = optionsMap['effect' + effectType];\r\n  const settings = reverbSetting;\r\n\r\n  const dryGainNode = audioContext.createGain();//\r\n  dryGainNode.gain.value = settings.dryGain;\r\n\r\n  const wetGainNode = audioContext.createGain();//\r\n  wetGainNode.gain.value = settings.wetGain;\r\n\r\n  const preDelayNode = audioContext.createDelay();  //\r\n  preDelayNode.delayTime.value = settings.preDelayTime;\r\n\r\n  const highCutFilter = audioContext.createBiquadFilter(); //\r\n  highCutFilter.type = 'lowpass';\r\n  highCutFilter.frequency.value = settings.highCutFrequency;\r\n\r\n  const leftChannelGain = audioContext.createGain();\r\n  const rightChannelGain = audioContext.createGain();\r\n\r\n  const delayNodeLeft = audioContext.createDelay(); //\r\n  delayNodeLeft.delayTime.value = settings.delayTimes[0];\r\n  const feedbackGainLeft = audioContext.createGain();\r\n  feedbackGainLeft.gain.value = settings.feedbackGains[0];//\r\n  delayNodeLeft.connect(feedbackGainLeft);\r\n  feedbackGainLeft.connect(delayNodeLeft);\r\n\r\n\r\n\r\n  const delayNodeRight = audioContext.createDelay();\r\n  delayNodeRight.delayTime.value = settings.delayTimes[1];\r\n  const feedbackGainRight = audioContext.createGain();\r\n  feedbackGainRight.gain.value = settings.feedbackGains[1];\r\n  delayNodeRight.connect(feedbackGainRight);\r\n  feedbackGainRight.connect(delayNodeRight);\r\n\r\n\r\n  const merger = audioContext.createChannelMerger(2);\r\n  delayNodeLeft.connect(merger, 0, 0); // 左声道\r\n  delayNodeRight.connect(merger, 0, 1); // 右声道\r\n\r\n  // 输出节点\r\n  const outputNode = audioContext.createGain();\r\n\r\n  // 连接节点链\r\n  node.connect(dryGainNode);\r\n  node.connect(wetGainNode);\r\n  wetGainNode.connect(preDelayNode);\r\n  preDelayNode.connect(highCutFilter);\r\n  highCutFilter.connect(leftChannelGain);\r\n  highCutFilter.connect(rightChannelGain);\r\n  leftChannelGain.connect(delayNodeLeft);\r\n  rightChannelGain.connect(delayNodeRight);\r\n  dryGainNode.connect(outputNode);\r\n  merger.connect(outputNode);\r\n\r\n  let reverbNodes = {\r\n    dryGainNode,\r\n    wetGainNode,\r\n    preDelayNode,\r\n    highCutFilter,\r\n    delayNodeLeft,\r\n    delayNodeRight,\r\n    feedbackGainLeft,\r\n    feedbackGainRight\r\n  }\r\n\r\n  // 返回输出节点和断开功能\r\n  return {\r\n      outputNode, // 用于连接到其他节点\r\n      reverbNodes,\r\n      disconnectReverb: () => { // 用于清除当前效果\r\n          dryGainNode.disconnect();\r\n          wetGainNode.disconnect();\r\n          preDelayNode.disconnect();\r\n          highCutFilter.disconnect();\r\n          leftChannelGain.disconnect();\r\n          rightChannelGain.disconnect();\r\n          delayNodeLeft.disconnect();\r\n          delayNodeRight.disconnect();\r\n          merger.disconnect();\r\n      }\r\n    }\r\n  }  \r\n};\r\nexport default util;\r\n","import uitl from \"./util.js\";\r\n(function (win, lib) {\r\n  var doc = win.document;\r\n  var docEl = doc.documentElement;\r\n  var metaEl = doc.querySelector('meta[name=\"viewport\"]');\r\n  var flexibleEl = doc.querySelector('meta[name=\"flexible\"]');\r\n  var dpr = 0;\r\n  var scale = 0;\r\n  var tid;\r\n  var flexible = lib.flexible || (lib.flexible = {});\r\n\r\n  if (metaEl) {\r\n    console.warn(\"将根据已有的meta标签来设置缩放比例\");\r\n    var match = metaEl\r\n      .getAttribute(\"content\")\r\n      .match(/initial\\-scale=([\\d\\.]+)/);\r\n    if (match) {\r\n      scale = parseFloat(match[1]);\r\n      dpr = parseInt(1 / scale);\r\n    }\r\n  } else if (flexibleEl) {\r\n    var content = flexibleEl.getAttribute(\"content\");\r\n    if (content) {\r\n      var initialDpr = content.match(/initial\\-dpr=([\\d\\.]+)/);\r\n      var maximumDpr = content.match(/maximum\\-dpr=([\\d\\.]+)/);\r\n      if (initialDpr) {\r\n        dpr = parseFloat(initialDpr[1]);\r\n        scale = parseFloat((1 / dpr).toFixed(2));\r\n      }\r\n      if (maximumDpr) {\r\n        dpr = parseFloat(maximumDpr[1]);\r\n        scale = parseFloat((1 / dpr).toFixed(2));\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!dpr && !scale) {\r\n    var isAndroid = win.navigator.appVersion.match(/android/gi);\r\n    var isIPhone = win.navigator.appVersion.match(/iphone/gi);\r\n    var devicePixelRatio = win.devicePixelRatio;\r\n    if (isIPhone) {\r\n      // iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\r\n      if (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {\r\n        dpr = 3;\r\n      } else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)) {\r\n        dpr = 2;\r\n      } else {\r\n        dpr = 1;\r\n      }\r\n    } else {\r\n      // 其他设备下，仍旧使用1倍的方案\r\n      dpr = 1;\r\n    }\r\n    scale = 1 / dpr;\r\n  }\r\n\r\n  docEl.setAttribute(\"data-dpr\", dpr);\r\n  if (!metaEl) {\r\n    metaEl = doc.createElement(\"meta\");\r\n    metaEl.setAttribute(\"name\", \"viewport\");\r\n    metaEl.setAttribute(\r\n      \"content\",\r\n      \"initial-scale=\" +\r\n        scale +\r\n        \", maximum-scale=\" +\r\n        scale +\r\n        \", minimum-scale=\" +\r\n        scale +\r\n        \", user-scalable=no\"\r\n    );\r\n    if (docEl.firstElementChild) {\r\n      docEl.firstElementChild.appendChild(metaEl);\r\n    } else {\r\n      var wrap = doc.createElement(\"div\");\r\n      wrap.appendChild(metaEl);\r\n      doc.write(wrap.innerHTML);\r\n    }\r\n  }\r\n\r\n  function refreshRem() {\r\n    var width = docEl.getBoundingClientRect().width;\r\n    if (width / dpr > 750) {\r\n      width = 750 * dpr;\r\n    }\r\n    if (!uitl.isMobile()) {\r\n      width = 480 * dpr;\r\n      docEl.classList.add(\"pc\");\r\n    }\r\n    var rem = width / 10;\r\n\r\n    docEl.style.fontSize = rem + \"px\";\r\n    flexible.rem = win.rem = rem;\r\n  }\r\n\r\n  win.addEventListener(\r\n    \"resize\",\r\n    function () {\r\n      clearTimeout(tid);\r\n      tid = setTimeout(refreshRem, 300);\r\n    },\r\n    false\r\n  );\r\n  win.addEventListener(\r\n    \"pageshow\",\r\n    function (e) {\r\n      if (e.persisted) {\r\n        clearTimeout(tid);\r\n        tid = setTimeout(refreshRem, 300);\r\n      }\r\n    },\r\n    false\r\n  );\r\n\r\n  if (doc.readyState === \"complete\") {\r\n    doc.body.style.fontSize = 12 * dpr + \"px\";\r\n  } else {\r\n    doc.addEventListener(\r\n      \"DOMContentLoaded\",\r\n      function (e) {\r\n        doc.body.style.fontSize = 12 * dpr + \"px\";\r\n      },\r\n      false\r\n    );\r\n  }\r\n\r\n  refreshRem();\r\n\r\n  flexible.dpr = win.dpr = dpr;\r\n  flexible.refreshRem = refreshRem;\r\n  flexible.rem2px = function (d) {\r\n    var val = parseFloat(d) * this.rem;\r\n    if (typeof d === \"string\" && d.match(/rem$/)) {\r\n      val += \"px\";\r\n    }\r\n    return val;\r\n  };\r\n  flexible.px2rem = function (d) {\r\n    var val = parseFloat(d) / this.rem;\r\n    if (typeof d === \"string\" && d.match(/px$/)) {\r\n      val += \"rem\";\r\n    }\r\n    return val;\r\n  };\r\n})(window, window[\"lib\"] || (window[\"lib\"] = {}));\r\n","<template>\n  <div class=\"container home\">\n    <van-nav-bar\n      title=\"都来唱歌\"\n      left-text=\"关于\"\n      @click-left=\"showAbout()\"\n    />\n    <div class=\"content c-text-center\">\n      <!-- <van-button type=\"primary\" @click=\"test1()\">test</van-button>\n      <img alt=\"Vue logo\" src=\"../assets/logo.png\" />\n      <div class=\"c-testbox\"></div>\n      <van-picker\n        title=\"标题\"\n        :columns=\"columns\"\n        @confirm=\"onConfirm\"\n        @cancel=\"onCancel\"\n        @change=\"onChange\"\n      /> -->\n      <div class=\"c-select-title c-mtop15\">选择伴奏</div>\n      <div class=\"c-iconadd-box\">\n        <input\n          type=\"file\"\n          ref=\"banzou\"\n          style=\"display: none\"\n          @change=\"onBanzouFileChange\"\n        />\n        <van-icon\n          name=\"plus\"\n          class=\"c-img-add\"\n          v-show=\"store.banzou == null\"\n          @click=\"onAddBanzou()\"\n        />\n        <img\n          :src=\"banzouImg\"\n          class=\"c-icon-selected\"\n          v-show=\"store.banzou != null\"\n        />\n        <van-icon\n          name=\"cross\"\n          class=\"c-icon-rev\"\n          v-show=\"store.banzou != null\"\n          @click=\"onRevBanzou\"\n        />\n        <div class=\"c-text-selected\" v-show=\"store.banzou != null\">\n          {{ store.banzou && store.banzou.name }}\n        </div>\n      </div>\n      <div class=\"c-select-title\">选择歌词(lrc)</div>\n      <div class=\"c-iconadd-box\">\n        <input\n          type=\"file\"\n          ref=\"lrc\"\n          style=\"display: none\"\n          @change=\"onLrcFileChange\"\n        />\n        <van-icon\n          name=\"plus\"\n          class=\"c-img-add\"\n          v-show=\"store.lrc == null\"\n          @click=\"onAddLrc()\"\n        />\n        <img :src=\"lrcImg\" class=\"c-icon-selected\" v-show=\"store.lrc != null\" />\n        <van-icon\n          name=\"cross\"\n          class=\"c-icon-rev\"\n          v-show=\"store.lrc != null\"\n          @click=\"onRevLrc\"\n        />\n        <div class=\"c-text-selected\" v-show=\"store.lrc != null\">\n          {{ store.lrc && store.lrc.name }}\n        </div>\n      </div>\n      <div>\n        <van-button\n          type=\"primary\"\n          size=\"large\"\n          class=\"c-rec-btn\"\n          @click=\"onStartRec()\"\n          >开始</van-button\n        >\n        <van-button plain type=\"danger\" class=\"c-compose-btn\"  @click=\"onstartCompose()\">合成</van-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport useStore from \"../store\";\nimport { showToast, showDialog } from \"vant\";\nexport default {\n  name: \"HomeView\",\n  components: {},\n  setup() {\n    const store = useStore();\n    return {\n      store,\n    };\n  },\n  data() {\n    return {\n      banzouImg: require(\"../assets/banzou.png\"),\n      lrcImg: require(\"../assets/lrc.png\"),\n    };\n  },\n  mounted() {},\n  methods: {\n    test1() {\n      // this.$router.push(\"/about\");\n      //const store = useStore();\n      // console.log(store.counter);\n      // store.counter++;\n      console.log(this.$refs.banzou);\n    },\n    showAbout() {\n      showDialog({\n        title: \"关于\",\n        message: \"Author: MikeChen\",\n        showConfirmButton: true,\n      });\n    },\n    onClickRight() {\n      // this.store.showLoading();\n      this.$router.push(\"/compose\");\n    },\n    isSurpportFile(file) {\n      const regex = /\\.(mp3|wav)$/i; // 匹配以.mp3 .wav结尾的字符串，忽略大小写\n      return regex.test(file.name);\n    },\n    isLrcFile(file) {\n      const regex = /\\.lrc$/i; // 匹配以.lrc结尾的字符串，忽略大小写\n      return regex.test(file.name);\n    },\n    onStartRec() {\n      if (this.store.banzou == null) {\n        showToast(\"请选择一个伴奏文件\");\n        return;\n      }\n      this.$router.push(\"/record\");\n    },\n    onstartCompose() {\n      if (this.store.banzou == null) {\n        showToast(\"请选择一个伴奏文件\");\n        return;\n      }\n      this.$router.push(\"/compose\");\n    },\n    onAddBanzou() {\n      this.$refs.banzou.click();\n    },\n    onBanzouFileChange() {\n      const file = this.$refs.banzou.files[0];\n      // console.log(file);\n      if (!this.isSurpportFile(file)) {\n        showToast(\"目前只支持 wav, mp3 格式\");\n        return;\n      }\n      this.store.banzou = file;\n    },\n    onRevBanzou() {\n      this.store.banzou = null;\n      this.$refs.banzou.value = \"\";\n    },\n    onLrcFileChange() {\n      const file = this.$refs.lrc.files[0];\n      // console.log(file);\n      if (!this.isLrcFile(file)) {\n        showToast(\"目前只支持 lrc 文件\");\n        return;\n      }\n      this.store.lrc = file;\n    },\n    onAddLrc() {\n      this.$refs.lrc.click();\n    },\n    onRevLrc() {\n      this.store.lrc = null;\n      this.$refs.lrc.value = \"\";\n    },\n  },\n};\n</script>\n<style scoped>\n.c-img-add {\n  width: 68px;\n  height: 68px;\n  display: block;\n  font-size: 64px;\n  color: #09f;\n  border: solid 3px #09f;\n  border-radius: 8px;\n}\n.c-iconadd-box {\n  position: relative;\n  display: inline-block;\n  margin: 20px auto 20px;\n}\n.c-testbox {\n  /* prettier-ignore */\n  width: 187PX;\n  height: 200px;\n  background-color: red;\n}\n.c-select-title {\n  font-size: 18px;\n  color: #333;\n  margin: 5px;\n}\n.c-rec-btn {\n  margin: 20px auto 10px;\n  max-width: 260px;\n  font-size: 22px;\n  display: block;\n}\n.c-compose-btn {\n  width: 180px;\n  font-size: 17px;\n}\n.c-icon-selected {\n  width: 48px;\n  height: 48px;\n}\n.c-icon-rev {\n  position: absolute;\n  right: 42px;\n  top: -6px;\n  width: 20px;\n  height: 20px;\n  font-size: 20px;\n  font-weight: bold;\n  border: solid 3px #ff0000;\n  color: #ff0000;\n  border-radius: 50%;\n}\n.c-text-selected {\n  margin-top: 4.5px;\n  font-size: 16px;\n  color: #09f;\n  font-size: 16px;\n  width: 200px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n</style>\n","import { render } from \"./HomeView.vue?vue&type=template&id=876e8884&scoped=true\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js\"\n\nimport \"./HomeView.vue?vue&type=style&index=0&id=876e8884&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-876e8884\"]])\n\nexport default __exports__","<template>\n  <div class=\"container edit\">\n    <van-nav-bar title=\"编辑\" \n       left-text=\"主页\" \n       @click-left=\"onBack()\" \n    />\n    <div class=\"content\">\n      <div class=\"c-e-name c-e-name-crop\">{{ musicName }}</div>\n      <div class=\"c-e-ctrlbox\" >\n        <div class=\"c-e-ctrlitem\" >\n          <van-icon\n            v-show=\"playing\"\n            name=\"pause-circle-o\"\n            class=\"c-e-ctrlicon\"\n            @click=\"onPause\"\n          />\n          <van-icon\n            name=\"play-circle\"\n            class=\"c-e-ctrlicon\"\n            v-show=\"!playing\"\n            @click=\"onPlay\"\n          />\n        </div>\n        <div class=\"c-e-sliderbox-time\">\n          {{ util.convertTime(curTime) }}\n        </div>\n        <div class=\"c-e-sliderbox\">\n          <van-slider v-model=\"curTime\" min=\"0\" :max=\"store.recordLength\" @change=\"onDurationChange\" \n            @drag-start=\"dragging = true\" @drag-end=\"dragging = false\"  />\n        </div>\n        <div class=\"c-e-sliderbox-time\">{{ util.convertTime(store.recordLength) }}</div>\n      </div>\n      <div class=\"c-co-lrcbox\">\n        {{ curLrc }}\n      </div>       \n      <div class=\"c-e-editbox\">\n        <div class=\"c-e-title\">\n          <span>人声音量</span><span>{{ humanVal }}</span>\n        </div>\n        <div class=\"c-e-voicebox\">\n          <van-slider min=\"0\" max=\"100\" v-model=\"humanVal\" @change=\"onHumanVoiceChange\" />\n        </div>\n        <div class=\"c-e-title\">\n          <span>伴奏音量</span><span>{{ accompanyVal }}</span>\n        </div>\n        <div class=\"c-e-voicebox\">\n          <van-slider min=\"0\" max=\"100\" v-model=\"accompanyVal\" @change=\"onAccompanyVoiceChange\" />\n        </div>\n        <div class=\"c-e-title\">\n          <span>人声迟延</span><span>{{ store.voiceDelay }}</span>\n        </div>\n        <div class=\"c-e-voicebox\">\n          <van-slider min=\"-1\" max=\"1\" step=\"0.1\" v-model=\"store.voiceDelay\" @change=\"onDelayChange\" />\n        </div>\n        <!-- <div class=\"c-e-effectbox\" v-show=\"reverb != null\">\n          <div class=\"c-e-effectbox-title\">reverb</div>\n          <van-switch v-model=\"reverOpen\" @change=\"onEffectChange\" />\n        </div> -->\n\n        <!-- 一开始reverb混响是预制了好几个效果,现在改成有一个混响,然后可以调节混响的参数 -->\n        <div class=\"c-e-title\">\n          <span>混响</span>\n          <div class=\"c-reverb-gp\">\n            <!-- 混响自定义按钮 -->\n            <van-button v-show=\"store.reverb\" plain type=\"primary\" size=\"small\" class=\"c-e-cusbtn\" @click=\"onReverbSetting\">设置</van-button>\n            <van-switch  v-model=\"store.reverb\" @change=\"onReverbChange\" />\n          </div>\n        </div>\n        \n        <!-- <div class=\"c-e-voicebox\">\n          <div class=\"c-co-reverbbox\"> \n            <van-radio-group v-model=\"store.reverb\" direction=\"horizontal\" @change=\"onReverbChange\">\n              <van-radio class=\"c-co-reverbitem\" :name=\"0\">none</van-radio>\n              <van-radio class=\"c-co-reverbitem\" :name=\"1\">reverb1</van-radio>\n              <van-radio class=\"c-co-reverbitem\" :name=\"2\">reverb2</van-radio>\n              <van-radio class=\"c-co-reverbitem\" :name=\"3\">reverb3</van-radio>\n            </van-radio-group>\n         </div>\n        </div>   -->\n        <div class=\"c-e-title\">\n          <span>压缩音频</span>\n          <van-switch v-model=\"store.compress\" />\n        </div>      \n      </div>\n      <div class=\"c-e-btnbox\">\n        <van-button plain class=\"c-e-btn\" @click=\"reRecord()\">重录</van-button>\n        <van-button plain class=\"c-e-btn\" type=\"danger\" @click=\"exportHuman\">导出人声</van-button>\n        <van-button class=\"c-e-btn\" type=\"primary\" @click=\"exportSong\">导出歌曲</van-button>\n      </div>\n    </div>\n  </div>\n  <ReverbDialog ref=\"rbDlg\"  @change=\"onReverbDetailChange\"/>\n</template>\n<script>\n// @ is an alias to /src\n// todo audio api 播放声音 获取进度 总时长等 看看用audio api 还是audio标签\nimport { ref } from \"vue\";\nimport useStore from \"../store\";\nimport util from \"../common/js/util.js\";\nimport { renderProgress }from \"../common/js/progress.js\";\nimport downloadAudio from \"../common/js/downloadAudio.js\";\nimport {stopDownload} from \"../common/js/downloadAudio.js\";\nimport { showConfirmDialog } from \"vant\";\nimport { showToast } from \"vant\";\nimport ReverbDialog from \"../components/ReverbDialog\";\nimport createPizzicato from \"../common/js/Pizzicato.js\";\nlet Pizzicato;\nexport default {\n  name: \"EditView\",\n  components: {ReverbDialog},\n  setup() {\n    Pizzicato = createPizzicato(new (window.AudioContext || window.webkitAudioContext)());\n    // 取store对象\n    const store = useStore();\n    const rbDlg = ref(null);\n    // console.log(store.banzou);\n    // console.log(store.audioChunk);\n    return {store, util, rbDlg};\n  },\n  data() {\n    return {\n      musicName: \"\",\n      curLrc: \"\",\n      // 当前播放时间\n      curTime: 0,\n      // audioContext在创建完了就会开始计时所以,第一次播放的时候,要记录一下已经播放了多久了\n      remainTime: 0,\n      playing: false,\n      //人声\n      humanVal: 90,\n      // 伴奏声\n      accompanyVal: 70,\n      //混响\n      //reverb: null,\n      // 混响映射 异步加载\n      reverbMap: {},\n      curReverbConvolver: null,\n      // 开启混响\n      // reverOpen: false,\n      // 延时\n      // delayVal: 0,\n      audioContext: null,\n      offlineAudioCtx: null,\n      // 拖拽歌曲进度条\n      dragging: false,\n      // 音量\n      bgGain: null,\n      voiceGain: null,\n      // 源\n      bgSource: null,\n      voiceSource: null,\n      // requestAnimationFrame的id\n      rTimer: null,\n      // 混响调节窗口\n      // rbSettingShow: false,\n      // 延时播放\n      delayPlayTimer: null,\n      // 伴奏\n      bgSource: null,\n      // 人声\n      voiceSource: null\n    };\n  },\n  mounted() {\n    document.addEventListener('visibilitychange', this.setVisibilyChange); \n    if(!this.store.audioChunk || !this.store.audioChunk.length || !this.store.banzou) {\n      alert(\"没有找到需要编辑的音频\");\n      this.$router.replace(\"/\");\n      return;\n    }\n    this.audioContext = Pizzicato.context; //|| new (window.AudioContext || window.webkitAudioContext)();\n    // console.log(this.audioContext);\n    // const recordedSegments = [\n    //   { start: 10.12, end: 20.01, blob: recordedBlob1 },\n    //   { start: 15.0, end: 25.0, blob: recordedBlob2 }, // 这个片段将覆盖前面重叠部分\n    // ];\n    // const accompanimentBlob = new Blob([\n    //   /* 伴奏数据 */\n    // ]);\n    //const recordDuration = 60; // 设置伴奏时长为 60 秒\n    if(!this.store.recordLength) {\n      this.store.recordLength = this.store.banzouLength;\n    }\n    this.init([...this.store.audioChunk], this.store.banzou, this.store.recordLength);\n\n    this.musicName = this.store.banzou.name.replace(/\\.mp3$/i, \"\");\n    // if (!store.audioChunk.length) {\n    //   alert(\"没有找到录制的音频\");\n    //   this.$router.replace(\"/record\");\n    //   return;\n    // }\n  },\n  unmounted() {\n    document.removeEventListener('visibilitychange', this.setVisibilyChange); \n    if(this.rTimer) {\n      cancelAnimationFrame(this.rTimer);\n    }\n    if(this.delayPlayTimer) {\n      clearTimeout(this.delayPlayTimer);\n    }\n    try {\n      this.bgSource.disconnect();\n      this.bgSource.buffer = null;\n      this.voiceSource.disconnect();\n      this.voiceSource.buffer = null; \n    }catch(e){}\n   \n    try {\n      this.audioContext.close();\n    }catch(e){\n      console.log(e);\n    }\n    try {\n      if(this.offlineAudioCtx) {\n        if(this.offlineAudioCtx.state == \"running\") {\n          this.offlineAudioCtx.suspend(this.offlineAudioCtx.currentTime);\n        }\n        this.offlineAudioCtx = null;\n      }\n    }catch(e){\n      console.log(e);\n    }\n    console.log(\"hide loading\")\n    this.store.hideLoading();\n    this.store.hideProgess();\n    stopDownload();\n    renderProgress.stop();\n    Pizzicato = null;\n  },\n  methods: {\n    setVisibilyChange() {\n      if (document.visibilityState === 'visible') {\n        try {\n          this.audioContext.suspend();\n        }\n        catch(e){}\n      }\n      else if (document.visibilityState === 'hidden') {\n        this.doStop();\n      }\n    },    \n    onBack() {\n      this.$router.replace(\"/\");\n    },\n    reRecord(){\n      showConfirmDialog({\n        title: '提示',\n        message:'是否要重录?',\n      }).then(() => {\n        this.$router.replace(\"/record\");\n      })\n      .catch(() => {\n        // on cancel\n      });      \n    },\n    async getReverb(num) {\n      const audioUrl = 'audio/reverb' + num + '.wav';\n      \n      try {\n        const response = await fetch(audioUrl);\n        if (!response.ok) {\n          throw new Error('Network response was not ok ' + response.statusText);\n        }\n        \n        const arrayBuffer = await response.arrayBuffer();\n        \n        // 解码为 AudioBuffer\n        const audioBuffer = await this.audioContext.decodeAudioData(arrayBuffer);\n        \n        console.log(audioBuffer); // 检查是否成功加载 AudioBuffer\n        return audioBuffer; // 返回解码后的 AudioBuffer\n      } catch (error) {\n        console.error('There has been a problem with your fetch operation:', error);\n        return null;\n      }\n    },\n    async onReverbChange(b){\n      // if(this.curReverbConvolver){\n      //   this.curReverbConvolver.disconnect();\n      //   this.curReverbConvolver = null;\n      // }\n\n      //Pizzicato.context = this.audioContext;\n\n      if(b) {\n        // let reverbOpt = new Pizzicato.Effects.Reverb({\n        //   ...this.store.reverbOption\n        // });\n        // console.log(999, reverb)\n        //this.curReverbNode = reverbOpt;\n        this.voiceGain.disconnect();\n        this.voiceGain.connect(this.curReverbNode);\n        this.curReverbNode.connect(this.audioContext.destination)\n      }\n      else {\n        this.curReverbNode.disconnect();\n        this.voiceGain.disconnect();\n        this.voiceGain.connect(this.audioContext.destination)\n      }\n    },\n\n    onReverbDetailChange(opt){\n      if(!this.curReverbNode) {\n        return;\n      }\n      this.store.reverbOption = {\n        ...opt\n      };\n      this.curReverbNode.time = this.store.reverbOption.time;\n      this.curReverbNode.decay = this.store.reverbOption.decay;\n      this.curReverbNode.mix = this.store.reverbOption.mix;\n    },\n    onPlay() { \n      this.doPlay()\n    },\n    onPause() {\n      this.doStop()\n    },\n    onDurationChange(n) {\n      this.remainTime = this.audioContext.currentTime - n;\n      this.jumpTo(n);\n    },\n    onAccompanyVoiceChange(n) {\n      if (this.bgGain) {\n        this.bgGain.gain.value = n / 100;\n        this.store.banzouVolume = n / 100;\n      }\n    },\n    onHumanVoiceChange(n) {\n      if (this.voiceGain) {\n        this.voiceGain.gain.value = n / 100;\n        this.store.humanVolume = n / 100;\n      }\n    },\n    exportSong() {\n      this.doStop();\n      this.exportAudio(false, this.store.compress);\n    },\n    exportHuman() {\n      this.doStop();\n      this.exportAudio(true, this.store.compress);      \n    },\n    onDelayChange() {\n      console.log(this.store.voiceDelay)\n      this.jumpTo(this.curTime);\n    },\n\n    onReverbSetting(){\n      // this.rbSettingShow = true;\n      this.rbDlg.show({...this.store.reverbOption});\n    },\n\n    async init(recordedSegments, accompanimentBlob, recordDuration) {\n      this.store.showLoading();\n      //this.reverb = await this.getReverb();\n      // 1. 加载伴奏音频\n      const accompanimentBuffer = await this.loadAudioData(this.audioContext,accompanimentBlob);\n\n      // 2. 创建合成音频缓冲区，长度为设定的伴奏总时长\n      const sampleRate = this.audioContext.sampleRate;\n      const totalLength = recordDuration * sampleRate;\n\n      const bgBuffer = this.audioContext.createBuffer(2, totalLength, sampleRate); // 双声道\n\n      // 3. 插入伴奏到合成缓冲区\n      bgBuffer.getChannelData(0).set(accompanimentBuffer.getChannelData(0).subarray(0, totalLength));\n      let n = 0;\n      if(accompanimentBuffer.numberOfChannels > 1){\n        n = 1;\n      }      \n      bgBuffer.getChannelData(1).set(accompanimentBuffer.getChannelData(n).subarray(0, totalLength));\n      \n      const bgSource = this.audioContext.createBufferSource();\n      bgSource.buffer = bgBuffer;\n\n      this.bgGain = this.audioContext.createGain();\n      this.accompanyVal = parseInt(this.store.banzouVolume * 100);\n      this.bgGain.gain.value = this.store.banzouVolume;\n      // this.accompanyVal = Math.round(this.bgGain.gain.value * 100);\n      bgSource.connect(this.bgGain);  \n      Tone.setContext(this.audioContext);\n      var pitchShift = new Tone.PitchShift();\n      pitchShift.pitch = this.store.banzouPitch;  \n      Tone.connect(this.bgGain, pitchShift);    \n      // this.bgGain.connect(this.audioContext.destination);\n      Tone.connect(pitchShift, this.audioContext.destination);\n\n      // 4. 按 start 时间从后往前排序录音片段，确保后面插入的片段可以覆盖前面的\n      // recordedSegments.sort((a, b) => a.start - b.start); // 已经排序了 这个可以注释\n\n      for (let i = recordedSegments.length - 1; i >= 1; --i) {\n        const segment = recordedSegments[i];\n        const preSeg = recordedSegments[i - 1];\n        let r = segment.start - preSeg.end\n        if (r < 0) {\n          preSeg.end = segment.start;\n        }\n        if (r > 0) {\n          let silentBuffer = this.createSilentAudio(this.audioContext, r);\n          recordedSegments.splice(i, 0, {\n            start: preSeg.end,\n            end: segment.start,\n            buffer: silentBuffer\n          })\n        }\n\n      }\n\n      const voiceBuffer = this.audioContext.createBuffer(2, totalLength, sampleRate); // 双声道\n\n      // 5. 依次加载每个录音片段并插入到合成缓冲区\n      for (let i = 0; i < recordedSegments.length; i++) {\n        let segment = recordedSegments[i];\n        let audioBuffer;\n        // 这里区分的是录音,还是跳过的那部分空白录音,空白录音就直接buffer, 录音需要转换一下\n        if(segment.buffer) {\n          audioBuffer = segment.buffer;\n        }\n        else {\n          audioBuffer = await this.loadAudioData(this.audioContext, segment.blob);\n        }\n        const startSample = Math.floor(segment.start * sampleRate);\n\n        // 计算插入范围，确保后面的音频覆盖前面的\n        const endSample = Math.min(startSample + audioBuffer.length, totalLength);\n\n        // 插入到左右声道\n        voiceBuffer.getChannelData(0).set(audioBuffer.getChannelData(0).slice(0, Math.floor(endSample - startSample)), startSample);\n        let n = 0;\n        console.log(\"channel \" + audioBuffer.numberOfChannels)\n        if(audioBuffer.numberOfChannels > 1){\n          n = 1;\n        }\n        voiceBuffer.getChannelData(1).set(audioBuffer.getChannelData(n).slice(0, Math.floor(endSample - startSample)), startSample);\n      }\n\n      // 6. 播放合成的音频\n      const voiceSource = this.audioContext.createBufferSource();\n      voiceSource.buffer = voiceBuffer;\n      this.voiceGain = this.audioContext.createGain();\n      this.humanVal = parseInt(this.store.humanVolume);\n      this.voiceGain.gain.value = this.store.humanVolume;\n\n      //this.humanVal = Math.round(this.voiceGain.gain.value * 100);\n      voiceSource.connect(this.voiceGain); \n      // 连接混响 \n      //let node = await util.connectReverbNode(this.voiceGain, this.store.reverb, this.audioContext);\n      // let nObj = await util.connectReverbNode(this.voiceGain, this.store.reverb, this.audioContext);\n      // let node = nObj.outputNode;\n      // this.disconnectReverb = nObj.disconnectReverb;      \n      // this.reverbNodes = nObj.reverbNodes; \n      this.curReverbNode = new Pizzicato.Effects.Reverb({\n        ...this.store.reverbOption\n      })\n      \n      this.onReverbChange(this.store.reverb);\n      \n      this.audioContext.onstatechange = () => {\n        console.log(\"state-> \", this.audioContext.state);\n      };\n      console.log(\"delay time->\", this.audioContext.currentTime)\n      this.bgSource = bgSource;\n      this.voiceSource = voiceSource;\n      this.playing = true;\n\n      this.remainTime = this.audioContext.currentTime;\n\n      this.setCurTime();\n\n      // 同时播放\n      bgSource.start();\n      // voiceSource.start();\n      this.startVoiceSource(); //人声不是简单的播放 还有迟延设置\n      console.log(\"voiceSource\", voiceSource);\n      this.store.hideLoading();\n      \n      // 7. 合成为 MP3 并下载\n      //this.exportBufferAsMp3(combinedBuffer);\n    },\n//     //连接reverb节点 \n//     async connectReverbNode(node, audioContext = this.audioContext, options) {\n//       return node;\n//       var defaultOptions = {\n//         delayTimes: [0.16, 0.38, 0.41, 0.59],\n//         feedbackGains: [0.7, 0.6, 0.5, 0.4],\n//         dryGain: 0.5,\n//         wetGain: 0.5\n//     };\n    \n//     defaultOptions = {\n//         delayTimes: [0.3, 0.5, 0.7, 0.9],\n//         feedbackGains: [0.8, 0.7, 0.6, 0.5],\n//         dryGain: 0.4,\n//         wetGain: 0.6\n//     };\n\n//     defaultOptions = {\n//     delayTimes: [0.1, 0.2, 0.3, 0.4],\n//     feedbackGains: [0.6, 0.5, 0.4, 0.3],\n//     dryGain: 0.6,\n//     wetGain: 0.4\n// }\n\n// defaultOptions = {\n//     delayTimes: [0.5, 1.0, 1.5, 2.0],\n//     feedbackGains: [0.9, 0.8, 0.7, 0.6],\n//     dryGain: 0.1,\n//     wetGain: 0.9\n// }\n//     const settings = { ...defaultOptions, ...options };\n\n//     // 创建干声增益节点\n//     const dryGainNode = audioContext.createGain();\n//     dryGainNode.gain.value = settings.dryGain;\n\n//     // 创建湿声增益节点\n//     const wetGainNode = audioContext.createGain();\n//     wetGainNode.gain.value = settings.wetGain;\n\n//     // 创建多个延迟节点用于创建多条延迟路径\n//     const delayNodes = [];\n\n//     for (let i = 0; i < 4; i++) {\n//         const delayNode = audioContext.createDelay(1.0); // 最大延迟时间为1秒\n//         const feedbackGain = audioContext.createGain();\n        \n//         delayNode.delayTime.value = settings.delayTimes[i];\n//         feedbackGain.gain.value = settings.feedbackGains[i];\n\n//         delayNode.connect(feedbackGain);\n//         feedbackGain.connect(delayNode);\n\n//         delayNodes.push(delayNode);\n//     }\n\n//     // 创建一个用于混合所有延迟路径的节点\n//     const mixNode = audioContext.createGain();\n\n//     // 连接各个延迟节点到混合节点\n//     delayNodes.forEach(delayNode => {\n//         delayNode.connect(mixNode);\n//     });\n\n//     // 创建一个用于连接所有节点的输出节点\n//     const outputNode = audioContext.createGain();\n\n//     // 连接各个节点\n//     node.connect(dryGainNode);\n//     node.connect(wetGainNode);\n//     wetGainNode.connect(mixNode);\n//     mixNode.connect(outputNode);\n//     dryGainNode.connect(outputNode);\n\n//     return outputNode;    \n\n\n//       if(this.store.reverb == 0){\n//         return node;\n//       }\n//       console.log(\"reverb->\", this.store.reverb)\n//       let r = this.reverbMap[this.store.reverb];\n//       if(!r) {\n//         r = await this.getReverb(this.store.reverb);\n//         if(!r) {\n//           return node;\n//         }\n//         this.reverbMap[this.store.reverb] = r;\n//       }\n\n//       const convolver = audioContext.createConvolver(); \n//       convolver.buffer = r;\n//       // convolver.normalize()\n//       //console.log(\"-------------\", convolver.buffer)\n//       this.curReverbConvolver = convolver;\n//       node.connect(convolver);\n//       //voiceSource.connect(convolver);\n//       return convolver;\n//     },\n    doStop(goStart) {\n      console.log(this.audioContext.state)\n      this.playing = false;\n      if(this.audioContext.state == \"running\") {\n        this.audioContext.suspend();\n        if(goStart) {\n          this.curTime = 0;\n          this.rTimer = null;\n          this.remainTime = this.audioContext.currentTime;\n        }\n        // this.bgSource.stop();\n        // this.voiceSource.stop();\n      }\n    },\n    // 跳到指定时间, 需要重新创建node, start以后没法再跳了\n    jumpTo(n) {\n\n      this.bgSource.stop();\n      const newBgSource = this.audioContext.createBufferSource();\n      newBgSource.buffer = this.bgSource.buffer;  \n      this.bgSource.disconnect();\n      this.bgSource.buffer = null;\n      newBgSource.connect(this.bgGain);  \n      this.bgSource = newBgSource;\n      console.log(\"bg\", 0, n)\n      this.bgSource.start(0, n);\n\n      this.voiceSource.stop();\n      const newVoiceSource = this.audioContext.createBufferSource();\n      newVoiceSource.buffer = this.voiceSource.buffer;  \n      this.voiceSource.disconnect();\n      this.voiceSource.buffer = null;\n      newVoiceSource.connect(this.voiceGain);  \n      this.voiceSource = newVoiceSource;\n      //newVoiceSource.start();\n      this.startVoiceSource(n);\n    },\n\n    startVoiceSource(n = 0, source=this.voiceSource) {\n      if(this.delayPlayTimer){\n        clearTimeout(this.delayPlayTimer);\n        this.delayPlayTimer = null;\n      }\n      //  第一个参数很坑, source.start(迟延几秒播放, 从第几秒开始); 结果第一个参数总不准 所以我就只设置成0 然后用setTimeout来延迟\n      let offsetTime = 0;\n      offsetTime = n + this.store.voiceDelay;\n      if(offsetTime >= 0) {\n        source.start(0, offsetTime);\n      }\n      else {\n        let n = offsetTime * -1000;\n        offsetTime = 0;\n        this.delayPlayTimer = setTimeout(()=>{\n          source.start(0, offsetTime);\n        }, n)        \n      }\n      // let delayTime = 0;\n      // let offsetTime = 0;\n      // /**\n      //  * 这个source.start(0, offsetTime); 第一个参数很坑 时间不准啊....\n      //  */\n      // // 人声调快\n      // if(this.store.voiceDelay >= 0) {\n      //   offsetTime = n + this.store.voiceDelay; // 人声调快\n      //   source.start(0, offsetTime);\n      // }\n      // // 如果开始就有人声 会把调快的0.x秒那部分弄没了 一般不会马上就有人声\n      // else {\n      //   delayTime = this.store.voiceDelay * -1; //人声调慢\n      //   offsetTime = n;// 该跳到哪去就跳到哪去\n      //   this.delayPlayTimer = setTimeout(()=>{\n      //     source.start(0, offsetTime);\n      //   }, delayTime*1000)\n      // }\n      \n    },\n\n    doPlay() {\n      console.log(this.audioContext.state)\n      if(this.audioContext.state != \"running\") {\n        this.playing = true;\n        this.audioContext.resume();\n        if(!this.rTimer) {\n          this.setCurTime();\n          this.jumpTo(0)\n        }\n        // this.bgSource.start(n);\n        // this.voiceSource.start(n);\n      }\n    },\n\n    //设置当前时间 这个就与上一个record界面不同了, record界面可以根据audio标签的update方法来获取,这里没有用audio标签就需要自己定时获取了\n    setCurTime() {\n      let n = this.audioContext.currentTime - this.remainTime;\n      if(n >= this.store.recordLength){\n        this.doStop(true);\n        return;\n      }\n      if(!this.dragging) {\n        this.curTime = n;\n      }\n      this.setCurLrc();\n      //console.log(\"curTime-> \", this.curTime,  this.store.banzouLength);\n      this.rTimer = requestAnimationFrame(this.setCurTime);\n    },\n\n    // 这个和compose页面有一个函数重复了 待改进\n    setCurLrc() {\n      if(!this.store.parsedLyrics || !this.store.parsedLyrics.length) {\n        return;\n      }\n      const currentTime = this.curTime;\n      // 查找当前播放时间对应的歌词行\n      for (let i = 0; i < this.store.parsedLyrics.length; i++) {\n        if (\n          currentTime >= this.store.parsedLyrics[i].time &&\n          (i === this.store.parsedLyrics.length - 1 ||\n            currentTime < this.store.parsedLyrics[i + 1].time)\n        ) {\n          this.curLrc = this.store.parsedLyrics[i].text; // 自动滚动到当前歌词行\n          break;\n        }\n      } \n    },\n\n    // 生成指定时长的空白音频\n    createSilentAudio(audioCtx, duration) {\n      const channels = 2;\n      const frameCount = audioCtx.sampleRate * duration;\n      const silentBuffer = audioCtx.createBuffer(channels, frameCount, audioCtx.sampleRate);\n      return silentBuffer;\n    },\n\n    // 加载音频\n    loadAudioData(audioContext, blob) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          audioContext\n            .decodeAudioData(reader.result)\n            .then((audioBuffer) => resolve(audioBuffer))\n            .catch((err) => reject(err));\n        };\n        reader.onerror = () => reject(reader.error);\n        reader.readAsArrayBuffer(blob);\n      });\n    },\n\n    // exportBufferAsMp3(audioBuffer) {\n    //   console.log(\"exportBufferAsMp3\", audioBuffer);\n    //   // const wav = audioBufferToWav(audioBuffer); // 你需要实现或引入 audioBufferToWav 函数\n    //   // const mp3Blob = wavToMp3(wav); // 你需要实现或引入 wavToMp3 函数\n\n    //   // const url = URL.createObjectURL(mp3Blob);\n    //   // const a = document.createElement(\"a\");\n    //   // document.body.appendChild(a);\n    //   // a.style = \"display: none\";\n    //   // a.href = url;\n    //   // a.download = \"combined_audio.mp3\";\n    //   // a.click();\n    //   // URL.revokeObjectURL(url);\n    // },\n    async exportAudio(onlyVoice, compress){\n        // 创建 OfflineAudioContext\n        let length = this.store.recordLength; // 设置音频长度为10秒\n        let audioCtx = new OfflineAudioContext({\n            numberOfChannels: 2,\n            length: 48000 * length,\n            sampleRate: 48000,\n        });\n        let Pizzicato = createPizzicato(audioCtx);\n        this.offlineAudioCtx = audioCtx;\n        let bufferSource;\n        if(!onlyVoice) {\n          // 将音频数据加载到 bufferSource\n          bufferSource = audioCtx.createBufferSource();\n          bufferSource.buffer = this.bgSource.buffer;\n      \n          // 创建 GainNode\n          let gainNode = audioCtx.createGain();\n          gainNode.gain.value = this.store.banzouVolume;\n\n          // 设置 Tone.js 的上下文为 OfflineAudioContext\n          Tone.setContext(audioCtx);\n      \n          // 创建 Tone.PitchShift 并连接\n          let pitchShift = new Tone.PitchShift();\n          pitchShift.pitch = this.store.banzouPitch;  \n      \n          // 连接音频节点\n          bufferSource.connect(gainNode);\n          Tone.connect(gainNode, pitchShift);\n          Tone.connect(pitchShift, audioCtx.destination);\n        }\n    \n        // 人声 \n        let voiceBufferSource = audioCtx.createBufferSource();\n        voiceBufferSource.buffer = this.voiceSource.buffer;\n        let voiceGain = audioCtx.createGain();\n        voiceGain.gain.value = this.store.humanVolume;\n\n        //this.humanVal = Math.round(this.voiceGain.gain.value * 100);\n        voiceBufferSource.connect(voiceGain);     \n        // 连接混响 \n        //let node = await util.connectReverbNode(voiceGain,this.store.reverb, audioCtx);\n        // let nObj = await util.connectReverbNode(voiceGain, this.store.reverb, audioCtx);\n        // let node = nObj.outputNode;\n        // node.connect(audioCtx.destination);    \n        if(this.store.reverb) {\n            let node = new Pizzicato.Effects.Reverb({\n              time: this.curReverbNode.time,\n              decay: this.curReverbNode.decay,\n              mix: this.curReverbNode.mix\n            })\n            voiceGain.connect(node);\n            node.connect(audioCtx.destination);\n        }\n        else {\n          voiceGain.connect(audioCtx.destination);\n        }\n        if(!onlyVoice) {\n          bufferSource.start();\n        }\n        this.startVoiceSource(0, voiceBufferSource);\n        console.log(\"start generate\")\n        // 开始渲染 OfflineAudioContext\n        audioCtx.startRendering()\n            .then(renderedBuffer => {\n                if(!this.offlineAudioCtx){\n                  return;\n                }\n                console.log('渲染完成', renderedBuffer);\n                if(compress){\n                  showToast(\"正在压缩音频,可能要花费很长时间...\");\n                }\n                downloadAudio(renderedBuffer, audioCtx.length, compress, (progress)=>{\n                  // console.log(\"progress-mp3\", progress);\n                  if(!this.offlineAudioCtx){\n                    return;\n                  }                  \n                  this.store.showProgess(progress);\n                }, ()=>{\n                  this.store.hideProgess();\n                }); // 将渲染后的结果下载\n            })\n            .catch(err => {\n                console.error('渲染错误:', err);\n            });\n        showToast(\"正在生成音频,请稍后...\");\n        renderProgress.start(audioCtx, this.bgSource.buffer.duration, (progess)=>{\n          if(!this.offlineAudioCtx) {\n            return;\n          }\n          console.log(\"progess\", progess);\n          this.store.showProgess(progess);\n        }, ()=>{\n          this.store.hideProgess();\n          if(!onlyVoice) {\n            bufferSource.disconnect();\n            bufferSource.buffer = null;\n          }\n          voiceBufferSource.disconnect();\n          voiceBufferSource.buffer = null;\n        })\n    }    \n  },\n};\n</script>\n<style scoped>\n.c-reverb-gp {\n  display: flex;\n  align-items: center;\n}\n</style>\n","let renderProgress = {\r\n  timer: null,\r\n  start(audioContext, total, onProgess, finish) {\r\n    this.timer = setInterval(() => {\r\n      if (audioContext.currentTime < total) {\r\n        onProgess(Math.floor(audioContext.currentTime/total * 100));\r\n      }\r\n      else {\r\n        onProgess(100);\r\n        this.stop();\r\n        setTimeout(() => {\r\n          finish();\r\n        }, 1000);\r\n      }\r\n    }, 200);\r\n  },\r\n  stop() {\r\n    clearInterval(this.timer);\r\n  }\r\n};\r\n\r\nexport {renderProgress}\r\n","// 创建音频并下载\r\nlet working = false;\r\nasync function downloadAudio(abuffer, len, compress = false, onProgress, onFinish) {\r\n    // // set sample length and rate\r\n    // var duration = abuffer.duration,\r\n    //   rate = abuffer.sampleRate,\r\n    //   offset = 0;\r\n    // Generate audio file and assign URL\r\n    working = true;\r\n    var audio = await bufferToWave(abuffer, len, compress, onProgress, onFinish);\r\n    if(!audio) {\r\n      return;\r\n    }\r\n\r\n    var new_file = URL.createObjectURL(audio);\r\n    var fileName = 'song' + (compress ? '.mp3' : '.wav');\r\n    var link = document.createElement('a');\r\n    link.href = new_file;\r\n    link.download = fileName;\r\n    link.click();\r\n    window.URL.revokeObjectURL(link.href);\r\n    onFinish();\r\n}\r\n\r\nfunction stopDownload(){\r\n  working = false;\r\n}\r\n\r\nasync function bufferToWave(abuffer, len, compress, onProgress) {\r\n  var numOfChan = abuffer.numberOfChannels,\r\n    length = len * numOfChan * 2 + 44,\r\n    buffer = new ArrayBuffer(length),\r\n    view = new DataView(buffer),\r\n    channels = [],\r\n    i,\r\n    sample,\r\n    offset = 0,\r\n    pos = 0;\r\n\r\n  // write WAVE header\r\n  setUint32(0x46464952); // \"RIFF\"\r\n  setUint32(length - 8); // file length - 8\r\n  setUint32(0x45564157); // \"WAVE\"\r\n\r\n  setUint32(0x20746d66); // \"fmt \" chunk\r\n  setUint32(16); // length = 16\r\n  setUint16(1); // PCM (uncompressed)\r\n  setUint16(numOfChan);\r\n  setUint32(abuffer.sampleRate);\r\n  setUint32(abuffer.sampleRate * 2 * numOfChan); // avg. bytes/sec\r\n  setUint16(numOfChan * 2); // block-align\r\n  setUint16(16); // 16-bit (hardcoded in this demo)\r\n\r\n  setUint32(0x61746164); // \"data\" - chunk\r\n  setUint32(length - pos - 4); // chunk length\r\n\r\n  // write interleaved data\r\n  for (i = 0; i < abuffer.numberOfChannels; i++)\r\n    channels.push(abuffer.getChannelData(i));\r\n\r\n  while (pos < length) {\r\n    for (i = 0; i < numOfChan; i++) {\r\n      // interleave channels\r\n      sample = Math.max(-1, Math.min(1, channels[i][offset])); // clamp\r\n      sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0; // scale to 16-bit signed int\r\n      view.setInt16(pos, sample, true); // write 16-bit sample\r\n      pos += 2;\r\n    }\r\n    offset++; // next source sample\r\n  }\r\n\r\n  //转wav 就注释下面三行 放开第四行\r\n  if(compress) {\r\n    let wavHdr = lamejs.WavHeader.readHeader(new DataView(buffer));\r\n    let wavSamples = new Int16Array(\r\n      buffer,\r\n      wavHdr.dataOffset,\r\n      wavHdr.dataLen / 2,\r\n    );\r\n    return await wavToMp3(wavHdr.channels, wavHdr.sampleRate, wavSamples, onProgress);\r\n  }\r\n\r\n  // create Blob\r\n  return new Blob([buffer], { type: 'audio/wav' });\r\n\r\n  function setUint16(data) {\r\n    view.setUint16(pos, data, true);\r\n    pos += 2;\r\n  }\r\n\r\n  function setUint32(data) {\r\n    view.setUint32(pos, data, true);\r\n    pos += 4;\r\n  }\r\n}\r\n\r\nasync function wavToMp3(channels=2, sampleRate=48000, samples, onProgress) {\r\n  var buffer = [];\r\n  /*\r\n    !!!!!注意: 下面这段可以不看了,问题已经解决了,看看下面的那段\r\n    //-这里很诡异 示例中写的是44100 但是转完以后 会慢一半的速度 原因是上门的offlineContext中的声道设置成了2 把上面的offline那个改成1 这里就没事了\r\n    //一开始尝试上面的offline设置成2 然后这里吧44100 乘以2  速度就不慢了 但是发现会有杂音\r\n    //现在这样貌似没啥问题了 少了一个声道 但是听起来好像也还可以...\r\n  */\r\n  var mp3enc = new lamejs.Mp3Encoder(channels, sampleRate, 128);\r\n  var remaining = samples.length;\r\n  var samplesPerFrame = 4608; // 原来是1152 后来改成4608 速度就快了 但是不知道有没有问题\r\n  console.time();\r\n  for (var i = 0; remaining >= samplesPerFrame; i += samplesPerFrame) {\r\n    var mono = samples.subarray(i, i + samplesPerFrame);\r\n    var left = mono.filter(function (element, index, array) {\r\n      return index % 2 === 0;\r\n    });\r\n    var right = mono.filter(function (element, index, array) {\r\n      return index % 2;\r\n    });\r\n    //    之前的注释: 一开始改了源码  后来发现这里传两个参数 第二个参数也是mono也行\r\n    /*\r\n      20211202. 目前通过研究发现, 创建单声道和双声道是不一样的, 单声道的话mp3enc.encodeBuffer后面就一个参数就行,但是双声道就需要两个参数,\r\n                之前之所以报错,就是因为上面写了双声道,结果把下面用的是单声道的代码, 双声道的时候 需要像上面代码那样,\r\n                把这段文件流拆开成两段,分别给左右两个声道. 否则就会出现声音慢一倍的效果\r\n    */\r\n    // var mp3buf = mp3enc.encodeBuffer(left, right);\r\n    if(!working) {\r\n      return null;\r\n    }\r\n    var mp3buf = await encodeMp3(mp3enc,left, right);\r\n    \r\n    if (mp3buf && mp3buf.length > 0) {\r\n      buffer.push(new Int8Array(mp3buf));\r\n    }\r\n    remaining -= samplesPerFrame;\r\n    //console.log(i, remaining, samples.length)\r\n    onProgress(Math.floor(i/samples.length * 100))\r\n  }\r\n  var d = mp3enc.flush();\r\n  if (d.length > 0) {\r\n    buffer.push(new Int8Array(d));\r\n  }\r\n  console.timeEnd();\r\n  var mp3Blob = new Blob(buffer, { type: 'audio/mp3' });\r\n  return mp3Blob;\r\n  //var bUrl = window.URL.createObjectURL(mp3Blob);\r\n\r\n  // send the download link to the console\r\n  //console.log('mp3 download:', bUrl);\r\n}\r\n\r\nasync function encodeMp3(mp3enc, left, right) {\r\n  return new Promise((rs, rj)=>{\r\n    let r = mp3enc.encodeBuffer(left, right);\r\n    setTimeout(()=>{\r\n      rs(r);\r\n    }, 0)\r\n  })\r\n}\r\n\r\nexport default downloadAudio;\r\nexport {stopDownload};\r\n","<template>\n  <van-dialog v-model:show=\"isVisible\" title=\"混响设置\" @close=\"onCloseDialog\">\n    \n    <div class=\"c-setting-box\">\n      <van-cell title=\"混响时间:\" :value=\"option.value.time\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"option.value.time\"\n          @change=\"onTimeChange\"\n          min=\"0\"\n          max=\"5\"\n          step=\"0.1\"\n        />\n      </div>\n      <van-cell title=\"衰减\" :value=\"option.value.decay\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"option.value.decay\"\n          @change=\"onDecayChange\"\n          min=\"0\"\n          max=\"5\"\n          step=\"0.1\"\n        />\n      </div>      \n      <van-cell title=\"混合\" :value=\"option.value.mix\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"option.value.mix\"\n          @change=\"onMixChange\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n        />\n      </div>\n      <div class=\"c-setting-resetbtnbox\">\n        <van-button type=\"warning\" size=\"small\" @click=\"onReset\">重置参数</van-button>\n      </div>      \n    </div>\n  </van-dialog>    \n</template>\n\n<script>\nimport useStore from \"../store\";\nimport { ref } from \"vue\";\nexport default {\n  name: \"setting\",\n  props: {\n    // option: { type: Object, default: () => ({ time: 0, decay: 0, mix: 0 }) }\n  },\n  emits: ['change'],  \n  setup(props, { emit }) {\n   \n    // 如果需要从外部关闭对话框，可以定义一个方法来关闭 \n    // let onCloseDialog = ()=> {  \n    //   console.log('关闭对话框');\n    //   emit('update:visible', false);  \n    // } \n    const store = useStore();\n    let isVisible = ref(false);\n    let option = ref({});\n    return { isVisible, option, store };\n  },\n  methods: {\n    show(opt) {\n      this.isVisible = true;\n      this.option.value = opt;\n    },\n    onCloseDialog() {\n      this.isVisible = false;\n      this.option.value = {};\n      this.$emit('close');\n    },\n    onTimeChange(val) {\n      this.option.value.time = val;\n      this.$emit('change', this.option.value);\n    },\n    onDecayChange(val) {\n      this.option.value.decay = val;\n      this.$emit('change', this.option.value);\n    },\n    onMixChange(val) {\n      this.option.value.mix = val;\n      this.$emit('change', this.option.value);\n    },\n    onReset() {\n      this.option.value.time = this.store.reverbOption_default.time;\n      this.option.value.decay = this.store.reverbOption_default.decay;\n      this.option.value.mix = this.store.reverbOption_default.mix;\n      this.$emit('change', this.option.value);\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n.c-setting-box {\n  text-align: left;\n}\n.c-setting-sliderbox {\n  padding: 16px 20px;\n}\n.c-setting-resetbtnbox {\n  text-align: right;\n  padding: 4px 12px;\n  margin-top: 4px;\n  margin-bottom: 2px;\n}\n</style>\n","import { render } from \"./ReverbDialog.vue?vue&type=template&id=731bbba6&scoped=true\"\nimport script from \"./ReverbDialog.vue?vue&type=script&lang=js\"\nexport * from \"./ReverbDialog.vue?vue&type=script&lang=js\"\n\nimport \"./ReverbDialog.vue?vue&type=style&index=0&id=731bbba6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-731bbba6\"]])\n\nexport default __exports__","export default function createPizzicato(ctx) {\n\t'use strict';\n\n\tvar Pizzicato = {};\n\tvar Pz = Pizzicato;\n\t// var commonJS = typeof module === \"object\" && module.exports;\n\t// var amd = typeof define === \"function\" && define.amd;\n\n\t// if (commonJS)\n\t// \tmodule.exports = Pizzicato;\n\t// else if (amd)\n\t// \tdefine([], Pizzicato);\n\t// else\n\t// \troot.Pizzicato = root.Pz = Pizzicato;\n\n\t// var AudioContext = root.AudioContext || root.webkitAudioContext; \n\n\t// if (!AudioContext) {\n\t// \tconsole.error('No AudioContext found in this environment. Please ensure your window or global object contains a working AudioContext constructor function.');\n\t// \treturn;\n\t// }\n\n\tPizzicato.context = ctx;\n\n\tvar masterGainNode = Pizzicato.context.createGain();\n\tmasterGainNode.connect(Pizzicato.context.destination);\n\n\tPizzicato.Util = {\n\t\n\t\tisString: function(arg) {\n\t\t\treturn toString.call(arg) === '[object String]';\n\t\t},\n\t\n\t\tisObject: function(arg) {\n\t\t\treturn toString.call(arg) === '[object Object]';\n\t\t},\n\t\n\t\tisFunction: function(arg) {\n\t\t\treturn toString.call(arg) === '[object Function]';\n\t\t},\n\t\n\t\tisNumber: function(arg) {\n\t\t\treturn toString.call(arg) === '[object Number]' && arg === +arg;\n\t\t},\n\t\n\t\tisArray: function(arg) {\n\t\t\treturn toString.call(arg) === '[object Array]';\n\t\t},\n\t\n\t\tisInRange: function(arg, min, max) {\n\t\t\tif (!Pz.Util.isNumber(arg) || !Pz.Util.isNumber(min) || !Pz.Util.isNumber(max))\n\t\t\t\treturn false;\n\t\n\t\t\treturn arg >= min && arg <= max;\n\t\t},\n\t\n\t\tisBool: function(arg) {\n\t\t\treturn typeof(arg) === \"boolean\";\n\t\t},\n\t\n\t\tisOscillator: function(audioNode) {\n\t\t\treturn (audioNode && audioNode.toString() === \"[object OscillatorNode]\");\n\t\t},\n\t\n\t\tisAudioBufferSourceNode: function(audioNode) {\n\t\t\treturn (audioNode && audioNode.toString() === \"[object AudioBufferSourceNode]\");\n\t\t},\n\t\n\t\tisSound: function(sound) {\n\t\t\treturn sound instanceof Pz.Sound;\n\t\t},\n\t\n\t\tisEffect: function(effect) {\n\t\t\tfor (var key in Pizzicato.Effects)\n\t\t\t\tif (effect instanceof Pizzicato.Effects[key])\n\t\t\t\t\treturn true;\n\t\n\t\t\treturn false;\n\t\t},\n\t\n\t\t// Takes a number from 0 to 1 and normalizes it to fit within range floor to ceiling\n\t\tnormalize: function(num, floor, ceil) {\n\t\t\tif (!Pz.Util.isNumber(num) || !Pz.Util.isNumber(floor) || !Pz.Util.isNumber(ceil))\n\t\t\t\treturn;\n\t\t\t\n\t\t\treturn ((ceil - floor) * num) / 1 + floor;\n\t\t},\n\t\n\t\tgetDryLevel: function(mix) {\n\t\t\tif (!Pz.Util.isNumber(mix) || mix > 1 || mix < 0)\n\t\t\t\treturn 0;\n\t\n\t\t\tif (mix <= 0.5)\n\t\t\t\treturn 1;\n\t\n\t\t\treturn 1 - ((mix - 0.5) * 2);\n\t\t},\n\t\n\t\tgetWetLevel: function(mix) {\n\t\t\tif (!Pz.Util.isNumber(mix) || mix > 1 || mix < 0)\n\t\t\t\treturn 0;\n\t\n\t\t\tif (mix >= 0.5)\n\t\t\t\treturn 1;\n\t\n\t\t\treturn 1 - ((0.5 - mix) * 2);\n\t\t}\n\t};\n\t/* In order to allow an AudioNode to connect to a Pizzicato \n\tEffect object, we must shim its connect method */\n\tvar gainNode = Pizzicato.context.createGain();\n\tvar audioNode = Object.getPrototypeOf(Object.getPrototypeOf(gainNode));\n\tvar connect = audioNode.connect;\n\t\n\taudioNode.connect = function(node) {\n\t\t// var endpoint = Pz.Util.isEffect(node) ? node.inputNode : node;\n\t\t// connect.call(this, endpoint);\n\t\t// return node;\n\t\tvar b = Pz.Util.isEffect(node);\n\t\tif(b) {\n\t\t\tconnect.call(this, node.inputNode);\n\t\t\treturn node;\n\t\t}\n\t\telse {\n\t\t\treturn connect.apply(this, arguments);\n\t\t}\n\t};\n\n\tObject.defineProperty(Pizzicato, 'volume', {\n\t\tenumerable: true,\n\t\t\t\n\t\tget: function() {\n\t\t\treturn masterGainNode.gain.value;\n\t\t},\n\n\t\tset: function(volume) {\n\t\t\tif (Pz.Util.isInRange(volume, 0, 1) && masterGainNode)\n\t\t\t\tmasterGainNode.gain.value = volume;\n\t\t}\n\t});\n\n\tObject.defineProperty(Pizzicato, 'masterGainNode', {\n\t\tenumerable: false,\n\n\t\tget: function() {\n\t\t\treturn masterGainNode;\n\t\t},\n\n\t\tset: function(volume) {\n\t\t\tconsole.error('Can\\'t set the master gain node');\n\t\t}\n\t});\n\t\tPizzicato.Events = {\n\t\t\n\t\t\t/**\n\t\t\t * Adds an event handler that will be treated upon\n\t\t\t * the triggering of that event.\n\t\t\t */\n\t\t\ton: function(name, callback, context) {\n\t\t\t\tif (!name || !callback)\n\t\t\t\t\treturn;\n\t\t\n\t\t\t\tthis._events = this._events || {};\n\t\t\t\tvar _event = this._events[name] || (this._events[name] = []);\n\t\t\n\t\t\t\t_event.push({\n\t\t\t\t\tcallback: callback,\n\t\t\t\t\tcontext: context || this,\n\t\t\t\t\thandler: this\n\t\t\t\t});\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Triggers a particular event. If a handler\n\t\t\t * is linked to that event, the handler will be\n\t\t\t * executed.\n\t\t\t */\n\t\t\ttrigger: function(name) {\n\t\t\t\tif (!name)\n\t\t\t\t\treturn;\n\t\t\n\t\t\t\tvar _event, length, args, i;\n\t\t\n\t\t\t\tthis._events = this._events || {};\n\t\t\t\t_event = this._events[name] || (this._events[name] = []);\n\t\t\n\t\t\t\tif (!_event)\n\t\t\t\t\treturn;\n\t\t\n\t\t\t\tlength = Math.max(0, arguments.length - 1);\n\t\t\t\targs = [];\n\t\t\n\t\t\t\tfor (i = 0; i < length; i++) \n\t\t\t\t\targs[i] = arguments[i + 1];\n\t\t\n\t\t\t\tfor (i = 0; i < _event.length; i++)\n\t\t\t\t\t_event[i].callback.apply(_event[i].context, args);\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Removes an event handler. If no name is provided,\n\t\t\t * all handlers for this object will be removed.\n\t\t\t */\n\t\t\toff: function(name) {\n\t\t\t\tif (name)\n\t\t\t\t\tthis._events[name] = undefined;\n\t\t\n\t\t\t\telse\n\t\t\t\t\tthis._events = {};\n\t\t\t}\n\t\t\n\t\t};\n\tPizzicato.Sound = function(description, callback) {\n\t\tvar self = this;\n\t\tvar util = Pizzicato.Util;\n\t\tvar descriptionError = getDescriptionError(description);\n\t\tvar hasOptions = util.isObject(description) && util.isObject(description.options);\n\t\tvar defaultAttack = 0.04;\n\t\tvar defaultRelease = 0.04;\n\t\n\t\tif (descriptionError) {\n\t\t\tconsole.error(descriptionError);\n\t\t\tthrow new Error('Error initializing Pizzicato Sound: ' + descriptionError);\n\t\t}\n\t\n\t\tthis.detached = hasOptions && description.options.detached;\n\t\tthis.masterVolume = Pizzicato.context.createGain();\n\t\tthis.fadeNode = Pizzicato.context.createGain();\n\t\tthis.fadeNode.gain.value = 0;\n\t\n\t\tif (!this.detached)\n\t\t\tthis.masterVolume.connect(Pizzicato.masterGainNode);\n\t\n\t\tthis.lastTimePlayed = 0;\n\t\tthis.effects = [];\n\t\tthis.effectConnectors = [];\n\t\tthis.playing = this.paused = false;\n\t\tthis.loop = hasOptions && description.options.loop;\n\t\tthis.attack = hasOptions && util.isNumber(description.options.attack) ? description.options.attack : defaultAttack;\n\t\tthis.volume = hasOptions && util.isNumber(description.options.volume) ? description.options.volume : 1;\n\t\n\t\tif (hasOptions && util.isNumber(description.options.release)) {\n\t\t\tthis.release = description.options.release;\n\t\t} else if (hasOptions && util.isNumber(description.options.sustain)) {\n\t\t\tconsole.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.');\n\t\t\tthis.release = description.options.sustain;\n\t\t} else {\n\t\t\tthis.release = defaultRelease;\n\t\t}\n\t\n\t\tif (!description)\n\t\t\t(initializeWithWave.bind(this))({}, callback);\n\t\n\t\telse if (util.isString(description))\n\t\t\t(initializeWithUrl.bind(this))(description, callback);\n\t\n\t\telse if (util.isFunction(description))\n\t\t\t(initializeWithFunction.bind(this))(description, callback);\n\t\n\t\telse if (description.source === 'file')\n\t\t\t(initializeWithUrl.bind(this))(description.options.path, callback);\n\t\n\t\telse if (description.source === 'wave')\n\t\t\t(initializeWithWave.bind(this))(description.options, callback);\n\t\n\t\telse if (description.source === 'input')\n\t\t\t(initializeWithInput.bind(this))(description, callback);\n\t\n\t\telse if (description.source === 'script')\n\t\t\t(initializeWithFunction.bind(this))(description.options, callback);\n\t\n\t\telse if (description.source === 'sound')\n\t\t\t(initializeWithSoundObject.bind(this))(description.options, callback);\n\t\n\t\n\t\tfunction getDescriptionError(description) {\n\t\t\tvar supportedSources = ['wave', 'file', 'input', 'script', 'sound'];\n\t\n\t\t\tif (description && (!util.isFunction(description) && !util.isString(description) && !util.isObject(description)))\n\t\t\t\treturn 'Description type not supported. Initialize a sound using an object, a function or a string.';\n\t\n\t\t\tif (util.isObject(description)) {\n\t\n\t\t\t\tif (!util.isString(description.source) || supportedSources.indexOf(description.source) === -1)\n\t\t\t\t\treturn 'Specified source not supported. Sources can be wave, file, input or script';\n\t\n\t\t\t\tif (description.source === 'file' && (!description.options || !description.options.path))\n\t\t\t\t\treturn 'A path is needed for sounds with a file source';\n\t\n\t\t\t\tif (description.source === 'script' && (!description.options || !description.options.audioFunction))\n\t\t\t\t\treturn 'An audio function is needed for sounds with a script source';\n\t\t\t}\n\t\t}\n\t\n\t\n\t\tfunction initializeWithWave(waveOptions, callback) {\n\t\t\twaveOptions = waveOptions || {};\n\t\t\tthis.getRawSourceNode = function() {\n\t\t\t\tvar frequency = this.sourceNode ? this.sourceNode.frequency.value : waveOptions.frequency;\n\t\t\t\tvar node = Pizzicato.context.createOscillator();\n\t\t\t\tnode.type = waveOptions.type || 'sine';\n\t\t\t\tnode.frequency.value = (frequency || 440);\n\t\n\t\t\t\treturn node;\n\t\t\t};\n\t\t\tthis.sourceNode = this.getRawSourceNode();\n\t\t\tthis.sourceNode.gainSuccessor = Pz.context.createGain();\n\t\t\tthis.sourceNode.connect(this.sourceNode.gainSuccessor);\n\t\n\t\t\tif (util.isFunction(callback))\n\t\t\t\tcallback();\n\t\t}\n\t\n\t\n\t\tfunction initializeWithUrl(paths, callback) {\n\t\t\tpaths = util.isArray(paths) ? paths : [paths];\n\t\n\t\t\tvar request = new XMLHttpRequest();\n\t\t\trequest.open('GET', paths[0], true);\n\t\t\trequest.responseType = 'arraybuffer';\n\t\n\t\t\trequest.onload = function(progressEvent) {\n\t\n\t\t\t\tPizzicato.context.decodeAudioData(progressEvent.target.response, (function(buffer) {\n\t\n\t\t\t\t\tself.getRawSourceNode = function() {\n\t\t\t\t\t\tvar node = Pizzicato.context.createBufferSource();\n\t\t\t\t\t\tnode.loop = this.loop;\n\t\t\t\t\t\tnode.buffer = buffer;\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t};\n\t\t\t\t\tif (util.isFunction(callback))\n\t\t\t\t\t\tcallback();\n\t\n\t\t\t\t}).bind(self), (function(error) {\n\t\n\t\t\t\t\tconsole.error('Error decoding audio file ' + paths[0]);\n\t\n\t\t\t\t\tif (paths.length > 1) {\n\t\t\t\t\t\tpaths.shift();\n\t\t\t\t\t\tinitializeWithUrl(paths, callback);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\terror = error || new Error('Error decoding audio file ' + paths[0]);\n\t\n\t\t\t\t\tif (util.isFunction(callback))\n\t\t\t\t\t\tcallback(error);\n\t\n\t\t\t\t}).bind(self));\n\t\n\t\t\t};\n\t\t\trequest.onreadystatechange = function(event) {\n\t\n\t\t\t\tif (request.readyState === 4 && request.status !== 200) {\n\t\t\t\t\tconsole.error('Error while fetching ' + paths[0] + '. ' + request.statusText);\n\t\t\t\t}\n\t\t\t};\n\t\t\trequest.send();\n\t\t}\n\t\n\t\n\t\tfunction initializeWithInput(options, callback) {\n\t\t\tnavigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);\n\t\n\t\t\tif (!navigator.getUserMedia && !navigator.mediaDevices.getUserMedia) {\n\t\t\t\tconsole.error('Your browser does not support getUserMedia');\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar handleStream = (function(stream) {\n\t\t\t\tself.getRawSourceNode = function() {\n\t\t\t\t\treturn Pizzicato.context.createMediaStreamSource(stream);\n\t\t\t\t};\n\t\t\t\tif (util.isFunction(callback))\n\t\t\t\t\tcallback();\n\t\t\t}).bind(self);\n\t\n\t\t\tvar handleError = function(error) {\n\t\t\t\tif (util.isFunction(callback))\n\t\t\t\t\tcallback(error);\n\t\t\t};\n\t\n\t\t\tif (!!navigator.mediaDevices.getUserMedia)\n\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true }).then(handleStream).catch(handleError);\n\t\t\telse\n\t\t\t\tnavigator.getUserMedia({ audio: true }, handleStream, handleError);\n\t\t}\n\t\n\t\n\t\tfunction initializeWithFunction(options, callback) {\n\t\t\tvar audioFunction = util.isFunction(options) ? options : options.audioFunction;\n\t\t\tvar bufferSize = util.isObject(options) && options.bufferSize ? options.bufferSize : null;\n\t\n\t\t\tif (!bufferSize) {\n\t\t\t\ttry { // Webkit does not automatically chose the buffer size\n\t\t\t\t\tvar test = Pizzicato.context.createScriptProcessor();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tbufferSize = 2048;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tthis.getRawSourceNode = function() {\n\t\t\t\tvar node = Pizzicato.context.createScriptProcessor(bufferSize, 1, 1);\n\t\t\t\tnode.onaudioprocess = audioFunction;\n\t\t\t\treturn node;\n\t\t\t};\n\t\t}\n\t\n\t\n\t\tfunction initializeWithSoundObject(options, callback) {\n\t\t\tthis.getRawSourceNode = options.sound.getRawSourceNode;\n\t\n\t\t\tif (options.sound.sourceNode && Pz.Util.isOscillator(options.sound.sourceNode)) {\n\t\t\t\tthis.sourceNode = this.getRawSourceNode();\n\t\t\t\tthis.frequency = options.sound.frequency;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t\n\tPizzicato.Sound.prototype = Object.create(Pizzicato.Events, {\n\t\n\t\tplay: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(when, offset) {\n\t\n\t\t\t\tif (this.playing)\n\t\t\t\t\treturn;\n\t\n\t\t\t\tif (!Pz.Util.isNumber(offset))\n\t\t\t\t\toffset = this.offsetTime || 0;\n\t\n\t\t\t\tif (!Pz.Util.isNumber(when))\n\t\t\t\t\twhen = 0;\n\t\n\t\t\t\tthis.playing = true;\n\t\t\t\tthis.paused = false;\n\t\t\t\tthis.sourceNode = this.getSourceNode();\n\t\n\t\t\t\tthis.applyAttack();\n\t\n\t\t\t\tif (Pz.Util.isFunction(this.sourceNode.start)) {\n\t\t\t\t\tthis.lastTimePlayed = Pizzicato.context.currentTime - offset;\n\t\t\t\t\tthis.sourceNode.start(Pz.context.currentTime + when, offset);\n\t\t\t\t}\n\t\n\t\t\t\tthis.trigger('play');\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tstop: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tif (!this.paused && !this.playing)\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.paused = this.playing = false;\n\t\t\t\tthis.stopWithRelease();\n\t\n\t\t\t\tthis.offsetTime = 0;\n\t\t\t\tthis.trigger('stop');\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tpause: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tif (this.paused || !this.playing)\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.paused = true;\n\t\t\t\tthis.playing = false;\n\t\n\t\t\t\tthis.stopWithRelease();\n\t\n\t\t\t\tvar elapsedTime = Pz.context.currentTime - this.lastTimePlayed;\n\t\n\t\t\t\t// If we are using a buffer node - potentially in loop mode - we need to\n\t\t\t\t// know where to re-start the sound independently of the loop it is in.\n\t\t\t\tif (this.sourceNode.buffer)\n\t\t\t\t\tthis.offsetTime = elapsedTime % (this.sourceNode.buffer.length / Pz.context.sampleRate);\n\t\t\t\telse\n\t\t\t\t\tthis.offsetTime = elapsedTime;\n\t\n\t\t\t\tthis.trigger('pause');\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tclone: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tvar clone = new Pizzicato.Sound({\n\t\t\t\t\tsource: 'sound',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tloop: this.loop,\n\t\t\t\t\t\tattack: this.attack,\n\t\t\t\t\t\trelease: this.release,\n\t\t\t\t\t\tvolume: this.volume,\n\t\t\t\t\t\tsound: this\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tfor (var i = 0; i < this.effects.length; i++)\n\t\t\t\t\tclone.addEffect(this.effects[i]);\n\t\n\t\t\t\treturn clone;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tonEnded: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(node) {\n\t\t\t\treturn function() {\n\t\t\t\t\t// This function may've been called from the release\n\t\t\t\t\t// end. If in that time the Sound has been played again,\n\t\t\t\t\t// no action should be taken.\n\t\t\t\t\tif (!!this.sourceNode && this.sourceNode !== node)\n\t\t\t\t\t\treturn;\n\t\n\t\t\t\t\tif (this.playing)\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\tif (!this.paused)\n\t\t\t\t\t\tthis.trigger('end');\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Adding effects will create a graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect added. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t * \n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Sound object using the same effect.\n\t\t */\n\t\taddEffect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(effect) {\n\t\t\t\tif (!Pz.Util.isEffect(effect)) {\n\t\t\t\t\tconsole.error('The object provided is not a Pizzicato effect.');\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\tthis.effects.push(effect);\n\t\n\t\t\t\t// Connects effect in the last position\n\t\t\t\tvar previousNode = this.effectConnectors.length > 0 ? this.effectConnectors[this.effectConnectors.length - 1] : this.fadeNode;\n\t\t\t\tpreviousNode.disconnect();\n\t\t\t\tpreviousNode.connect(effect);\n\t\n\t\t\t\t// Creates connector for the newly added effect\n\t\t\t\tvar gain = Pz.context.createGain();\n\t\t\t\tthis.effectConnectors.push(gain);\n\t\t\t\teffect.connect(gain);\n\t\t\t\tgain.connect(this.masterVolume);\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * When removing effects, the graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect should be \n\t\t * conserved. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t * \n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Sound object using the same effect.\n\t\t */\n\t\tremoveEffect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(effect) {\n\t\n\t\t\t\tvar index = this.effects.indexOf(effect);\n\t\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tconsole.warn('Cannot remove effect that is not applied to this sound.');\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\tvar shouldResumePlaying = this.playing;\n\t\n\t\t\t\tif (shouldResumePlaying)\n\t\t\t\t\tthis.pause();\n\t\n\t\t\t\tvar previousNode = (index === 0) ? this.fadeNode : this.effectConnectors[index - 1];\n\t\t\t\tpreviousNode.disconnect();\n\t\n\t\t\t\t// Disconnect connector and effect\n\t\t\t\tvar effectConnector = this.effectConnectors[index];\n\t\t\t\teffectConnector.disconnect();\n\t\t\t\teffect.disconnect(effectConnector);\n\t\n\t\t\t\t// Remove connector and effect from our arrays\n\t\t\t\tthis.effectConnectors.splice(index, 1);\n\t\t\t\tthis.effects.splice(index, 1);\n\t\n\t\t\t\tvar targetNode; \n\t\t\t\tif (index > this.effects.length - 1 || this.effects.length === 0)\n\t\t\t\t\ttargetNode = this.masterVolume;\n\t\t\t\telse\n\t\t\t\t\ttargetNode = this.effects[index];\n\t\n\t\t\t\tpreviousNode.connect(targetNode);\n\t\n\t\t\t\tif (shouldResumePlaying)\n\t\t\t\t\tthis.play();\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.masterVolume.connect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tdisconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.masterVolume.disconnect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tconnectEffects: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\n\t\t\t\tvar connectors = [];\n\t\n\t\t\t\tfor (var i = 0; i < this.effects.length; i++) {\n\t\n\t\t\t\t\tvar isLastEffect = i === this.effects.length - 1;\n\t\t\t\t\tvar destinationNode = isLastEffect ? this.masterVolume : this.effects[i + 1].inputNode;\n\t\n\t\t\t\t\tconnectors[i] = Pz.context.createGain();\n\t\n\t\t\t\t\tthis.effects[i].outputNode.disconnect(this.effectConnectors[i]);\n\t\n\t\t\t\t\tthis.effects[i].outputNode.connect(destinationNode);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tvolume: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\tif (this.masterVolume)\n\t\t\t\t\treturn this.masterVolume.gain.value;\n\t\t\t},\n\t\n\t\t\tset: function(volume) {\n\t\t\t\tif (Pz.Util.isInRange(volume, 0, 1) && this.masterVolume)\n\t\t\t\t\tthis.masterVolume.gain.value = volume;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tfrequency: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\tif (this.sourceNode && Pz.Util.isOscillator(this.sourceNode)) {\n\t\t\t\t\treturn this.sourceNode.frequency.value;\n\t\t\t\t}\n\t\n\t\t\t\treturn null;\n\t\t\t},\n\t\n\t\t\tset: function(frequency) {\n\t\t\t\tif (this.sourceNode && Pz.Util.isOscillator(this.sourceNode)) {\n\t\t\t\t\tthis.sourceNode.frequency.value = frequency;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t \t * @deprecated - Use \"release\"\n\t\t */\n\t\tsustain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\tconsole.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.');\n\t\t\t\treturn this.release;\n\t\t\t},\n\t\n\t\t\tset: function(sustain){\n\t\t\t\tconsole.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.');\n\t\n\t\t\t\tif (Pz.Util.isInRange(sustain, 0, 10))\n\t\t\t\t\tthis.release = sustain;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\t/**\n\t\t * Returns the node that produces the sound. For example, an oscillator\n\t\t * if the Sound object was initialized with a wave option.\n\t\t */\n\t\tgetSourceNode: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tif (!!this.sourceNode) {\n\t\n\t\t\t\t\t// Directly disconnecting the previous source node causes a \n\t\t\t\t\t// 'click' noise, especially noticeable if the sound is played \n\t\t\t\t\t// while the release is ongoing. To address this, we fadeout the \n\t\t\t\t\t// old source node before disonnecting it.\n\t\n\t\t\t\t\tvar previousSourceNode = this.sourceNode;\n\t\t\t\t\tpreviousSourceNode.gainSuccessor.gain.setValueAtTime(previousSourceNode.gainSuccessor.gain.value, Pz.context.currentTime);\n\t\t\t\t\tpreviousSourceNode.gainSuccessor.gain.linearRampToValueAtTime(0.0001, Pz.context.currentTime + 0.2);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tpreviousSourceNode.disconnect();\n\t\t\t\t\t\tpreviousSourceNode.gainSuccessor.disconnect();\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\t\n\t\t\t\tvar sourceNode = this.getRawSourceNode();\n\t\n\t\t\t\t// A gain node will be placed after the source node to avoid\n\t\t\t\t// clicking noises (by fading out the sound)\n\t\t\t\tsourceNode.gainSuccessor = Pz.context.createGain();\n\t\t\t\tsourceNode.connect(sourceNode.gainSuccessor);\n\t\t\t\tsourceNode.gainSuccessor.connect(this.fadeNode);\n\t\t\t\tthis.fadeNode.connect(this.getInputNode());\n\t\n\t\t\t\tif (Pz.Util.isAudioBufferSourceNode(sourceNode))\n\t\t\t\t\tsourceNode.onended = this.onEnded(sourceNode).bind(this);\n\t\n\t\t\t\treturn sourceNode;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\t/**\n\t\t * Returns the first node in the graph. When there are effects,\n\t\t * the first node is the input node of the first effect.\n\t\t */\n\t\tgetInputNode: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tif (this.effects.length > 0)\n\t\t\t\t\treturn this.effects[0].inputNode;\n\t\n\t\t\t\treturn this.masterVolume;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Will take the current source node and work up the volume\n\t\t * gradually in as much time as specified in the attack property\n\t\t * of the sound.\n\t\t */\n\t\tapplyAttack: {\n\t\t\tenumerable: false,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tvar currentValue = this.fadeNode.gain.value;\n\t\t\t\tthis.fadeNode.gain.cancelScheduledValues(Pz.context.currentTime);\n\t\n\t\t\t\tif (!this.attack) {\n\t\t\t\t\tthis.fadeNode.gain.setTargetAtTime(1.0, Pz.context.currentTime, 0.001);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\t// We can't calculate the remaining attack time \n\t\t\t\t// in Firefox due to https://bugzilla.mozilla.org/show_bug.cgi?id=893020\n\t\t\t\tvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\t\t\t\tvar remainingAttackTime = this.attack;\n\t\n\t\t\t\tif (!isFirefox)\n\t\t\t\t\tremainingAttackTime = (1 - this.fadeNode.gain.value) * this.attack;\n\t\n\t\t\t\tthis.fadeNode.gain.setTargetAtTime(1.0, Pz.context.currentTime, remainingAttackTime * 2);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Will take the current source node and work down the volume\n\t\t * gradually in as much time as specified in the release property\n\t\t * of the sound before stopping the source node.\n\t\t */\n\t\tstopWithRelease: {\n\t\t\tenumerable: false,\n\t\n\t\t\tvalue: function(callback) {\n\t\n\t\t\t\tvar node = this.sourceNode;\n\t\t\t\tvar stopSound = function() {\n\t\t\t\t\treturn Pz.Util.isFunction(node.stop) ? node.stop(0) : node.disconnect();\n\t\t\t\t};\n\t\n\t\t\t\tvar currentValue = this.fadeNode.gain.value;\n\t\t\t\tthis.fadeNode.gain.cancelScheduledValues(Pz.context.currentTime);\n\t\n\t\t\t\tif (!this.release) {\n\t\t\t\t\tthis.fadeNode.gain.setTargetAtTime(0.0, Pz.context.currentTime, 0.001);\n\t\t\t\t\tstopSound();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\t// We can't calculate the remaining attack time \n\t\t\t\t// in Firefox due to https://bugzilla.mozilla.org/show_bug.cgi?id=893020\n\t\t\t\tvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\t\t\t\tvar remainingReleaseTime = this.release;\n\t\n\t\t\t\tif (!isFirefox)\n\t\t\t\t\tremainingReleaseTime = this.fadeNode.gain.value * this.release;\n\t\n\t\t\t\tthis.fadeNode.gain.setTargetAtTime(0.00001, Pz.context.currentTime, remainingReleaseTime / 5);\n\t\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tstopSound();\n\t\t\t\t}, remainingReleaseTime * 1000);\n\t\t\t}\n\t\t}\n\t});\n\t\n\tPizzicato.Group = function(sounds) {\n\t\n\t\tsounds = sounds || [];\n\t\t\n\t\tthis.mergeGainNode = Pz.context.createGain();\n\t\tthis.masterVolume = Pz.context.createGain();\n\t\tthis.sounds = [];\n\t\tthis.effects = [];\n\t\tthis.effectConnectors = [];\n\t\n\t\tthis.mergeGainNode.connect(this.masterVolume);\n\t\tthis.masterVolume.connect(Pz.masterGainNode);\n\t\n\t\tfor (var i = 0; i < sounds.length; i++)\n\t\t\tthis.addSound(sounds[i]);\n\t};\n\t\n\tPizzicato.Group.prototype = Object.create(Pz.Events, {\n\t\n\t\tconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.masterVolume.connect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tdisconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.masterVolume.disconnect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\taddSound: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(sound) {\n\t\t\t\tif (!Pz.Util.isSound(sound)) {\n\t\t\t\t\tconsole.error('You can only add Pizzicato.Sound objects');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this.sounds.indexOf(sound) > -1) {\n\t\t\t\t\tconsole.warn('The Pizzicato.Sound object was already added to this group');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (sound.detached) {\n\t\t\t\t\tconsole.warn('Groups do not support detached sounds. You can manually create an audio graph to group detached sounds together.');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tsound.disconnect(Pz.masterGainNode);\n\t\t\t\tsound.connect(this.mergeGainNode);\n\t\t\t\tthis.sounds.push(sound);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tremoveSound: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(sound) {\n\t\t\t\tvar index = this.sounds.indexOf(sound);\n\t\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tconsole.warn('Cannot remove a sound that is not part of this group.');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tsound.disconnect(this.mergeGainNode);\n\t\t\t\tsound.connect(Pz.masterGainNode);\n\t\t\t\tthis.sounds.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tvolume: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\tif (this.masterVolume)\n\t\t\t\t\treturn this.masterVolume.gain.value;\n\t\t\t},\n\t\n\t\t\tset: function(volume) {\n\t\t\t\tif (Pz.Util.isInRange(volume, 0, 1))\n\t\t\t\t\tthis.masterVolume.gain.value = volume;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tplay: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tfor (var i = 0; i < this.sounds.length; i++)\n\t\t\t\t\tthis.sounds[i].play();\n\t\n\t\t\t\tthis.trigger('play');\n\t\t\t}\n\t\n\t\t},\n\t\n\t\n\t\tstop: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tfor (var i = 0; i < this.sounds.length; i++)\n\t\t\t\t\tthis.sounds[i].stop();\n\t\n\t\t\t\tthis.trigger('stop');\n\t\t\t}\n\t\n\t\t},\n\t\n\t\n\t\tpause: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tfor (var i = 0; i < this.sounds.length; i++)\n\t\t\t\t\tthis.sounds[i].pause();\n\t\n\t\t\t\tthis.trigger('pause');\n\t\t\t}\n\t\n\t\t},\n\t\n\t\t/**\n\t\t * Similarly to Sound objects, adding effects will create a graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect added. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t * \n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Group object using the same effect.\n\t\t */\n\t\taddEffect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(effect) {\n\t\t\t\tif (!Pz.Util.isEffect(effect)) {\n\t\t\t\t\tconsole.error('The object provided is not a Pizzicato effect.');\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\tthis.effects.push(effect);\n\t\n\t\t\t\t// Connects effect in the last position\n\t\t\t\tvar previousNode = this.effectConnectors.length > 0 ? this.effectConnectors[this.effectConnectors.length - 1] : this.mergeGainNode;\n\t\t\t\tpreviousNode.disconnect();\n\t\t\t\tpreviousNode.connect(effect);\n\t\n\t\t\t\t// Creates connector for the newly added effect\n\t\t\t\tvar gain = Pz.context.createGain();\n\t\t\t\tthis.effectConnectors.push(gain);\n\t\t\t\teffect.connect(gain);\n\t\t\t\tgain.connect(this.masterVolume);\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * When removing effects, the graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect should be \n\t\t * conserved. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t * \n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Group object using the same effect.\n\t\t */\n\t\tremoveEffect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(effect) {\n\t\t\t\tvar index = this.effects.indexOf(effect);\n\t\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tconsole.warn('Cannot remove effect that is not applied to this group.');\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\tvar previousNode = (index === 0) ? this.mergeGainNode : this.effectConnectors[index - 1];\n\t\t\t\tpreviousNode.disconnect();\n\t\n\t\t\t\t// Disconnect connector and effect\n\t\t\t\tvar effectConnector = this.effectConnectors[index];\n\t\t\t\teffectConnector.disconnect();\n\t\t\t\teffect.disconnect(effectConnector);\n\t\n\t\t\t\t// Remove connector and effect from our arrays\n\t\t\t\tthis.effectConnectors.splice(index, 1);\n\t\t\t\tthis.effects.splice(index, 1);\n\t\n\t\t\t\tvar targetNode; \n\t\t\t\tif (index > this.effects.length - 1 || this.effects.length === 0)\n\t\t\t\t\ttargetNode = this.masterVolume;\n\t\t\t\telse\n\t\t\t\t\ttargetNode = this.effects[index];\n\t\n\t\t\t\tpreviousNode.connect(targetNode);\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects = {};\n\t\n\tvar baseEffect = Object.create(null, {\n\t\n\t\tconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.outputNode.connect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\tdisconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.outputNode.disconnect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t});\n\tPizzicato.Effects.Delay = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tfeedback: 0.5,\n\t\t\ttime: 0.3,\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.feedbackGainNode = Pizzicato.context.createGain();\n\t\tthis.delayNode = Pizzicato.context.createDelay();\n\t\n\t\t// line in to dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\t// dry line out\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\t// feedback loop\n\t\tthis.delayNode.connect(this.feedbackGainNode);\n\t\tthis.feedbackGainNode.connect(this.delayNode);\n\t\n\t\t// line in to wet mix\n\t\tthis.inputNode.connect(this.delayNode);\n\t\t// wet out\n\t\tthis.delayNode.connect(this.wetGainNode);\n\t\t\n\t\t// wet line out\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Delay.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n\t\ttime: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.time;\t\n\t\t\t},\n\t\n\t\t\tset: function(time) {\n\t\t\t\tif (!Pz.Util.isInRange(time, 0, 180))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\tthis.delayNode.delayTime.value = time;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n\t\tfeedback: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.feedback;\t\n\t\t\t},\n\t\n\t\t\tset: function(feedback) {\n\t\t\t\tif (!Pz.Util.isInRange(feedback, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.feedback = parseFloat(feedback, 10);\n\t\t\t\tthis.feedbackGainNode.gain.value = this.feedback;\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.Compressor = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tthreshold: -24,\n\t\t\tknee: 30,\n\t\t\tattack: 0.003,\n\t\t\trelease: 0.250,\n\t\t\tratio: 12\n\t\t};\n\t\n\t\tthis.inputNode = this.compressorNode = Pizzicato.context.createDynamicsCompressor();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\t\n\t\tthis.compressorNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Compressor.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * The level above which compression is applied to the audio.\n\t\t * MIN: -100\n\t\t * MAX: 0\n\t\t */\n\t\tthreshold: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.threshold.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, -100, 0))\n\t\t\t\t\tthis.compressorNode.threshold.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * A value representing the range above the threshold where \n\t\t * the curve smoothly transitions to the \"ratio\" portion. More info:\n\t\t * http://www.homestudiocorner.com/what-is-knee-on-a-compressor/\n\t\t * MIN 0\n\t\t * MAX 40\n\t\t */\n\t\tknee: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.knee.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 0, 40))\n\t\t\t\t\tthis.compressorNode.knee.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * How soon the compressor starts to compress the dynamics after \n\t\t * the threshold is exceeded. If volume changes are slow, you can \n\t\t * push this to a high value. Short attack times will result in a \n\t\t * fast response to sudden, loud sounds, but will make the changes \n\t\t * in volume much more obvious to listeners.\n\t\t * MIN 0\n\t\t * MAX 1\n\t\t */\n\t\tattack: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.attack.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 0, 1))\n\t\t\t\t\tthis.compressorNode.attack.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * How soon the compressor starts to release the volume level \n\t\t * back to normal after the level drops below the threshold. \n\t\t * A long time value will tend to lose quiet sounds that come \n\t\t * after loud ones, but will avoid the volume being raised too \n\t\t * much during short quiet sections like pauses in speech.\n\t\t * MIN 0\n\t\t * MAX 1\n\t\t */\n\t\trelease: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.release.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 0, 1))\n\t\t\t\t\tthis.compressorNode.release.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * The amount of compression applied to the audio once it \n\t\t * passes the threshold level. The higher the Ratio the more \n\t\t * the loud parts of the audio will be compressed.\n\t\t * MIN 1\n\t\t * MAX 20\n\t\t */\n\t\tratio: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.ratio.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 1, 20))\n\t\t\t\t\tthis.compressorNode.ratio.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\tgetCurrentGainReduction: function() {\n\t\t\treturn this.compressorNode.reduction;\n\t\t}\n\t\n\t});\n\t/**\n\t * Frequencies below the cutoff frequency pass \n\t * through; frequencies above it are attenuated.\n\t */\n\tPizzicato.Effects.LowPassFilter = function(options) {\n\t\tFilter.call(this, options, 'lowpass');\n\t};\n\t\n\t/**\n\t * Frequencies below the cutoff frequency are \n\t * attenuated; frequencies above it pass through.\n\t */\n\tPizzicato.Effects.HighPassFilter = function(options) {\n\t\tFilter.call(this, options, 'highpass');\n\t};\n\t\n\t/**\n\t * Filters used by Pizzicato stem from the biquad filter node. This \n\t * function acts as a common constructor. The only thing that changes \n\t * between filters is the 'type' of the biquad filter node.\n\t */\n\tfunction Filter(options, type) {\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tfrequency: 350,\n\t\t\tpeak: 1\n\t\t};\n\t\n\t\tthis.inputNode = this.filterNode = Pz.context.createBiquadFilter();\n\t\tthis.filterNode.type = type;\n\t\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\n\t\tthis.filterNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t}\n\t\n\tvar filterPrototype = Object.create(baseEffect, {\n\t\t\n\t\t/**\n\t\t * The cutoff frequency of the filter.\n\t\t * MIN: 10\n\t\t * MAX: 22050 (half the sampling rate of the current context)\n\t\t */\n\t\tfrequency: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.filterNode.frequency.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 10, 22050))\n\t\t\t\t\tthis.filterNode.frequency.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Indicates how peaked the frequency is around \n\t\t * the cutoff. The greater the value is, the \n\t\t * greater is the peak.\n\t\t * MIN: 0.0001\n\t\t * MAX: 1000\n\t\t */\n\t\tpeak: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.filterNode.Q.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 0.0001, 1000))\n\t\t\t\t\tthis.filterNode.Q.value = value;\n\t\t\t}\n\t\t}\n\t});\n\t\n\tPizzicato.Effects.LowPassFilter.prototype = filterPrototype;\n\tPizzicato.Effects.HighPassFilter.prototype = filterPrototype;\n\tPizzicato.Effects.Distortion = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tgain: 0.5\n\t\t};\n\t\n\t\tthis.waveShaperNode = Pizzicato.context.createWaveShaper();\n\t\tthis.inputNode = this.outputNode = this.waveShaperNode;\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Distortion.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the gain (amount of distortion).\n\t\t */\n\t\tgain: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.gain;\n\t\t\t},\n\t\n\t\t\tset: function(gain) {\n\t\t\t\tif (!Pz.Util.isInRange(gain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.gain = gain;\n\t\t\t\tthis.adjustGain();\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Sets the wave curve with the correct gain. Taken from\n\t\t * http://stackoverflow.com/questions/22312841/waveshaper-node-in-webaudio-how-to-emulate-distortion\n\t\t */\n\t\tadjustGain: {\n\t\t\twritable: false,\n\t\t\tconfigurable: false,\n\t\t\tenumerable: false,\n\t\t\tvalue: function() {\n\t\t\t\tvar gain = Pz.Util.isNumber(this.options.gain) ? parseInt(this.options.gain * 100, 10) : 50;\n\t\t\t\tvar n_samples = 44100;\n\t\t\t\tvar curve = new Float32Array(n_samples);\n\t\t\t\tvar deg = Math.PI / 180;\n\t\t\t\tvar x;\n\t\n\t\t\t\tfor (var i = 0; i < n_samples; ++i ) {\n\t\t\t\t\tx = i * 2 / n_samples - 1;\n\t\t\t\t\tcurve[i] = (3 + gain) * x * 20 * deg / (Math.PI + gain * Math.abs(x));\n\t\t\t\t}\n\t\n\t\t\t\tthis.waveShaperNode.curve = curve;\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.Flanger = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\ttime: 0.45,\n\t\t\tspeed: 0.2,\n\t\t\tdepth: 0.1,\n\t\t\tfeedback: 0.1,\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.inputFeedbackNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.delayNode = Pizzicato.context.createDelay();\n\t\tthis.oscillatorNode = Pizzicato.context.createOscillator();\n\t\tthis.gainNode = Pizzicato.context.createGain();\n\t\tthis.feedbackNode = Pizzicato.context.createGain();\n\t\tthis.oscillatorNode.type = 'sine';\n\t\n\t\tthis.inputNode.connect(this.inputFeedbackNode);\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\n\t\tthis.inputFeedbackNode.connect(this.delayNode);\n\t\tthis.inputFeedbackNode.connect(this.wetGainNode);\n\t\n\t\tthis.delayNode.connect(this.wetGainNode);\n\t\tthis.delayNode.connect(this.feedbackNode);\n\t\n\t\tthis.feedbackNode.connect(this.inputFeedbackNode);\n\t\n\t\tthis.oscillatorNode.connect(this.gainNode);\n\t\tthis.gainNode.connect(this.delayNode.delayTime);\n\t\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tthis.oscillatorNode.start(0);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Flanger.prototype = Object.create(baseEffect, {\n\t\t\n\t\ttime: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.time;\n\t\t\t},\n\t\n\t\t\tset: function(time) {\n\t\n\t\t\t\tif (!Pz.Util.isInRange(time, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\tthis.delayNode.delayTime.value = Pz.Util.normalize(time, 0.001, 0.02);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tspeed: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.speed;\n\t\t\t},\n\t\n\t\t\tset: function(speed) {\n\t\t\t\tif (!Pz.Util.isInRange(speed, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.speed = speed;\n\t\t\t\tthis.oscillatorNode.frequency.value = Pz.Util.normalize(speed, 0.5, 5);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tdepth: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.depth;\n\t\t\t},\n\t\n\t\t\tset: function(depth) {\n\t\t\t\tif (!Pz.Util.isInRange(depth, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.depth = depth;\n\t\t\t\tthis.gainNode.gain.value = Pz.Util.normalize(depth, 0.0005, 0.005);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tfeedback: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.feedback;\n\t\t\t},\n\t\n\t\t\tset: function(feedback) {\n\t\t\t\tif (!Pz.Util.isInRange(feedback, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.feedback = feedback;\n\t\t\t\tthis.feedbackNode.gain.value = Pz.Util.normalize(feedback, 0, 0.8);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tmix: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix;\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.StereoPanner = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tpan: 0\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\n\t\tif (Pizzicato.context.createStereoPanner) {\n\t\t\tthis.pannerNode = Pizzicato.context.createStereoPanner();\n\t\t\tthis.inputNode.connect(this.pannerNode);\n\t\t\tthis.pannerNode.connect(this.outputNode);\n\t\n\t\t} else if (Pizzicato.context.createPanner) {\n\t\n\t\t\tconsole.warn('Your browser does not support the StereoPannerNode. Will use PannerNode instead.');\n\t\n\t\t\tthis.pannerNode = Pizzicato.context.createPanner();\n\t\t\tthis.pannerNode.type = 'equalpower';\n\t\t\tthis.inputNode.connect(this.pannerNode);\n\t\t\tthis.pannerNode.connect(this.outputNode);\n\t\n\t\t} else {\n\t\t\tconsole.warn('Your browser does not support the Panner effect.');\n\t\t\tthis.inputNode.connect(this.outputNode);\n\t\t}\n\t\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.StereoPanner.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Pan position\n\t\t */\n\t\tpan: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.pan;\t\n\t\t\t},\n\t\n\t\t\tset: function(pan) {\n\t\t\t\tif (!Pz.Util.isInRange(pan, -1, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.pan = pan;\n\t\n\t\t\t\tif (!this.pannerNode)\n\t\t\t\t\treturn;\n\t\n\t\t\t\tvar isStereoPannerNode = this.pannerNode.toString().indexOf('StereoPannerNode') > -1;\n\t\n\t\t\t\tif (isStereoPannerNode) {\n\t\t\t\t\tthis.pannerNode.pan.value = pan;\t\n\t\t\t\t} else {\n\t\t\t\t\tthis.pannerNode.setPosition(pan, 0, 1 - Math.abs(pan));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.Convolver = function(options, callback) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar self = this;\n\t\tvar request = new XMLHttpRequest();\n\t\tvar defaults = {\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.callback = callback;\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.convolverNode = Pizzicato.context.createConvolver();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\n\t\tthis.inputNode.connect(this.convolverNode);\n\t\n\t\tthis.convolverNode.connect(this.wetGainNode);\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t\n\t\tif (!options.impulse) {\n\t\t\tconsole.error('No impulse file specified.');\n\t\t\treturn;\n\t\t}\n\t\n\t\trequest.open('GET', options.impulse, true);\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onload = function (e) {\n\t\t\tvar audioData = e.target.response;\n\t\n\t\t\tPizzicato.context.decodeAudioData(audioData, function(buffer) {\n\t\n\t\t\t\tself.convolverNode.buffer = buffer;\n\t\n\t\t\t\tif (self.callback && Pz.Util.isFunction(self.callback))\n\t\t\t\t\tself.callback();\n\t\n\t\t\t}, function(error) {\n\t\n\t\t\t\terror = error || new Error('Error decoding impulse file');\n\t\n\t\t\t\tif (self.callback && Pz.Util.isFunction(self.callback))\n\t\t\t\t\tself.callback(error);\n\t\t\t});\n\t\t};\n\t\n\t\trequest.onreadystatechange = function(event) {\n\t\t\tif (request.readyState === 4 && request.status !== 200) {\n\t\t\t\tconsole.error('Error while fetching ' + options.impulse + '. ' + request.statusText);\n\t\t\t}\n\t\t};\n\t\n\t\trequest.send();\n\t};\n\t\n\tPizzicato.Effects.Convolver.prototype = Object.create(baseEffect, {\n\t\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix;\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t}\n\t});\n\t/**\n\t * Adapted from https://github.com/mmckegg/web-audio-school/blob/master/lessons/3.%20Effects/18.%20Ping%20Pong%20Delay/answer.js\n\t */\n\t\n\tPizzicato.Effects.PingPongDelay = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tfeedback: 0.5,\n\t\t\ttime: 0.3,\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.delayNodeLeft = Pizzicato.context.createDelay();\n\t\tthis.delayNodeRight = Pizzicato.context.createDelay();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.feedbackGainNode = Pizzicato.context.createGain();\n\t\tthis.channelMerger = Pizzicato.context.createChannelMerger(2);\n\t\n\t\t// dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\t// dry mix out\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\t// the feedback loop\n\t\tthis.delayNodeLeft.connect(this.channelMerger, 0, 0);\n\t\tthis.delayNodeRight.connect(this.channelMerger, 0, 1);\n\t\tthis.delayNodeLeft.connect(this.delayNodeRight);\n\t\tthis.feedbackGainNode.connect(this.delayNodeLeft);\n\t\tthis.delayNodeRight.connect(this.feedbackGainNode);\n\t\n\t\t// wet mix\n\t\tthis.inputNode.connect(this.feedbackGainNode);\n\t\n\t\t// wet out\n\t\tthis.channelMerger.connect(this.wetGainNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.PingPongDelay.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n\t\ttime: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.time;\t\n\t\t\t},\n\t\n\t\t\tset: function(time) {\n\t\t\t\tif (!Pz.Util.isInRange(time, 0, 180))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\tthis.delayNodeLeft.delayTime.value = time;\n\t\t\t\tthis.delayNodeRight.delayTime.value = time;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n\t\tfeedback: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.feedback;\t\n\t\t\t},\n\t\n\t\t\tset: function(feedback) {\n\t\t\t\tif (!Pz.Util.isInRange(feedback, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.feedback = parseFloat(feedback, 10);\n\t\t\t\tthis.feedbackGainNode.gain.value = this.feedback;\n\t\t\t}\n\t\t}\n\t\n\t});\n\t/**\n\t * Adapted from https://github.com/web-audio-components/simple-reverb\n\t */\n\t\n\tPizzicato.Effects.Reverb = function(options) {\n\t\tvar self = this;\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tmix: 0.5,\n\t\t\ttime: 0.01,\n\t\t\tdecay: 0.01,\n\t\t\treverse: false\n\t\t};\n\t\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.reverbNode = Pizzicato.context.createConvolver();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\n\t\tthis.inputNode.connect(this.reverbNode);\n\t\tthis.reverbNode.connect(this.wetGainNode);\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t\n\t\t(buildImpulse.bind(this))();\n\t};\n\t\n\tPizzicato.Effects.Reverb.prototype = Object.create(baseEffect, {\n\t\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix;\n\t\t\t},\n\t\n\t\t\tset: function (mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\ttime: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function () {\n\t\t\t\treturn this.options.time;\n\t\t\t},\n\t\n\t\t\tset: function (time) {\n\t\t\t\tif (!Pz.Util.isInRange(time, 0.0001, 10))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\t(buildImpulse.bind(this))();\n\t\t\t}\n\t\t},\n\t\n\t\tdecay: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function () {\n\t\t\t\treturn this.options.decay;\n\t\t\t},\n\t\n\t\t\tset: function (decay) {\n\t\t\t\tif (!Pz.Util.isInRange(decay, 0.0001, 10))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.decay = decay;\n\t\t\t\t(buildImpulse.bind(this))();\n\t\t\t}\n\t\n\t\t},\n\t\n\t\treverse: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function () {\n\t\t\t\treturn this.options.reverse;\n\t\t\t},\n\t\n\t\t\tset: function (reverse) {\n\t\t\t\tif (!Pz.Util.isBool(reverse))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.reverse = reverse;\n\t\t\t\t(buildImpulse.bind(this))();\n\t\t\t}\n\t\t}\n\t\n\t});\n\t\n\tfunction buildImpulse() {\n\t\n\t\tvar length = Pz.context.sampleRate * this.time;\n\t\tvar impulse = Pizzicato.context.createBuffer(2, length, Pz.context.sampleRate);\n\t\tvar impulseL = impulse.getChannelData(0);\n\t\tvar impulseR = impulse.getChannelData(1);\n\t\tvar n, i;\n\t\n\t\tfor (i = 0; i < length; i++) {\n\t\t\tn = this.reverse ? length - i : i;\n\t\t\timpulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, this.decay);\n\t\t\timpulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, this.decay);\n\t\t}\n\t\n\t        // https://github.com/alemangui/pizzicato/issues/91\n\t        // ConvolverNode can be associated with only one buffer.\n\t        // Not sure what's the best way, but we are recreating ConvolverNode\n\t        // when properties change to work it around.\n\t        if (this.reverbNode.buffer) {\n\t          this.inputNode.disconnect(this.reverbNode);\n\t          this.reverbNode.disconnect(this.wetGainNode);\n\t\n\t          this.reverbNode = Pizzicato.context.createConvolver();\n\t          this.inputNode.connect(this.reverbNode);\n\t          this.reverbNode.connect(this.wetGainNode);\n\t        }\n\t\n\t\tthis.reverbNode.buffer = impulse;\n\t}\n\t\n\tPizzicato.Effects.Tremolo = function(options) {\n\t\n\t\t// adapted from\n\t\t// https://github.com/mmckegg/web-audio-school/blob/master/lessons/3.%20Effects/13.%20Tremolo/answer.js\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tspeed: 4,\n\t\t\tdepth: 1,\n\t\t\tmix: 0.8\n\t\t};\n\t\n\t\t// create nodes\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\n\t\tthis.tremoloGainNode = Pizzicato.context.createGain();\n\t\tthis.tremoloGainNode.gain.value = 0;\n\t\tthis.lfoNode = Pizzicato.context.createOscillator();\n\t\n\t\tthis.shaperNode = Pizzicato.context.createWaveShaper();\n\t\tthis.shaperNode.curve = new Float32Array([0, 1]);\n\t\tthis.shaperNode.connect(this.tremoloGainNode.gain);\n\t\n\t\t// dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\t\n\t\t// wet mix\n\t\tthis.lfoNode.connect(this.shaperNode);\n\t\tthis.lfoNode.type = 'sine';\n\t\tthis.lfoNode.start(0);\n\t\n\t\tthis.inputNode.connect(this.tremoloGainNode);\n\t\tthis.tremoloGainNode.connect(this.wetGainNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Tremolo.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1)) \n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Speed of the tremolo\n\t\t */\n\t\tspeed: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.speed;\t\n\t\t\t},\n\t\n\t\t\tset: function(speed) {\n\t\t\t\tif (!Pz.Util.isInRange(speed, 0, 20)) \n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\tthis.options.speed = speed;\n\t\t\t\tthis.lfoNode.frequency.value = speed;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Depth of the tremolo\n\t\t */\n\t\tdepth: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.depth;\t\n\t\t\t},\n\t\n\t\t\tset: function(depth) {\n\t\t\t\tif (!Pz.Util.isInRange(depth, 0, 1)) \n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\tthis.options.depth = depth;\n\t\t\t\tthis.shaperNode.curve = new Float32Array([1-depth, 1]);\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.DubDelay = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tfeedback: 0.6,\n\t\t\ttime: 0.7,\n\t\t\tmix: 0.5,\n\t\t\tcutoff: 700\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.feedbackGainNode = Pizzicato.context.createGain();\n\t\tthis.delayNode = Pizzicato.context.createDelay();\n\t\tthis.bqFilterNode = Pizzicato.context.createBiquadFilter(); \n\t\n\t\n\t\t// dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\t// wet mix\n\t\tthis.inputNode.connect(this.wetGainNode);\n\t\tthis.inputNode.connect(this.feedbackGainNode);\n\t\n\t\tthis.feedbackGainNode.connect(this.bqFilterNode);\n\t\tthis.bqFilterNode.connect(this.delayNode);\n\t\tthis.delayNode.connect(this.feedbackGainNode);\n\t\tthis.delayNode.connect(this.wetGainNode);\n\t\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.DubDelay.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n\t\ttime: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.time;\t\n\t\t\t},\n\t\n\t\t\tset: function(time) {\n\t\t\t\tif (!Pz.Util.isInRange(time, 0, 180))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\tthis.delayNode.delayTime.value = time;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n\t\tfeedback: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.feedback;\t\n\t\t\t},\n\t\n\t\t\tset: function(feedback) {\n\t\t\t\tif (!Pz.Util.isInRange(feedback, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.feedback = parseFloat(feedback, 10);\n\t\t\t\tthis.feedbackGainNode.gain.value = this.feedback;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Frequency on delay repeats\n\t\t */\n\t\tcutoff: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.cutoff;\t\n\t\t\t},\n\t\n\t\t\tset: function(cutoff) {\n\t\t\t\tif (!Pz.Util.isInRange(cutoff, 0, 4000))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.cutoff = cutoff;\n\t\t\t\tthis.bqFilterNode.frequency.value = this.cutoff;\n\t\t\t}\n\t\t}\n\t\n\t\n\t\n\t});\n\t/**\n\t * See http://webaudio.prototyping.bbc.co.uk/ring-modulator/\n\t */\n\tPizzicato.Effects.RingModulator = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tspeed: 30,\n\t\t\tdistortion: 1,\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\n\t\n\t\t/**\n\t\t * `vIn` is the modulation oscillator input \n\t\t * `vc` is the audio input.\n\t\t */\n\t\tthis.vIn = Pizzicato.context.createOscillator();\n\t\tthis.vIn.start(0);\n\t\tthis.vInGain = Pizzicato.context.createGain();\n\t\tthis.vInGain.gain.value = 0.5;\n\t\tthis.vInInverter1 = Pizzicato.context.createGain();\n\t\tthis.vInInverter1.gain.value = -1;\n\t\tthis.vInInverter2 = Pizzicato.context.createGain();\n\t\tthis.vInInverter2.gain.value = -1;\n\t\tthis.vInDiode1 = new DiodeNode(Pizzicato.context);\n\t\tthis.vInDiode2 = new DiodeNode(Pizzicato.context);\n\t\tthis.vInInverter3 = Pizzicato.context.createGain();\n\t\tthis.vInInverter3.gain.value = -1;\n\t\tthis.vcInverter1 = Pizzicato.context.createGain();\n\t\tthis.vcInverter1.gain.value = -1;\n\t\tthis.vcDiode3 = new DiodeNode(Pizzicato.context);\n\t\tthis.vcDiode4 = new DiodeNode(Pizzicato.context);\n\t\n\t\tthis.outGain = Pizzicato.context.createGain();\n\t\tthis.outGain.gain.value = 3;\n\t\n\t\tthis.compressor = Pizzicato.context.createDynamicsCompressor();\n\t\tthis.compressor.threshold.value = -24;\n\t\tthis.compressor.ratio.value = 16;\n\t\n\t\t// dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\t// wet mix\t\n\t\tthis.inputNode.connect(this.vcInverter1);\n\t\tthis.inputNode.connect(this.vcDiode4.node);\n\t\tthis.vcInverter1.connect(this.vcDiode3.node);\n\t\tthis.vIn.connect(this.vInGain);\n\t\tthis.vInGain.connect(this.vInInverter1);\n\t\tthis.vInGain.connect(this.vcInverter1);\n\t\tthis.vInGain.connect(this.vcDiode4.node);\n\t\tthis.vInInverter1.connect(this.vInInverter2);\n\t\tthis.vInInverter1.connect(this.vInDiode2.node);\n\t\tthis.vInInverter2.connect(this.vInDiode1.node);\n\t\tthis.vInDiode1.connect(this.vInInverter3);\n\t\tthis.vInDiode2.connect(this.vInInverter3);\n\t\tthis.vInInverter3.connect(this.compressor);\n\t\tthis.vcDiode3.connect(this.compressor);\n\t\tthis.vcDiode4.connect(this.compressor);\n\t\tthis.compressor.connect(this.outGain);\n\t\tthis.outGain.connect(this.wetGainNode);\n\t\n\t\t// line out\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tvar DiodeNode = function(context_) {\n\t\tthis.context = context_;\n\t\tthis.node = this.context.createWaveShaper();\n\t\tthis.vb = 0.2;\n\t\tthis.vl = 0.4;\n\t\tthis.h = 1;\n\t\tthis.setCurve();\n\t};\n\t\n\tDiodeNode.prototype.setDistortion = function (distortion) {\n\t\tthis.h = distortion;\n\t\treturn this.setCurve();\n\t};\n\t\n\tDiodeNode.prototype.setCurve = function () {\n\t\tvar i, \n\t\t\tsamples, \n\t\t\tv, \n\t\t\tvalue, \n\t\t\twsCurve, \n\t\t\t_i, \n\t\t\t_ref, \n\t\t\tretVal;\n\t\n\t\tsamples = 1024;\n\t\twsCurve = new Float32Array(samples);\n\t\t\n\t\tfor (i = _i = 0, _ref = wsCurve.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n\t\t\tv = (i - samples / 2) / (samples / 2);\n\t\t\tv = Math.abs(v);\n\t\t\tif (v <= this.vb) {\n\t\t\t\tvalue = 0;\n\t\t\t} else if ((this.vb < v) && (v <= this.vl)) {\n\t\t\t\tvalue = this.h * ((Math.pow(v - this.vb, 2)) / (2 * this.vl - 2 * this.vb));\n\t\t\t} else {\n\t\t\t\tvalue = this.h * v - this.h * this.vl + (this.h * ((Math.pow(this.vl - this.vb, 2)) / (2 * this.vl - 2 * this.vb)));\n\t\t\t}\n\t\t\twsCurve[i] = value;\n\t\t}\n\t\n\t\tretVal = this.node.curve = wsCurve;\n\t\treturn retVal;\n\t};\n\t\n\tDiodeNode.prototype.connect = function(destination) {\n\t\treturn this.node.connect(destination);\n\t};\n\t\n\t\n\tPizzicato.Effects.RingModulator.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Speed on the input oscillator\n\t\t */\n\t\tspeed: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.speed;\t\n\t\t\t},\n\t\n\t\t\tset: function(speed) {\n\t\t\t\tif (!Pz.Util.isInRange(speed, 0, 2000))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.speed = speed;\n\t\t\t\tthis.vIn.frequency.value = speed;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Level of distortion\n\t\t */\n\t\tdistortion: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.distortion;\t\n\t\t\t},\n\t\n\t\t\tset: function(distortion) {\n\t\t\t\tif (!Pz.Util.isInRange(distortion, 0.2, 50))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.distortion = parseFloat(distortion, 10);\n\t\n\t\t\t\tvar diodeNodes = [this.vInDiode1, this.vInDiode2, this.vcDiode3, this.vcDiode4];\n\t\n\t\t\t\tfor (var i=0, l=diodeNodes.length; i<l; i++) {\n\t\t\t\t\tdiodeNodes[i].setDistortion(distortion);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.Quadrafuzz = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tlowGain: 0.6,\n\t\t\tmidLowGain: 0.8,\n\t\t\tmidHighGain: 0.5,\n\t\t\thighGain: 0.6\n\t\t};\n\t\n\t\n\t\tthis.inputNode = Pz.context.createGain();\n\t\tthis.outputNode = Pz.context.createGain();\n\t\tthis.dryGainNode = Pz.context.createGain();\n\t\tthis.wetGainNode = Pz.context.createGain();\n\t\n\t\n\t\tthis.lowpassLeft = Pz.context.createBiquadFilter();\n\t\tthis.lowpassLeft.type = 'lowpass';\n\t\tthis.lowpassLeft.frequency.value = 147;\n\t\tthis.lowpassLeft.Q.value = 0.7071;\n\t\n\t\tthis.bandpass1Left = Pz.context.createBiquadFilter();\n\t\tthis.bandpass1Left.type = 'bandpass';\n\t\tthis.bandpass1Left.frequency.value = 587;\n\t\tthis.bandpass1Left.Q.value = 0.7071;\n\t\n\t\tthis.bandpass2Left = Pz.context.createBiquadFilter();\n\t\tthis.bandpass2Left.type = 'bandpass';\n\t\tthis.bandpass2Left.frequency.value = 2490;\n\t\tthis.bandpass2Left.Q.value = 0.7071;\n\t\n\t\tthis.highpassLeft = Pz.context.createBiquadFilter();\n\t\tthis.highpassLeft.type = 'highpass';\n\t\tthis.highpassLeft.frequency.value = 4980;\n\t\tthis.highpassLeft.Q.value = 0.7071;\n\t\n\t\n\t\tthis.overdrives = [];\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis.overdrives[i] = Pz.context.createWaveShaper();\n\t\t\tthis.overdrives[i].curve = getDistortionCurve();\n\t\t}\n\t\n\t\n\t\tthis.inputNode.connect(this.wetGainNode);\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\tvar filters = [this.lowpassLeft, this.bandpass1Left, this.bandpass2Left, this.highpassLeft];\n\t\tfor (i = 0; i < filters.length; i++) {\n\t\t\tthis.wetGainNode.connect(filters[i]);\n\t\t\tfilters[i].connect(this.overdrives[i]);\n\t\t\tthis.overdrives[i].connect(this.outputNode);\n\t\t}\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tfunction getDistortionCurve(gain) {\n\t\tvar sampleRate = Pz.context.sampleRate;\n\t\tvar curve = new Float32Array(sampleRate);\n\t\tvar deg = Math.PI / 180;\n\t\n\t\tfor (var i = 0; i < sampleRate; i++) {\n\t\t\tvar x = i * 2 / sampleRate - 1;\n\t\t\tcurve[i] = (3 + gain) * x * 20 * deg / (Math.PI + gain * Math.abs(x));\n\t\t}\n\t\treturn curve;\n\t}\n\t\n\tPizzicato.Effects.Quadrafuzz.prototype = Object.create(baseEffect, {\n\t\n\t\tlowGain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.lowGain;\n\t\t\t},\n\t\n\t\t\tset: function(lowGain) {\n\t\t\t\tif (!Pz.Util.isInRange(lowGain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.lowGain = lowGain;\n\t\t\t\tthis.overdrives[0].curve = getDistortionCurve(Pz.Util.normalize(this.lowGain, 0, 150));\n\t\t\t}\n\t\t},\n\t\n\t\tmidLowGain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.midLowGain;\n\t\t\t},\n\t\n\t\t\tset: function(midLowGain) {\n\t\t\t\tif (!Pz.Util.isInRange(midLowGain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.midLowGain = midLowGain;\n\t\t\t\tthis.overdrives[1].curve = getDistortionCurve(Pz.Util.normalize(this.midLowGain, 0, 150));\n\t\t\t}\n\t\t},\n\t\n\t\tmidHighGain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.midHighGain;\n\t\t\t},\n\t\n\t\t\tset: function(midHighGain) {\n\t\t\t\tif (!Pz.Util.isInRange(midHighGain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.midHighGain = midHighGain;\n\t\t\t\tthis.overdrives[2].curve = getDistortionCurve(Pz.Util.normalize(this.midHighGain, 0, 150));\n\t\t\t}\n\t\t},\n\t\n\t\thighGain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.highGain;\n\t\t\t},\n\t\n\t\t\tset: function(highGain) {\n\t\t\t\tif (!Pz.Util.isInRange(highGain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.highGain = highGain;\n\t\t\t\tthis.overdrives[3].curve = getDistortionCurve(Pz.Util.normalize(this.highGain, 0, 150));\n\t\t\t}\n\t\t}\n\t});\n\t\n\treturn Pizzicato;\n}\n","import { render } from \"./EditView.vue?vue&type=template&id=52f7963e&scoped=true\"\nimport script from \"./EditView.vue?vue&type=script&lang=js\"\nexport * from \"./EditView.vue?vue&type=script&lang=js\"\n\nimport \"./EditView.vue?vue&type=style&index=0&id=52f7963e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-52f7963e\"]])\n\nexport default __exports__","<template>\n  <div class=\"container record\">\n    <van-nav-bar\n      :title=\"musicName\"\n      left-text=\"主页\"\n      @click-left=\"onBack()\"\n      right-text=\"设置\"\n      @click-right=\"onSetting\"\n    />\n    <audio\n      ref=\"audio\"\n      @timeupdate=\"onTimeUpdate\"\n      style=\"display: none\"\n      @ended=\"finish\"\n      @loadedmetadata=\"onLoadedMetadata\"\n    ></audio>\n    <div class=\"content c-text-center\">\n      <div class=\"c-lrcbox\">\n        <van-picker\n          @touchstart=\"onTouchStart\"\n          @touchend=\"onTouchEnd\"\n          :class=\"getCurClass()\"\n          :show-toolbar=\"false\"\n          :columns=\"store.parsedLyrics\"\n          @change=\"onChange\"\n          v-model=\"curVal\"\n          :readonly=\"countingdown || !playing\"\n          visible-option-num=\"8\"\n          option-height=\"8vh\"\n          swipe-duration=\"400\"\n        />\n        <div class=\"c-cd-dotbox\" v-show=\"countingdown\">\n          <i v-for=\"n in dotCount\" :key=\"n\" class=\"c-cd-dotitem\"></i>\n        </div>\n      </div>\n      <div class=\"c-ctrlbox\">\n        <div class=\"c-ctrlitem\" @click=\"onReplay\">\n          <van-icon name=\"revoke\" class=\"c-ctrlicon\" />\n          <span>重唱</span>\n        </div>\n        <div class=\"c-ctrlitem\">\n          <van-icon\n            v-show=\"playing\"\n            name=\"pause-circle-o\"\n            class=\"c-ctrlicon-big\"\n            @click=\"onPause\"\n          />\n          <van-icon\n            name=\"play-circle\"\n            class=\"c-ctrlicon-big\"\n            v-show=\"!playing\"\n            @click=\"onPlay\"\n          />\n        </div>\n        <div class=\"c-ctrlitem\" @click=\"onFinish\">\n          <van-icon name=\"passed\" class=\"c-ctrlicon\" />\n          <span>完成</span>\n        </div>\n      </div>\n      <div class=\"c-timebox\">\n        {{ util.convertTime(curTime) }} / {{ util.convertTime(store.banzouLength) }}\n      </div>\n      <div>\n        <van-button class=\"c-jump-btn\" plain type=\"default\" v-show=\"jumpShow\" @click=\"jumpToSing\">跳过前奏</van-button>\n      </div>\n        <canvas ref=\"waveBox\" width=\"375\" height=\"40\" class=\"c-re-wave\"></canvas>\n    </div>\n  </div>\n  <van-action-sheet\n    v-model:show=\"fShow\"\n    :actions=\"fShowList\"\n    @select=\"onFshowSelect\"\n    cancel-text=\"取消\"\n    close-on-click-action\n    @cancel=\"onFshowCancel\"\n  />\n  <SettingDialog v-model:visible=\"settingShow\"/>\n  <!-- <van-dialog v-model:show=\"settingShow\" title=\"设置\">\n    <div class=\"c-setting-box\">\n      <van-cell title=\"歌词同步\" :value=\"store.lrcDelayTime\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"store.lrcDelayTime\"\n          @change=\"onlrcDelayChange\"\n          min=\"-2\"\n          max=\"2\"\n          step=\"0.1\"\n        />\n      </div>\n    </div>\n  </van-dialog> -->\n</template>\n<script>\n// @ is an alias to /src\n\nimport useStore from \"../store\";\nimport { showConfirmDialog } from \"vant\";\nimport SettingDialog from \"../components/SettingDialog\";\nimport util from \"../common/js/util.js\";\n\n/* eslint-disable*/\n// import { showToast } from \"vant\";\nexport default {\n  name: \"RecordView\",\n  components: {SettingDialog},\n  setup() {\n    // 不把store写在这,初始化的好多值就报错\n    const store = useStore();\n    return { store, util };\n  },\n  data() {\n    return {\n      // 标题\n      musicName: \"\",\n      // 当前播放时间\n      curTime: 0,\n      // 是否显示跳过前奏按钮\n      jumpShow: false,\n      // store对象\n      // store: null,\n      // 音频文件的url格式\n      audioUrl: null,\n      curVal: [], // 当前选中的歌词行\n      // 正在倒计时\n      countingdown: false,\n      // 倒计时的点数\n      dotCount: 5,\n      // 是否需要显示倒计时\n      needCountdown: false,\n      // 什么时候显示倒计时\n      showCountdownTime: null,\n      // 是否正在滚动\n      scrolling: false,\n      // 播放状态\n      playing: false,\n      // 点击完成的时候如果没有播放完 弹出的提示框\n      fShow: false,\n      fShowList: [\n        { name: \"结束在当前位置\" },\n        { name: \"结束并保留之后的伴奏\" },\n      ],\n      // 录音对象\n      mediaRecorder: null,\n      // 空白音频\n      // blankAudioBuffer: null,\n      recordStarttime: 0,\n      // 设置窗口\n      settingShow: false,\n\n      // 音频上下文 用来升降调,声音增大\n      audioCtx: null,\n      // 升降调\n      pitchShift_banzou: null,\n      // 声音控制\n      gainNode_banzou: null,\n\n      // 音频分析器\n      analyser: null,\n      // 画布上下文\n      ctx: null,\n\n    };\n  },\n  mounted() {\n    document.addEventListener('visibilitychange', this.setVisibilyChange); \n    // 取store对象\n   console.log(this.store);\n    // console.log(store.banzou);\n    if (!this.store.banzou) {\n      alert(\"请先选择伴奏文件\");\n      this.$router.replace(\"/\");\n      return;\n    }    \n    navigator.mediaDevices.getUserMedia({ audio: {\n      channelCount: 2,\n      sampleRate: 48000, //采样率，决定每秒采集的音频样本数量。\n      sampleSize: 16, // 每个音频样本的位深度，常用的为 16 位。\n      // 说这个参数如果设置为true就是单声道效果\n      echoCancellation: false,  // 回声消除，防止麦克风录入扬声器的声音。\n      noiseSuppression: false, // 噪声抑制，用于减少背景噪声。\n      autoGainControl: true, // 自动增益控制，调节音量使其保持在合理水平。\n    } })\n    .then(stream => {\n      this.initMediaRecorder(stream);\n\n      // 给标题赋值\n      this.musicName = this.store.banzou.name.replace(/\\.(mp3|wav)$/i, \"\");\n      // 清空录音列表\n      this.store.audioChunk = [];\n      this.connectAuido();\n      this.initAnalyser(stream);\n      // 读取歌词\n      if (this.store.lrc) {\n        this.store.readLrcText().then(() => {\n          // console.log(lrcText);\n          // this.columns = this.parseLRC(lrcText);\n          //this.lrcText = lrcText;\n          //this.parseLRC(this.lrcText);\n          if (this.store.parsedLyrics[0]) {\n            this.setCountdownTime(this.store.parsedLyrics[0].value);\n          }          \n          this.loadAudio();\n          // this.mediaRecorder.start();\n        });\n      } else {\n        this.loadAudio();\n        // this.mediaRecorder.start();\n      }      \n    }).catch(err => {\n      console.log(err);\n      alert(\"麦克风权限请求失败,无法进行录音\");\n    });\n \n  },\n  unmounted() {\n    document.removeEventListener('visibilitychange', this.setVisibilyChange); \n    if (this.audioUrl) {\n      URL.revokeObjectURL(this.audioUrl);\n      this.audioUrl = null;\n    }    \n    if (this.$refs.audio) {\n      this.$refs.audio.pause();\n      this.$refs.audio.src = \"\";\n    }\n    if(this.mediaRecorder){\n      this.mediaRecorder.stop();\n      this.mediaRecorder = null;\n    }\n    this.clearTimer();\n    // this.audioCtx = null;\n    // Tone.setContext(null);\n  },\n  watch: {\n    // 监视全局伴奏音量变化\n    \"store.banzouVolume\": {\n      handler() {\n        if (this.audioCtx) {\n          this.gainNode_banzou.gain.value = this.store.banzouVolume;\n          //this.gainNode_banzou.gain.setValueAtTime(0.5, this.audioCtx.currentTime);\n        }\n      },\n    },\n    //监视全局伴奏音调变化\n    \"store.banzouPitch\": {\n      handler() {\n        if (this.audioCtx) {\n          this.pitchShift_banzou.pitch = this.store.banzouPitch;\n          // this.pitchShift_banzou.set({ pitch: 2 });\n        }\n      },\n    },    \n  },\n  methods: {\n    test1() {\n      console.log(\"test1\" + this.store);\n    },\n    setVisibilyChange() {\n      // 小米浏览器会在切换回来的时候 自动让audioContext调用resume方法,真坑啊...必须自己再给点回去\n      if (document.visibilityState === 'visible') {\n        try {\n          this.audioCtx.suspend();\n        }\n        catch(e){}\n      }\n      else if (document.visibilityState === 'hidden') {\n        this.onPause();\n      }\n    },     \n    //创建一个波形分析图,麦克风有声音它就会有变化\n    initAnalyser(stream) {\n        const source = this.audioCtx.createMediaStreamSource(stream);\n        // 创建 AnalyserNode 用于音频数据分析\n        this.analyser = this.audioCtx.createAnalyser();\n        // fftSize 表示 FFT 计算的采样点数，它必须是 32 到 32768 之间的 2 的幂（如 32、64、128、256、512、1024、2048 等）。\n        // fftSize 值越大，频率分辨率越高，也就是说可以更精细地分析频率成分，但会占用更多的计算资源。\n        this.analyser.fftSize = 2048; // 设置 FFT 大小  默认就是2048\n        source.connect(this.analyser);\n        let cvs = this.$refs.waveBox;\n        this.ctx = cvs.getContext(\"2d\");\n        this.drawWaveform();\n    },\n    // 绘制波形\n    drawWaveform() {\n        const bufferLength = this.analyser.fftSize;\n        const dataArray = new Uint8Array(bufferLength);\n        let canvas = this.$refs.waveBox;\n        let canvasCtx = this.ctx;\n        let draw = ()=> {\n            // 获取当前音频数据\n            this.analyser.getByteTimeDomainData(dataArray);\n\n            // 清除画布\n            canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n\n            // 设置波形线条样式\n            canvasCtx.lineWidth = 1.5;\n            canvasCtx.strokeStyle = '#e4310d';\n\n            // 开始绘制波形\n            canvasCtx.beginPath();\n            const sliceWidth = canvas.width * 1.0 / bufferLength;\n            let x = 0;\n\n            for (let i = 0; i < bufferLength; i++) {\n                const v = dataArray[i] / 128.0;\n                const y = v * canvas.height / 2;\n\n                if (i === 0) {\n                    canvasCtx.moveTo(x, y);\n                } else {\n                    canvasCtx.lineTo(x, y);\n                }\n\n                x += sliceWidth;\n            }\n\n            canvasCtx.lineTo(canvas.width, canvas.height / 2);\n            canvasCtx.stroke();\n\n            // 持续绘制下一帧\n            this.animationId = requestAnimationFrame(draw);\n        }\n\n        draw(); // 启动绘制\n    },    \n    // 目前就是检查一下 看看是否需要显示跳过前奏按钮\n    checkQianzouLength() {\n      if(!this.store.parsedLyrics || !this.store.parsedLyrics.length) {\n        return;\n      }\n      if(this.store.parsedLyrics[0].time > 10) {\n        this.jumpShow = true;\n      }\n    },\n    jumpToSing() {\n      let time = this.store.parsedLyrics[0].value;\n      this.curVal = [time];\n      this.onChange({ selectedValues: [time]});\n      this.changeTime();\n      this.jumpShow = false;\n    },\n    clearTimer() {\n      clearTimeout(this.cdTimer);\n      clearTimeout(this.delayTimer);\n      clearTimeout(this.touchEndTimer);\n      cancelAnimationFrame(this.animationId);\n    },\n    onSetting() {\n      this.settingShow = true;\n    },\n    //设置歌词迟延时间\n    // onlrcDelayChange(v) {\n    //   this.parseLRC(this.lrcText);\n    // },\n    setMediaRecorder() {\n      this.mediaRecorder.ondataavailable = event => {\n        console.log(event.data)\n        if(!this.$refs.audio) {\n          return;\n        }\n        this.store.audioChunk.push({\n          start: this.recordStarttime,\n          end: this.$refs.audio.currentTime,\n          blob: event.data\n        });\n        console.log(this.store.audioChunk)\n      };\n    },\n    initMediaRecorder(stream) {\n      this.mediaRecorder = new MediaRecorder(stream);\n      this.setMediaRecorder();\n      // console.log(this.mediaRecorder.resume);\n      // mediaRecorder.start();\n      // this.recordChunks = [];\n\n\n      // this.mediaRecorder.onstop = () => {\n        // const blob = new Blob(this.recordChunks, { 'type': 'audio/ogg; codecs=opus' });\n        // // 保存录制的人声\n        // const voiceUrl = URL.createObjectURL(blob);\n        // const a = document.createElement('a');\n        // a.href = voiceUrl;\n        // a.download = 'vocal.ogg';\n        // document.body.appendChild(a);\n        // a.click();\n      // };\n\n      // // 在适当的时候停止录音\n      // setTimeout(() => {\n      //   mediaRecorder.stop();\n      // }, 15000); // 录音5秒\n    },\n    removeRecordedSegmentsAfter(time) {\n      // 删除在指定时间之后的录音片段\n      this.store.audioChunk = this.store.audioChunk.filter(segment => segment.start < time);\n    },  \n    //创建空白音频 用户自己拖动歌词的时候会把它前面的部分填充空白的音频\n    createSilentAudio(duration) {\n      // 生成指定时长的空白音频\n      const audioCtx =  this.audioCtx; //this.audioContext || (this.audioContext = new AudioContext());\n      const channels = 2;\n      const frameCount = audioCtx.sampleRate * duration;\n      const silentBuffer = audioCtx.createBuffer(channels, frameCount, audioCtx.sampleRate);\n      return silentBuffer;\n    },      \n    // 歌词列表的一些样式逻辑 它自己滚动 如果有手按住了就停止,手放开就继续\n    getCurClass(){\n      let sText = [];\n      if(this.dotCount <= 0 ) {\n        sText.push('c-start-sing')\n      }\n      if(this.scrolling){\n        sText.push('c-picker-scrolling')\n      }\n      return sText.join(' ');\n    },\n    // 手按住\n    onTouchStart(){\n      if (this.countingdown || !this.playing) {\n        return;\n      }\n      console.log(\"onTouchStart\");\n      if(this.touchEndTimer) {\n        clearTimeout(this.touchEndTimer);\n        this.touchEndTimer = null;\n      }\n      else {\n        // 没有touchEndTimer 说明是第一次按下 记录一下当前时间\n        this.touchTime = this.$refs.audio.currentTime;\n      }\n      this.scrolling = true;\n    },\n    // 手放开\n    onTouchEnd(){\n      if (this.countingdown || !this.playing) {\n        return;\n      }\n      console.log(\"will onTouchEnd\");\n      this.touchEndTimer = setTimeout(() => {\n        console.log(\"onTouchEnd\");\n        this.scrolling = false;\n        this.touchEndTimer = null;\n        this.changeTime();\n        // todo 在这把onchange的代码挪过来一些\n      }, 500);\n    },\n    // setRecordAudio(touchTime, nextTime) {\n    //   if(nextTime > touchTime) {\n    //     let buffer = this.createSilentAudio(nextTime - touchTime);\n    //     this.store.audioChunk.push({\n    //       end: nextTime,\n    //       blob: buffer.getChannelData(0)\n    //     });\n    //     console.log(\"chunk \", this.store.audioChunk);\n    //   }\n    // },\n    // 加载音频\n    loadAudio() {\n      this.audioUrl = window.URL.createObjectURL(this.store.banzou);\n      this.$refs.audio.src = this.audioUrl;\n    },\n    onLoadedMetadata() {\n      this.store.banzouLength = this.$refs.audio.duration;\n      this.mediaRecorder.start();\n      this.$refs.audio.play();\n      this.playing = true;\n      this.checkQianzouLength();\n    },\n\n    // connect audio\n    connectAuido() {\n      var audioCtx = new (window.AudioContext || window.webkitAudioContext);\n      var mediaElem = this.$refs.audio;\n      var stream = audioCtx.createMediaElementSource(mediaElem);\n      var gainNode = audioCtx.createGain();\n\n      // This a normal connection between to native AudioNodes.\n      stream.connect(gainNode);\n\n      // Set the context used by Tone.js\n      Tone.setContext(audioCtx);\n      gainNode.gain.value = this.store.banzouVolume;\n\n      var pitchShift = new Tone.PitchShift();\n      pitchShift.pitch = this.store.banzouPitch;\n      // Use the Tone.connect() helper to connect native AudioNodes with the nodes provided by Tone.js\n      Tone.connect(gainNode, pitchShift);\n      Tone.connect(pitchShift, audioCtx.destination);\n\n      this.audioCtx = audioCtx;\n      this.gainNode_banzou = gainNode;\n      // console.log(11111,Tone)\n      this.pitchShift_banzou = pitchShift;\n    },\n\n    // 读取歌词-- 放到store里面去读取了 而且增加了编码格式的参数 这个目前不用了\n    // readText() {\n    //   return new Promise((rs) => {\n    //     let fr = new FileReader();\n    //     fr.onload = (e) => {\n    //       rs(e.target.result);\n    //     };\n    //     fr.readAsText(this.store.lrc, \"GBK\");\n    //   });\n    // },\n    \n    // 后退\n    onBack() {\n      this.$router.replace(\"/\");\n    },\n    // // js解析歌词\n    // parseLRC(lrcContent) {\n    //   const lines = lrcContent.split(/[\\r\\n]/);\n    //   const timeExp = /\\[(\\d{2}):(\\d{2})\\.(\\d{2,3})\\]/; // 匹配时间戳 [mm:ss.xx]\n    //   const lyricsList = [];\n\n    //   lines.forEach((line) => {\n    //     const match = timeExp.exec(line);\n    //     if (match) {\n    //       const minutes = parseInt(match[1], 10);\n    //       const seconds = parseInt(match[2], 10);\n    //       let milliseconds = parseInt(match[3], 10);\n    //       milliseconds = match[3].length > 2 ? parseInt(match[3], 10) / 1000 : parseInt(match[3], 10) / 100;\n    //       const timeInSeconds = minutes * 60 + seconds + milliseconds;\n\n    //       const lyricText = line.replace(timeExp, \"\").trim();\n\n    //       // 将歌词转换为Picker需要的格式\n    //       lyricsList.push({\n    //         text: lyricText,\n    //         value: timeInSeconds + this.store.lrcDelayTime,\n    //         time: timeInSeconds + this.store.lrcDelayTime,\n    //       });\n    //     }\n    //   });\n\n    //   this.store.parsedLyrics = lyricsList;\n    // },\n    \n    // 设置演唱倒计时\n    setCountdownTime(n) {\n      if (n < 5) {\n        this.showCountdownTime = 0;\n      } else {\n        this.showCountdownTime = n - 5;\n      }\n      this.needCountdown = true;\n    },\n    // 暂停\n    onPause() {\n      if(this.countingdown){\n        return;\n      }\n      this.$refs.audio.pause();\n      this.mediaRecorder.pause();\n      this.playing = false;\n    },\n    // 播放\n    onPlay(){\n      if(this.countingdown){\n        return;\n      }      \n      this.$refs.audio.play();\n      this.mediaRecorder.resume();\n      this.playing = true;\n    },\n    // 播放进度更新\n    onTimeUpdate() {\n      const audio = this.$refs.audio;\n      if (!audio) {\n        return;\n      }\n      this.curTime = audio.currentTime;\n      \n      if (this.countingdown || this.scrolling) {\n        return;\n      }\n      console.log(\"---------onTimeUpdate\");\n\n      const currentTime = audio.currentTime;\n     // console.log(currentTime);\n     // 如果需要倒计时, 并且当前时间大于显示倒计时的时间(需要倒计时但不一定一开始就显示出来,比如有前凑,在快要开始唱的时候才开始倒计时)\n      if (this.needCountdown && currentTime >= this.showCountdownTime) {\n        this.jumpShow = false;\n        let n = currentTime - this.showCountdownTime; // 回调函数的时间可能会比显示倒计时的时间晚了一点,所以需要计算一下 比如现在多了0.3秒\n        let m = Math.floor(n); // 向下取整为0 \n        let delay = 1000 - 1000 * (n - m);  // 计算延时就是 多了的300毫秒 再用1000减去她, 这样后面倒计时就是整秒数\n        this.dotCount = Math.floor(5 - (n - m)); // 5秒倒计时 就要减去0.3秒 然后再去整 这样方便显示小圆点\n        // 如果倒计时已经过了,就不显示了\n        if (this.dotCount < 0) {\n          this.dotCount = 0;\n          this.needCountdown = false;\n          return;\n        }\n        this.countingdown = true;\n        this.delayTimer = setTimeout(() => {\n          this.countdown().then(()=> {\n            // 不延时 字幕会先网上滚动\n            //setTimeout(() => {\n              this.countingdown = false;\n              if(this.mediaRecorder.state !== \"recording\") {\n                this.mediaRecorder.start();\n                this.recordStarttime = this.$refs.audio.currentTime;\n                // 去掉之后的录音\n                this.removeRecordedSegmentsAfter(this.recordStarttime);\n              }\n            //}, 300);\n          });\n        }, delay);\n        this.needCountdown = false;\n        return;\n      }\n      if(this.countingdown){\n        return;\n      }\n      // 查找当前播放时间对应的歌词行\n      for (let i = 0; i < this.store.parsedLyrics.length; i++) {\n        if (\n          currentTime >= this.store.parsedLyrics[i].time &&\n          (i === this.store.parsedLyrics.length - 1 ||\n            currentTime < this.store.parsedLyrics[i + 1].time)\n        ) {\n          this.curVal = [this.store.parsedLyrics[i].value]; // 自动滚动到当前歌词行\n          break;\n        }\n      }\n    },\n\n    // 用手滑动后的事件, 歌曲比手滑动的位置稍微往前一点 此时歌词不动, 歌曲演唱, 到了手滑动的位置歌词才开始滚动\n    onChange({ selectedValues }) {\n      // if(this.changeTimer) {\n      //   clearTimeout(this.changeTimer);\n      //   this.changeTimer = null;\n      // }\n      //调用stop 这样会触发ondataavailable 事件, 之前的录音会被记录到数组\n      // this.mediaRecorder.stop();\n      //this.changeTimer = setTimeout(() => {\n        // if(this.scrolling){\n        //   return;\n        // }\n        // console.log(\"stop\")\n        // //showToast(`当前值: ${selectedValues.join(\",\")}`);\n        // //this.setRecordAudio(this.touchTime, selectedValues[0])\n\n        // // this.touchTime = null;\n        // let n = selectedValues[0] - 5;\n        // if(n < 0){\n        //   n = 0;\n        // }\n        // this.$refs.audio.currentTime = n;\n        // this.setCountdownTime(selectedValues[0]);\n      //}, 500);\n      if(this.mediaRecorder.state === \"recording\") {\n        this.mediaRecorder.stop();\n      }\n      this.valueChangeTime = selectedValues[0];\n\n    },\n\n    changeTime() {\n      if(this.scrolling || !this.valueChangeTime){\n        return;\n      }\n      //console.log(\"stop\")\n      //showToast(`当前值: ${selectedValues.join(\",\")}`);\n      //this.setRecordAudio(this.touchTime, selectedValues[0])\n\n      // this.touchTime = null;\n      // 播放时间减去五秒, 也就是你切换到的地方, 再往回五秒开始播放\n      let n = this.valueChangeTime - 5;\n      if(n < 0){\n        n = 0;\n      }\n      console.log(\"n-> \", n);\n      this.$refs.audio.currentTime = n;\n      this.setCountdownTime(this.valueChangeTime);\n      this.valueChangeTime = null;\n    },\n\n    // 倒计时函数\n    countdown() {\n      // this.dotCount = n;\n      return new Promise((rs) => {\n        this.countingdown = true;\n        let fun = () => {\n          if (this.dotCount > 0) {\n            this.cdTimer = setTimeout(() => {\n              this.dotCount--;\n              fun();\n            }, 1000);\n          } else {\n            rs();\n          }\n        };\n        fun();\n      });\n    },\n    // 重录按钮\n    onReplay() {\n      if(this.countingdown == true) {\n        return;\n      }\n      showConfirmDialog({\n        title: '提示',\n        message:'是否要重录?',\n      }).then(() => {\n        this.doReplay();\n      })\n      .catch(() => {\n        // on cancel\n      });\n    },\n    // 重录函数\n    doReplay() {\n      this.clearTimer();\n      this.$refs.audio.pause();\n      this.$refs.audio.currentTime = 0;\n      this.countingdown = false;\n      this.dotCount = 5;\n      this.valueChangeTime = null;\n      this.showCountdownTime = null;\n      if(this.store.lrc && this.store.parsedLyrics.length) {\n        this.curVal = [this.store.parsedLyrics[0].value]\n        //this.needCountdown = true;\n        this.setCountdownTime(this.store.parsedLyrics[0].value);\n      }\n      \n      // 先把回调函数弄成空函数 这样调用stop的时候就不会触发原来的回调函数\n      // 但是不一定是马上触发,所以要测试一下\n      this.mediaRecorder.ondataavailable = ()=>{};\n      this.mediaRecorder.stop();\n      this.setMediaRecorder();\n      this.recordStarttime = 0;\n      this.store.audioChunk = [];\n      this.mediaRecorder.start();\n      this.drawWaveform();\n      this.$refs.audio.play();\n      this.playing = true;\n      this.checkQianzouLength();\n    },\n    // 结束播放事件\n    onFinish() {\n      if(this.countingdown == true) {\n        return;\n      }      \n      console.log('onFinish');\n      if(this.$refs.audio.paused) {\n        this.isAlreadyPaused = true;\n      }\n      else {\n        this.$refs.audio.pause();\n        this.isAlreadyPaused = false;\n      }\n      // 录音程序停止\n      this.fShow = true;\n    },\n    finish() {\n      console.log('finish');\n      this.$refs.audio.pause();\n      // stop后马上就跳转 是否影响 onavailable的触发?? 待测试\n      this.mediaRecorder.stop();\n      setTimeout(() => {\n        this.$router.push({\n          path: '/edit',\n        });\n      }, 50);\n\n    },\n    onFshowCancel() {\n      this.fShow = false;\n      // 如果用户先点了暂停 再点的完成 如何提示.... 要不就不处理了...\n      if(!this.isAlreadyPaused) {\n        this.$refs.audio.play();\n      }\n    },\n    onFshowSelect(action, index) {\n      console.log(action, index);\n      // 如果选了从当前位置结束 让this.store.recordLength = this.$refs.audio.currentTime;\n      if(index == 0) {\n        this.store.recordLength = this.$refs.audio.currentTime;\n      }\n      else if(index == 1) { // 必须写这个判断, 否则第二次如果选了保留后面的 就出错了\n        this.store.recordLength = 0;\n      }\n      this.finish();\n      \n    }\n  },\n};\n</script>\n<style scoped>\n.c-ctrlbox {\n  margin: 30px auto 0;\n  width: 200px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #1568c6;\n}\n.c-ctrlicon-big {\n  font-size: 50px;\n  color: #e4310d;\n}\n.c-ctrlicon {\n  font-size: 26px;\n}\n.c-ctrlitem {\n  text-align: center;\n}\n.c-ctrlitem span {\n  font-size: 12px;\n  display: block;\n}\n.c-lrcbox {\n  position: relative;\n}\n.c-cd-dotbox {\n  position: absolute;\n  width: 70px;\n  height: 10px;\n  top: 24vh;\n  left: 50%;\n  transform: translate(-50%, 0);\n  color: #e4310d;\n  z-index: 2000;\n  text-align: left;\n}\n.c-cd-dotitem {\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: #1089c1;\n  margin-right: 4px;\n}\n.c-timebox {\n  margin-top: 6px;\n}\n.c-jump-btn {\n  margin-top: 10px;\n  height: 34px;\n  line-height: 34px;\n  border: solid 1px #f39b9b;\n  background-color: #f1c7c7;\n  color: #e64141;\n}\n.c-re-wave {\n  /* border-bottom: solid 1px #f03737; */\n  /* 灰色横线 */  /* 白色底 */\n  /* background:  linear-gradient(transparent, #cccccc 1px, transparent 1px), white;  */\n  background-color: #FFFFFF;\n  background-size: 100% 8px; /* 每隔20px出现一条线 */  \n  position: absolute;\n  top: 46px;\n  left: 50%;\n  transform: translate(-50%, 0);\n  z-index: 99;\n}\n</style>\n","<template>\n  <van-dialog v-model:show=\"isVisible\" title=\"设置\" @close=\"onCloseDialog\">\n    <div class=\"c-setting-box\">\n      <van-cell title=\"歌词同步\" :value=\"store.lrcDelayTime\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"store.lrcDelayTime\"\n          @change=\"onlrcDelayChange\"\n          min=\"-2\"\n          max=\"2\"\n          step=\"0.1\"\n        />\n      </div>\n      <van-cell title=\"歌词编码\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-radio-group v-model=\"store.lrcEncoding\" direction=\"horizontal\" @change=\"onLrcEncodingChange\">\n          <van-radio name=\"GBK\">GBK</van-radio>\n          <van-radio name=\"UTF-8\">UTF-8</van-radio>\n        </van-radio-group>\n      </div>   \n      <van-cell title=\"伴奏音量\" :value=\"parseInt(store.banzouVolume*100)\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"store.banzouVolume\"\n          @change=\"onBanzouVolumeChange\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.1\"\n        />\n      </div>\n      <van-cell title=\"伴奏音调\" :value=\"parseInt(store.banzouPitch * 10)\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"store.banzouPitch\"\n          @change=\"onBanzouPitchChange\"\n          min=\"-1.1\"\n          max=\"1.1\"\n          step=\"0.1\"\n        />        \n      </div>         \n    </div>\n  </van-dialog>    \n</template>\n\n<script>\nimport useStore from \"../store\";\nimport { ref, watch } from \"vue\";\nexport default {\n  name: \"setting\",\n  props: {\n    visible: { type: Boolean, default: false },\n  },\n  emits: ['update:visible'],  \n  setup(props, { emit }) {\n    // 不把store写在这,初始化的好多值就报错\n    const store = useStore();\n    const isVisible = ref(props.visible);  \n  \n    // 监听props中的visible变化，更新isVisible  \n    watch(() => props.visible, (newVal) => {  \n      console.log(newVal);\n      isVisible.value = newVal;  \n    });   \n    // 如果需要从外部关闭对话框，可以定义一个方法来关闭 \n    let onCloseDialog = ()=> {  \n      console.log('关闭对话框');\n      emit('update:visible', false);  \n    } \n    return { store, isVisible, onCloseDialog };\n  },\n  methods: {\n    onlrcDelayChange (val) {\n      // 改歌词延迟只需要重新解析即可\n      this.store.parseLRC()\n    },\n    onLrcEncodingChange (val) {\n      // 改编码要重新读取文件 \n      this.store.readLrcText()\n    },\n    onBanzouVolumeChange(val) {\n      this.store.banzouVolume = val;\n    },\n    onBanzouPitchChange(val) {\n      this.store.banzouPitch = val;\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n.c-setting-box {\n  text-align: left;\n}\n.c-setting-sliderbox {\n  padding: 16px 20px;\n}\n</style>\n","import { render } from \"./SettingDialog.vue?vue&type=template&id=4c15c93c&scoped=true\"\nimport script from \"./SettingDialog.vue?vue&type=script&lang=js\"\nexport * from \"./SettingDialog.vue?vue&type=script&lang=js\"\n\nimport \"./SettingDialog.vue?vue&type=style&index=0&id=4c15c93c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4c15c93c\"]])\n\nexport default __exports__","import { render } from \"./RecordView.vue?vue&type=template&id=2d38b1eb&scoped=true\"\nimport script from \"./RecordView.vue?vue&type=script&lang=js\"\nexport * from \"./RecordView.vue?vue&type=script&lang=js\"\n\nimport \"./RecordView.vue?vue&type=style&index=0&id=2d38b1eb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2d38b1eb\"]])\n\nexport default __exports__","<template>\n  <div class=\"container compose\">\n    <van-nav-bar\n      title=\"合成\"\n      left-text=\"主页\"\n      @click-left=\"onBack()\"\n      right-text=\"设置\"\n      @click-right=\"onSetting\"      \n    />\n    <!-- <audio\n      ref=\"audio\"\n      style=\"display: none\"\n      @ended=\"finish\"\n      @loadedmetadata=\"onLoadedMetadata\"\n    ></audio> -->\n    <div class=\"content content-compose\">\n      <div class=\"c-e-name c-e-name-crop\">{{ musicName }}</div>\n      <div class=\"c-e-ctrlbox\">\n        <div class=\"c-e-ctrlitem\">\n          <van-icon\n            v-show=\"playing\"\n            name=\"pause-circle-o\"\n            class=\"c-e-ctrlicon\"\n            @click=\"onPause\"\n          />\n          <van-icon\n            name=\"play-circle\"\n            class=\"c-e-ctrlicon\"\n            v-show=\"!playing\"\n            @click=\"onPlay\"\n          />\n        </div>\n        <div class=\"c-e-sliderbox-time\">\n          {{ util.convertTime(curTime) }}\n        </div>\n        <div class=\"c-e-sliderbox\">\n          <van-slider v-model=\"curTime\" @change=\"onDurationChange\" :max=\"audioDuration\" @drag-start=\"dragging = true\" @drag-end=\"dragging = false\" />\n        </div>\n        <div class=\"c-e-sliderbox-time\">{{ util.convertTime(audioDuration) }}</div>\n      </div>\n      <div class=\"c-co-lrcbox\">\n        {{ curLrc }}\n      </div> \n      <div class=\"c-e-title\">\n        <span>伴奏音量</span><span>{{ accompanyVal }}</span>\n      </div>\n      <div class=\"c-e-voicebox c-co-voicebox\">\n        <van-slider min=\"0\" max=\"100\" v-model=\"accompanyVal\" @change=\"onAccompanyVoiceChange\" />\n      </div>      \n      <div class=\"c-e-title\">\n          <span>压缩音频</span>\n          <van-switch v-model=\"store.compress\" />\n        </div>      \n      <div class=\"c-co-imgbox\" v-show=\"imgList.length\">\n        <div class=\"c-co-imgtitle\">\n          <span>images:</span>\n          <van-radio-group v-model=\"orient\" direction=\"horizontal\" @change=\"onOrientChange\">\n            <van-radio name=\"0\">landscape</van-radio>\n            <van-radio name=\"1\">portrait</van-radio>\n          </van-radio-group>\n        </div>\n        <div :class=\"orient == '0' ? 'c-co-imglist': 'c-co-imglist portrait'\">\n          <div class=\"c-co-imgitem\" v-for=\"(item,index) of imgList\" :key=\"index\" :style=\"getBg(item)\">\n            <van-icon name=\"close\" class=\"c-co-imgrev\" @click=\"onRemoveImg(item, index)\"/>\n          </div>\n        </div>\n      </div>\n      <div class=\"c-e-editbox c-co-editbox\">\n        <!--  -->\n        <div class=\"c-co-item\" v-for=\"(item, index) of filelist\" :key=\"index\">\n          <audio :src=\"item.file.url\" ref=\"setItemRef\" class=\"c-co-audio\" />\n          <div class=\"c-co-namebox\">\n            <div class=\"c-co-itemname\">{{ item.file.name.replace(/\\.(mp3|wav)$/i, \"\") }}</div>\n          </div>\n          <div class=\"c-co-volbox\">\n            <span class=\"c-co-volname\">音量:&nbsp;<b>{{ item.volume }}</b></span>\n            <van-slider\n              class=\"c-co-volslider\"\n              v-model=\"item.volume\"\n              @change=\"onVolumeChange(item, index)\"\n            />\n          </div>\n          <div class=\"c-co-volbox\">\n            <span class=\"c-co-volname\">迟延:&nbsp;<b>{{ item.delay }}</b></span>\n            <van-slider\n              min=\"-2\"\n              max=\"2\"\n              step=\"0.1\"\n              class=\"c-co-volslider c-co-volslider-delay\"\n              v-model=\"item.delay\"\n              @change=\"onDelayChange(item, index)\"\n            />\n          </div>    \n          <div class=\"c-co-volbox\">\n            <div class=\"c-co-volname\">混响</div>\n            <div class=\"c-co-reverbbox\">\n              <!-- <van-radio-group v-model=\"item.reverb\" direction=\"horizontal\" @change=\"onReverbChange(item, index)\">\n                <van-radio class=\"c-co-reverbitem\" :name=\"0\">none</van-radio>\n                <van-radio class=\"c-co-reverbitem\" :name=\"1\">reverse</van-radio>\n                <van-radio class=\"c-co-reverbitem\" :name=\"2\">reverse2</van-radio>\n                <van-radio class=\"c-co-reverbitem\" :name=\"3\">reverse3</van-radio>\n              </van-radio-group> -->\n              <van-button v-show=\"item.reverb\" plain type=\"primary\" size=\"small\" class=\"c-e-cusbtn\" @click=\"onReverbSetting(item, index)\">设置</van-button>\n              <van-switch  v-model=\"item.reverb\" @change=\"(b)=>{onReverbChange(b, item, index)}\" />\n            </div>\n          </div>\n          <van-icon name=\"close\" class=\"c-co-remove\" @click=\"onVoiceRemove(item, index)\"/>\n        </div>\n      </div>\n      <div class=\"c-e-btnbox c-co-btnbox\">\n        <div class=\"c-co-innerbox\">\n          <input type=\"file\" multiple ref=\"imgFile\" style=\"display: none\" @change=\"onImgFileSelect\" />\n          <!-- 暂时去掉这个功能 发现了一个软件可以实现这样的功能, 就不自己实现了:-) -->\n          <!-- <van-button plain class=\"c-e-btn\" type=\"warning\" @click=\"onImgAdd\">image</van-button> -->\n          <input type=\"file\" ref=\"audioFile\" style=\"display: none\" @change=\"onAudioFileSelect\" />\n          <van-button class=\"c-e-btn\" type=\"primary\" @click=\"onAudioAdd\">添加人声</van-button>\n          <van-button round class=\"c-e-btn c-e-btn-r\" type=\"success\" @click=\"compose\">合成歌曲</van-button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <SettingDialog v-model:visible=\"settingShow\" :data=\"curReverbData\"/>\n  <ReverbDialog ref=\"rbDlg\" @change=\"onReverbDetailChange\" @close=\"curReverbItem=null\"/>\n\n</template>\n<script>\n// @ is an alias to /src\nimport { ref } from \"vue\";\nimport useStore from \"../store\";\nimport SettingDialog from \"../components/SettingDialog\";\nimport ReverbDialog from \"../components/ReverbDialog\";\nimport util from \"../common/js/util.js\";\nimport { renderProgress }from \"../common/js/progress.js\";\nimport downloadAudio from \"../common/js/downloadAudio.js\";\nimport {stopDownload} from \"../common/js/downloadAudio.js\";\nimport { showToast } from \"vant\";\nimport createPizzicato from \"../common/js/Pizzicato.js\";\nlet Pizzicato;\n\nexport default {\n  name: \"ComposeView\",\n  components: {SettingDialog, ReverbDialog},\n  setup() {\n    Pizzicato = createPizzicato(new (window.AudioContext || window.webkitAudioContext)());\n    console.log(\"compose.......\")\n    // 不把store写在这,初始化的好多值就报错\n    const store = useStore();\n    const rbDlg = ref(null);\n    return { store, util, rbDlg };\n  },\n  data() {\n    return {\n      audioContext: null,\n      offlineAudioCtx: null,\n      musicName: \"\",\n      // 音频总时长\n      audioDuration: 0,\n      // 当前播放时间\n      curTime: 0,\n      // 当前歌词\n      curLrc: \"\",\n      dragging: false,\n      accompanyVal: 0,\n      playing: false,\n      orient: \"0\",\n      settingShow: false,\n      remainTime: 0,\n      imgList: [\n      ],\n      filelist: [\n      ],\n      rbSettingShow: false,\n      curReverbData: {},\n    };\n  },\n  mounted() {\n    if(!this.store.banzou) {\n      alert(\"没有找到需要编辑的音频\");\n      this.$router.replace(\"/\");\n      return;\n    }\n    \n    this.audioContext = Pizzicato.context;\n    console.log(this.audioContext)\n    this.init(this.store.banzou);\n    document.addEventListener('visibilitychange', this.setVisibilyChange);    \n  },\n  unmounted() {\n    document.removeEventListener('visibilitychange', this.setVisibilyChange); \n    if(this.rTimer) {\n      cancelAnimationFrame(this.rTimer);\n    }\n    for(let i = 0; i < this.filelist.length; i++) {\n      const item = this.filelist[i];\n      if(item.delayPlayTimer) {\n        clearTimeout(item.delayPlayTimer);\n        item.delayPlayTimer = null;\n      }\n      item.voiceSource.disconnect();\n      item.voiceSource.buffer = null;       \n    }\n    this.fileList = [];\n    try {\n      this.bgSource.disconnect();\n      this.bgSource.buffer = null;\n    }catch(e){}\n\n    try {\n      this.audioContext.close();\n    }catch(e){\n      console.log(e);\n    }\n    try {\n      if(this.offlineAudioCtx) {\n        if(this.offlineAudioCtx.state == \"running\") {\n          this.offlineAudioCtx.suspend(this.offlineAudioCtx.currentTime);\n        }\n        this.offlineAudioCtx = null;\n      }\n    }catch(e){\n      console.log(e);\n    }\n    console.log(\"hide loading\")\n    this.store.hideLoading();\n    this.store.hideProgess();\n    stopDownload();\n    renderProgress.stop();\n    Pizzicato = null;\n  },\n  watch: {\n    // 监视全局伴奏音量变化\n    \"store.banzouVolume\": {\n      handler() {\n        if (this.audioContext) {\n          this.accompanyVal = parseInt(this.store.banzouVolume * 100);\n          this.bgGain.gain.value = this.store.banzouVolume;          \n        }\n      },\n    },\n  },\n  methods: {\n    setVisibilyChange() {\n      if (document.visibilityState === 'visible') {\n        try {\n          this.audioContext.suspend();\n        }\n        catch(e){}\n      }\n      else if (document.visibilityState === 'hidden') {\n        this.doStop();\n      }\n    },\n    onReverbSetting(item, index){\n      this.rbDlg.show({        \n        time: item.reverbNode.time, \n        decay: item.reverbNode.decay, \n        mix: item.reverbNode.mix\n      });\n      this.curReverbItem = item;\n    },\n    async init(accompanimentBlob) {\n      this.musicName = this.store.banzou.name.replace(/\\.mp3$/i, \"\");\n      this.store.showLoading();\n      // 1. 加载伴奏音频\n      const accompanimentBuffer = await this.loadAudioData(this.audioContext,accompanimentBlob);\n      const recordDuration = accompanimentBuffer.duration;\n      this.audioDuration = recordDuration;\n      // 2. 创建合成音频缓冲区，长度为设定的伴奏总时长\n      const sampleRate = this.audioContext.sampleRate;\n      const totalLength = recordDuration * sampleRate;\n\n      const bgBuffer = this.audioContext.createBuffer(2, totalLength, sampleRate); // 双声道\n\n      // 3. 插入伴奏到合成缓冲区\n      bgBuffer.getChannelData(0).set(accompanimentBuffer.getChannelData(0).subarray(0, totalLength));\n      let n = 0;\n      if(accompanimentBuffer.numberOfChannels > 1){\n        n = 1;\n      }      \n      bgBuffer.getChannelData(1).set(accompanimentBuffer.getChannelData(n).subarray(0, totalLength));\n      \n      const bgSource = this.audioContext.createBufferSource();\n      bgSource.buffer = bgBuffer;\n\n      this.bgGain = this.audioContext.createGain();\n      this.accompanyVal = parseInt(this.store.banzouVolume * 100);\n      this.bgGain.gain.value = this.store.banzouVolume;\n      // this.accompanyVal = Math.round(this.bgGain.gain.value * 100);\n      bgSource.connect(this.bgGain);  \n      Tone.setContext(this.audioContext);\n      var pitchShift = new Tone.PitchShift();\n      pitchShift.pitch = this.store.banzouPitch;  \n      Tone.connect(this.bgGain, pitchShift);    \n      // this.bgGain.connect(this.audioContext.destination);\n      Tone.connect(pitchShift, this.audioContext.destination);\n\n     \n      this.bgSource = bgSource;\n\n      this.remainTime = this.audioContext.currentTime;\n      \n      //this.setCurTime();\n      if(this.store.lrc) {\n        await this.store.readLrcText()\n      }\n\n      // 同时播放\n      this.audioContext.suspend();\n      bgSource.start(); \n      this.store.hideLoading();\n      // voiceSource.start();\n    },  \n    loadAudioData(audioContext, blob) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          audioContext\n            .decodeAudioData(reader.result)\n            .then((audioBuffer) => resolve(audioBuffer))\n            .catch((err) => reject(err));\n        };\n        reader.onerror = () => reject(reader.error);\n        reader.readAsArrayBuffer(blob);\n      });\n    }, \n    setCurTime() {\n      let n = this.audioContext.currentTime - this.remainTime;\n      if(n >= this.audioDuration){\n        this.doStop(true);\n        return;\n      }\n      if(!this.dragging) {\n        this.curTime = n;\n      }\n      this.onTimeUpdate();\n      //console.log(\"curTime-> \", this.curTime,  this.store.banzouLength);\n      this.rTimer = requestAnimationFrame(this.setCurTime);\n    },    \n    onAccompanyVoiceChange(n) {\n      if (this.bgGain) {\n        this.bgGain.gain.value = n / 100;\n        this.store.banzouVolume = n / 100;\n      }\n    },    \n    doStop(goStart) {\n      console.log(this.audioContext.state)\n      this.playing = false;\n      if(this.audioContext.state == \"running\") {\n        this.audioContext.suspend();\n        if(goStart) {\n          this.curTime = 0;\n          this.rTimer = null;\n          this.remainTime = this.audioContext.currentTime;\n        }\n        // this.bgSource.stop();\n        // this.voiceSource.stop();\n      }\n    },   \n    jumpTo(n) {\n      try {\n        this.bgSource.stop();\n      }catch(e){\n      }\n      const newBgSource = this.audioContext.createBufferSource();\n      newBgSource.buffer = this.bgSource.buffer;  \n      this.bgSource.disconnect();\n      this.bgSource.buffer = null;\n      newBgSource.connect(this.bgGain);  \n      this.bgSource = newBgSource;\n      this.bgSource.start(0, n);\n\n      for(let index = 0; index < this.filelist.length; index++) {\n        let item = this.filelist[index];\n        try{\n          item.voiceSource.stop();\n        }catch(e){}\n        const newVoiceSource = this.audioContext.createBufferSource();\n        //console.log(item)\n        console.log(item.voiceSource)\n        newVoiceSource.buffer = item.voiceSource.buffer;  \n        item.voiceSource.disconnect(); \n        item.voiceSource.buffer = null;\n        newVoiceSource.connect(item.gainNode);  \n        item.voiceSource = newVoiceSource;\n        //newVoiceSource.start();\n        this.startVoiceSource(n, item);        \n      }\n      // console.log(\"jumpTo-> \", n\n      // this.voiceSource.stop();\n      // const newVoiceSource = this.audioContext.createBufferSource();\n      // newVoiceSource.buffer = this.voiceSource.buffer;  \n      // this.voiceSource.disconnect();\n      // newVoiceSource.connect(this.voiceGain);  \n      // this.voiceSource = newVoiceSource;\n      // //newVoiceSource.start();\n      // this.startVoiceSource(n);\n    },    \n\n    // 人声播放\n    startVoiceSource(n = 0, item) {\n\n      if(item.delayPlayTimer){\n        clearTimeout(item.delayPlayTimer);\n        item.delayPlayTimer = null;\n      }\n      //  第一个参数很坑, source.start(迟延几秒播放, 从第几秒开始); 结果第一个参数总不准 所以我就只设置成0 然后用setTimeout来延迟\n      let offsetTime = 0;\n      offsetTime = n + item.delay;\n      if(offsetTime >= 0) {\n        item.voiceSource.start(0, offsetTime);\n      }\n      else {\n        let n = offsetTime * -1000;\n        offsetTime = 0;\n        item.delayPlayTimer = setTimeout(()=>{\n          item.voiceSource.start(0, offsetTime);\n        }, n)        \n      }\n\n      // let delayTime = 0;\n      // let offsetTime = 0;\n      // // 人声调快\n      // if(item.delay < 0) {\n      //   delayTime = item.delay * -1; //人声调慢\n      // }\n      // // 如果开始就有人声 会把调快的0.x秒那部分弄没了 一般不会马上就有人声\n      // else if(item.delay > 0) {\n      //   offsetTime = n + item.delay; // 人声调快\n      // }\n      // console.log(\"------\", delayTime, offsetTime)\n      // item.voiceSource.start(delayTime, offsetTime);\n    },\n    onPlay() {\n      this.doPlay();\n    },\n    doPlay() {\n      console.log(this.audioContext.state)\n      if(this.audioContext.state != \"running\") {\n        this.playing = true;\n        this.audioContext.resume();\n        if(!this.rTimer) {\n          this.setCurTime();\n          this.jumpTo(0)\n        }\n        //不加这个 新加的音频会播放不出来\n        else {\n          this.jumpTo(this.curTime);\n        }\n        // this.bgSource.start(n);\n        // this.voiceSource.start(n);\n      }\n    },    \n    onPause() {\n      this.doStop();\n    },\n    onBack() {\n      this.$router.replace(\"/\");\n    },    \n    // 循环中的ref 需要这样设置 this.$refs[\"voice\"+index] 即可访问\n    setItemRef(el, index){\n      return `voice${index}`;\n    },\n    onTimeUpdate() {\n      if(!this.store.parsedLyrics || !this.store.parsedLyrics.length) {\n        return;\n      }\n      const currentTime = this.curTime;\n      // 查找当前播放时间对应的歌词行\n      for (let i = 0; i < this.store.parsedLyrics.length; i++) {\n        if (\n          currentTime >= this.store.parsedLyrics[i].time &&\n          (i === this.store.parsedLyrics.length - 1 ||\n            currentTime < this.store.parsedLyrics[i + 1].time)\n        ) {\n          this.curLrc = this.store.parsedLyrics[i].text; // 自动滚动到当前歌词行\n          break;\n        }\n      }\n    },\n\n    //---------这个是想生成电子相册,后来发现有现成的软件可以实现,就不自己写了--------------\n    getBg(item){\n      let url = `background-image: url(${item.url}); background-repeat: no-repeat; background-position: center;`\n      return url;\n    },\n    onImgFileSelect() {\n      if(this.imgList.length >= 10){\n        alert(\"最多添加10张图片\");\n        return;\n      }\n\n      const fileList = this.$refs.imgFile.files;\n      for(let file of fileList) {\n        // 判断文件类型 只能是jpg和png格式\n        console.log(file.type);\n        if (file.type !== \"image/png\" && file.type !== \"image/jpeg\") {\n          alert(\"只能添加图片文件 -> \" + file.name);\n          continue;\n        }\n        // 判断文件大小 不能大于5M\n        if (file.size > 5 * 1024 * 1024) {\n          alert(\"图片大小不能超过5M -> \" + file.name);\n          continue;\n        }\n        let url = URL.createObjectURL(file);\n        this.imgList.push({ url: url });\n      }\n      this.$refs.imgFile.value = \"\";\n    },\n    onImgAdd(){\n      this.$refs.imgFile.click();\n    },\n    onRemoveImg(item, index) {\n      this.imgList.splice(index, 1);\n    },\n    //----------------------\n    isSurpportFile(file) {\n      const regex = /\\.(mp3|wav)$/i; // 匹配以.mp3 .wav结尾的字符串，忽略大小写\n      return regex.test(file.name);\n    },\n    async onAudioFileSelect(){\n      this.store.showLoading();\n      const file = this.$refs.audioFile.files[0];\n      // console.log(file);\n      if (!this.isSurpportFile(file)) {\n        showToast(\"目前只支持 wav, mp3 格式\");\n        this.store.hideLoading();\n        return;\n      }\n      this.doStop();\n      let o = {\n        reverb: false,\n        reverbNode: new Pizzicato.Effects.Reverb({\n          ...this.store.reverbOption\n        }),\n        volume: 100,\n        delay: 0,\n        file: file,\n        //rMap: {},\n        gainNode: null\n      };\n      this.filelist.push(o);\n      await this.addVoice(o);\n      this.$refs.audioFile.value = \"\";\n      this.store.hideLoading();\n    },\n    onAudioAdd() {\n      this.$refs.audioFile.click();\n    },\n    async addVoice(o) {\n      const audBuffer = await this.loadAudioData(this.audioContext, o.file);\n      let duration = audBuffer.duration;\n      if(this.audioDuration < duration) {\n        duration = this.audioDuration;\n      }\n      // 2. 创建合成音频缓冲区，长度为设定的伴奏总时长\n      const sampleRate = this.audioContext.sampleRate;\n      const totalLength = duration * sampleRate;\n\n      const voiceBuffer = this.audioContext.createBuffer(2, totalLength, sampleRate); // 双声道\n\n      // 3. 插入伴奏到合成缓冲区\n      voiceBuffer.getChannelData(0).set(audBuffer.getChannelData(0).subarray(0, totalLength));\n      let n = 0;\n      if(audBuffer.numberOfChannels > 1){\n        n = 1;\n      }      \n      voiceBuffer.getChannelData(1).set(audBuffer.getChannelData(n).subarray(0, totalLength));\n\n      const voiceSource = this.audioContext.createBufferSource();\n      voiceSource.buffer = voiceBuffer;\n      o.voiceSource = voiceSource;\n      let voiceGain = this.audioContext.createGain();\n      voiceGain.gain.value = 1;  \n      o.gainNode = voiceGain;\n\n      voiceSource.connect(voiceGain);       \n      // voiceSource.start();\n      // let nObj = await util.connectReverbNode(voiceGain, o.reverb, this.audioContext);\n      //let nObj = await util.connectReverbNode(voiceGain, this.store.reverbOption, this.audioContext);\n      //let node = nObj.outputNode;\n      //this.reverbNodes = nObj.reverbNodes;   \n      //o.disconnect = nObj.disconnectReverb;\n      voiceGain.connect(this.audioContext.destination);\n    },\n\n    // 卷积合成混响使用 目前用不上了\n    async getReverb(num) {\n      this.store.showLoading();\n      const audioUrl = 'audio/reverb' + num + '.wav';\n      \n      try {\n        const response = await fetch(audioUrl);\n        if (!response.ok) {\n          throw new Error('Network response was not ok ' + response.statusText);\n        }\n        \n        const arrayBuffer = await response.arrayBuffer();\n        \n        // 解码为 AudioBuffer\n        const audioBuffer = await this.audioContext.decodeAudioData(arrayBuffer);\n        \n        console.log(audioBuffer); // 检查是否成功加载 AudioBuffer\n        this.store.hideLoading();\n        return audioBuffer; // 返回解码后的 AudioBuffer\n      } catch (error) {\n        console.error('There has been a problem with your fetch operation:', error);\n        this.store.hideLoading();\n        return null;\n      }\n    },     \n\n    // 是否开启混响设置 之前是可以设置多个混响方案,现在会有一个开关, 然后有设置按钮可以设置具体参数,不再预设方案\n    async onReverbChange(b, item, index) {\n  \n      if(b) {\n        item.gainNode.disconnect();\n        item.gainNode.connect(item.reverbNode);\n        item.reverbNode.connect(this.audioContext.destination)\n      }\n      else {\n        item.gainNode.disconnect();\n        item.reverbNode.disconnect();\n        item.gainNode.connect(this.audioContext.destination);\n      }\n    },\n\n    // 混响参数调整\n    onReverbDetailChange(opt){\n      if(!this.curReverbItem) {\n        return;\n      }\n      this.curReverbItem.reverbNode.time = opt.time;\n      this.curReverbItem.reverbNode.decay = opt.decay;\n      this.curReverbItem.reverbNode.mix = opt.mix;\n    },    \n    onVolumeChange(item, index) {\n      console.log(item, index);\n      item.gainNode.gain.value = item.volume / 100;\n    },\n    onDelayChange(item, index) {\n      this.jumpTo(this.curTime);\n    },\n    onSetting() {\n      this.settingShow = true;\n    },\n    onDurationChange(n) {\n      this.remainTime = this.audioContext.currentTime - n;\n      this.jumpTo(n);\n    },\n    onOrientChange(item, index) {\n      console.log(item, index);\n    },\n    onVoiceRemove(item, index) {\n      this.doStop();\n      item.voiceSource.disconnect();\n      item.gainNode.disconnect();\n      if(item.disconnectReverb) {\n        item.disconnectReverb();\n        item.disconnectReverb = null;\n      }\n      // if(item.reverbNode) {\n      //   item.reverbNode.disconnect();\n      // }\n      this.filelist.splice(index, 1);\n    },\n    compose() {\n      if(!this.filelist.length){\n        showToast(\"请添加人声音频\");\n        return;\n      }\n      this.doStop();\n      this.exportAudio(this.store.compress);\n    },    \n    async exportAudio(compress){\n        // 创建 OfflineAudioContext\n        let length = this.audioDuration; \n        let audioCtx = new OfflineAudioContext({\n            numberOfChannels: 2,\n            length: 48000 * length,\n            sampleRate: 48000,\n        });\n        let Pizzicato = createPizzicato(audioCtx);\n        this.offlineAudioCtx = audioCtx;\n        let bufferSource;\n        // 将音频数据加载到 bufferSource\n        bufferSource = audioCtx.createBufferSource();\n        bufferSource.buffer = this.bgSource.buffer;\n    \n        // 创建 GainNode\n        let gainNode = audioCtx.createGain();\n        gainNode.gain.value = this.store.banzouVolume;\n    \n        // 设置 Tone.js 的上下文为 OfflineAudioContext\n        Tone.setContext(audioCtx);\n    \n        // 创建 Tone.PitchShift 并连接\n        let pitchShift = new Tone.PitchShift();\n        pitchShift.pitch = this.store.banzouPitch;  \n        // 连接音频节点\n        bufferSource.connect(gainNode);\n        Tone.connect(gainNode, pitchShift);\n        Tone.connect(pitchShift, audioCtx.destination);\n\n        let vList = [];\n        //循环filelist\n        for(let i = 0; i < this.filelist.length; i++) {\n          const item = this.filelist[i];\n          // 人声 \n          let voiceBufferSource = audioCtx.createBufferSource();\n          voiceBufferSource.buffer = item.voiceSource.buffer;\n\n          let voiceGain = audioCtx.createGain();   \n          let rItem = {\n            reverb: item.reverb,\n            reverbNode: new Pizzicato.Effects.Reverb({\n              time: item.reverbNode.time,\n              decay: item.reverbNode.decay,\n              mix: item.reverbNode.mix\n            }),\n            // item.reverbNode,\n            //rMap: {},\n            gainNode: voiceGain,\n            //reverbNode: null,\n            voiceSource: voiceBufferSource,\n            delay: item.delay,\n            volume: item.volume,\n          }\n          console.log(rItem);\n          voiceGain.gain.value = rItem.volume / 100;\n          voiceBufferSource.connect(voiceGain);\n          if(rItem.reverb) {\n            voiceGain.connect(rItem.reverbNode);\n            rItem.reverbNode.connect(audioCtx.destination);\n          }\n          else {\n            voiceGain.connect(audioCtx.destination);\n          }\n          //let node = await this.connectReverbNode(rItem, voiceGain, audioCtx);\n          //let nObj = await util.connectReverbNode(voiceGain, rItem.reverb, audioCtx);\n          //let node = nObj.outputNode;\n          //rItem.disconnect = nObj.disconnectReverb;          \n          //node.connect(audioCtx.destination);    \n          this.startVoiceSource(0, rItem);\n          vList.push(voiceBufferSource)\n        }\n        \n         bufferSource.start();\n\n        console.log(\"start generate\")\n        // 开始渲染 OfflineAudioContext\n        audioCtx.startRendering()\n            .then(renderedBuffer => {\n                if(!this.offlineAudioCtx){\n                  return;\n                }\n                console.log('渲染完成', renderedBuffer);\n                if(compress){\n                  showToast(\"正在压缩音频,可能要花费很长时间...\");\n                }\n                downloadAudio(renderedBuffer, audioCtx.length, compress, (progress)=>{\n                  // console.log(\"progress-mp3\", progress);\n                  if(!this.offlineAudioCtx){\n                    return;\n                  }                  \n                  this.store.showProgess(progress);\n                }, ()=>{\n                  this.store.hideProgess();\n                }); // 将渲染后的结果下载\n            })\n            .catch(err => {\n                console.error('渲染错误:', err);\n            });\n        showToast(\"正在生成音频,请稍后...\");\n        renderProgress.start(audioCtx, bufferSource.buffer.duration, (progess)=>{\n          if(!this.offlineAudioCtx) {\n            return;\n          }\n          console.log(\"progess\", progess);\n          this.store.showProgess(progess);\n        }, ()=>{\n          this.store.hideProgess();\n          if(!onlyVoice) {\n            bufferSource.disconnect();\n            bufferSource.buffer = null;\n          }\n          for(let source of vList) {\n            source.disconnect();\n            source.buffer = null;\n          }\n        })\n\n        // console.log(audioCtx.currentTime);\n        // setTimeout(() => {\n        //   console.log(audioCtx.currentTime, bufferSource);\n        // }, 100);\n        \n    }     \n  },\n};\n</script>\n<style scoped>\n.c-co-item {\n  margin: 10px 14px 20px;\n  border-bottom: solid 1px #ccc;\n  position: relative;\n}\n.c-co-namebox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.c-co-volslider {\n  flex: 1;\n  margin-right: 18px;\n}\n\n.content-compose {\n  display: flex;\n  flex-direction: column;\n}\n.c-co-editbox {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  min-height: 0;\n  border-top: solid 1px #CCCCCC;\n  margin-top: 4px;\n}\n.c-co-btnbox {\n  padding: 10px 0 15px;\n  margin-top: 10px;\n  border-top: solid 1px #ccc;\n}\n.c-co-itemname {\n  font-weight: bold;\n  font-size: 16px;\n  /* 末尾省略号 */\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.c-co-remove {\n  position: absolute;\n  top: -10px;\n  right: -10px;\n  color: #ff0000;\n  font-size: 28px;\n  cursor: pointer;\n  /* box-shadow:inset 0px 0px 5px #ff0000; */\n  border-radius: 50%;\n}\n.c-co-volslider-delay :deep(.van-slider__button) {\n  background-color: rgb(29, 150, 96) !important;\n}\n.c-co-volslider-delay :deep(.van-slider__bar){\n  background-color: rgb(29, 150, 96) !important;\n}\n/* .c-co-reverbbox .van-radio-group.van-radio-group--horizontal{\n  flex-wrap: nowrap;\n} */\n.c-co-reverbbox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: end;\n  padding: 10px 0;\n}\n.c-co-imgbox {\n  padding: 5px 12px 0;\n  border-top: solid 1px #ccc;\n  border-bottom: solid 1px #ccc;\n}\n.c-co-imgtitle {\n  display: flex;\n  justify-content: space-between;\n  padding: 6px 0;\n}\n.c-co-imglist {\n  padding-top: 2px;\n  white-space: nowrap;\n  overflow-x: auto;\n  text-align: left;\n}\n.c-co-imgitem {\n  display: inline-block;\n  margin: 8px 15px;\n  width: 60px;\n  height: 40px;\n  border: solid 1px #ccc;\n  border-radius: 3px;\n  position: relative;\n  background-size: cover;\n}\n.c-co-imglist.portrait .c-co-imgitem {\n  width: 40px;\n  height: 60px; \n}\n.c-co-imgrev {\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  color: #ed1919;\n  font-size: 26px;\n  cursor: pointer;\n  box-shadow:inset 0px 0px 5px #e85454;\n  border-radius: 50%;  \n}\n.c-co-innerbox {\n  flex: 1;\n  text-align: center;\n  position: relative;\n}\n\n.c-e-btn-r{\n  position:absolute;\n  right: 10px;\n  top: 0px;\n}\n\n.c-co-voicebox {\n  margin-bottom: 10px;\n  padding: 8px 16px;\n}\n</style>\n","import { render } from \"./ComposeView.vue?vue&type=template&id=ad3f3eb2&scoped=true\"\nimport script from \"./ComposeView.vue?vue&type=script&lang=js\"\nexport * from \"./ComposeView.vue?vue&type=script&lang=js\"\n\nimport \"./ComposeView.vue?vue&type=style&index=0&id=ad3f3eb2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ad3f3eb2\"]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from \"vue-router\";\nimport HomeView from \"../views/HomeView.vue\";\nimport EditView from \"../views/EditView.vue\";\nimport RecordView from \"../views/RecordView.vue\";\nimport ComposeView from \"../views/ComposeView.vue\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"home\",\n    component: HomeView,\n  },\n  {\n    path: \"/record\",\n    name: \"record\",\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: RecordView,\n  },\n  {\n    path: \"/edit\",\n    name: \"edit\",\n    component: EditView,\n  },\n  {\n    path: \"/compose\",\n    name: \"compose\",\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: ComposeView,\n  },\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\nexport default router;\n","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport \"./common/js/flexible.js\";\nimport \"./common/js/touchEmulate.js\";\nimport router from \"./router\";\nimport \"vant/lib/index.css\";\nimport { createPinia } from \"pinia\";\n// 持久化组件\nimport piniaPluginPersistedstate from \"pinia-plugin-persistedstate\";\nconst pinia = createPinia();\npinia.use(piniaPluginPersistedstate);\n\nimport Vant from \"vant\";\n\n// Lazyload 指令需要单独进行注册\n// app.use(vant.Lazyload);\n\nconst app = createApp(App);\napp.use(Vant);\napp.use(router);\napp.use(pinia);\n\napp.mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkallsing\"] = self[\"webpackChunkallsing\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(5830); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["window","document","exportName","undefined","multiTouchStartPos","eventTarget","isMultiTouch","touchElements","Touch","target","identifier","pos","deltaX","deltaY","this","clientX","clientY","screenX","screenY","pageX","pageY","TouchList","touchList","item","index","identifiedTouch","id","fakeTouchSupport","objs","documentElement","props","o","length","p","hasTouchSupport","Modernizr","touch","navigator","msMaxTouchPoints","maxTouchPoints","preventMouseEvents","ev","preventDefault","stopPropagation","onMouse","touchType","TouchEmulator","ignoreTags","indexOf","tagName","which","type","dispatchEvent","composedPath","shiftKey","triggerTouch","eventName","mouseEv","touchEvent","createEvent","initEvent","altKey","ctrlKey","metaKey","touches","getActiveTouches","targetTouches","changedTouches","getChangedTouches","createTouchList","f","multiTouchOffset","push","splice","showTouches","i","el","styles","prop","createElement","body","appendChild","template","style","parentNode","removeChild","addEventListener","createTouch","view","pageXOffset","pageYOffset","arguments","size","transform","position","left","top","background","border","opacity","borderRadius","height","width","padding","margin","display","overflow","pointerEvents","webkitUserSelect","mozUserSelect","userSelect","webkitTransform","mozTransform","zIndex","define","amd","module","exports","supportTouch","class","_createElementBlock","_Fragment","_createVNode","_component_router_view","_component_van_overlay","show","$setup","store","loading","default","_withCtx","_createElementVNode","onClick","_cache","_withModifiers","_component_van_loading","_","rendering","_hoisted_1","_component_van_progress","color","percentage","renderingProgess","useStore","defineStore","state","counter","banzou","lrcEncoding","lrc","lrcText","parsedLyrics","lrcDelayTime","banzouLength","recordLength","banzouVolume","humanVolume","banzouPitch","audioChunk","reverb","voiceDelay","compress","alertDialog","text","reverbOption","time","decay","mix","reverbOption_default","actions","parseLRC","lrcContent","console","log","lines","split","timeExp","lyricsList","forEach","line","match","exec","minutes","parseInt","seconds","milliseconds","timeInSeconds","lyricText","replace","trim","value","readLrcText","readText","then","txt","Promise","rs","fr","FileReader","onload","e","result","readAsText","increment","showLoading","hideLoading","showProgess","n","hideProgess","setTimeout","showAlert","hideAlert","persist","paths","name","components","Loading","Overlay","setup","mounted","methods","noSleep","NoSleep","enableNoSleep","enable","removeEventListener","__exports__","render","util","getTime","date","formatNumber","toString","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","join","addDays","days","addTimes","addHours","hours","addMinutes","addSeconds","secs","s","m","h","mt","premt","dt","formatTime","obj","arg","fixNum","num","to12Hour","hour24","hour12","getQueryString","queryStringName","returnValue","URLString","location","href","serachLocation","queryStringLength","charAt","substr","seperatorLocation","substring","isMobile","flag","userAgent","HTMLDecode","temp","innerHTML","output","textContent","replaceTag","str","fixRem","w","devicePixelRatio","px2rem","lib","flexible","parseFloat","base64decode","y","z","c","b","base64Chars","bc","bs","Number","slice","hb","j","Math","floor","ha","decodeURIComponent","getListSearchOption","sDate","eDate","count","screen","starttime","endtime","pagesize","downloadFile","res","blob","Blob","data","downloadElement","URL","createObjectURL","download","click","revokeObjectURL","resetObject","Object","keys","k","prototype","call","convertTime","round","connectReverbNode","node","reverbSetting","audioContext","outputNode","reverbNodes","disconnectReverb","settings","dryGainNode","createGain","gain","dryGain","wetGainNode","wetGain","preDelayNode","createDelay","delayTime","preDelayTime","highCutFilter","createBiquadFilter","frequency","highCutFrequency","leftChannelGain","rightChannelGain","delayNodeLeft","delayTimes","feedbackGainLeft","feedbackGains","connect","delayNodeRight","feedbackGainRight","merger","createChannelMerger","disconnect","win","tid","doc","docEl","metaEl","querySelector","flexibleEl","dpr","scale","warn","getAttribute","content","initialDpr","maximumDpr","toFixed","appVersion","isIPhone","setAttribute","firstElementChild","wrap","write","refreshRem","getBoundingClientRect","uitl","classList","add","rem","fontSize","clearTimeout","persisted","readyState","rem2px","d","val","_component_van_nav_bar","title","onClickLeft","$event","$options","showAbout","_hoisted_2","_hoisted_3","_hoisted_4","ref","onChange","args","onBanzouFileChange","_component_van_icon","onAddBanzou","src","$data","banzouImg","_hoisted_5","onRevBanzou","_toDisplayString","_hoisted_6","_hoisted_7","onLrcFileChange","onAddLrc","lrcImg","_hoisted_8","onRevLrc","_component_van_button","onStartRec","_createTextVNode","plain","onstartCompose","require","test1","$refs","showDialog","message","showConfirmButton","onClickRight","$router","isSurpportFile","file","regex","test","isLrcFile","showToast","files","onBack","musicName","onPause","playing","onPlay","curTime","_component_van_slider","modelValue","min","max","onDurationChange","onDragStart","dragging","onDragEnd","_hoisted_9","curLrc","_hoisted_10","_hoisted_11","_hoisted_12","humanVal","_hoisted_13","onHumanVoiceChange","_hoisted_14","_hoisted_15","accompanyVal","_hoisted_16","onAccompanyVoiceChange","_hoisted_17","_hoisted_18","_hoisted_19","step","onDelayChange","_hoisted_20","_hoisted_21","_hoisted_22","onReverbSetting","_component_van_switch","onReverbChange","_hoisted_23","_hoisted_24","_hoisted_25","reRecord","exportHuman","exportSong","_component_ReverbDialog","onReverbDetailChange","renderProgress","timer","start","total","onProgess","finish","setInterval","currentTime","stop","clearInterval","working","async","downloadAudio","abuffer","len","onProgress","onFinish","audio","bufferToWave","new_file","fileName","link","stopDownload","sample","numOfChan","numberOfChannels","buffer","ArrayBuffer","DataView","channels","offset","setUint32","setUint16","sampleRate","getChannelData","setInt16","wavHdr","lamejs","WavHeader","readHeader","wavSamples","Int16Array","dataOffset","dataLen","wavToMp3","samples","mp3enc","Mp3Encoder","remaining","samplesPerFrame","mono","subarray","filter","element","array","right","mp3buf","encodeMp3","Int8Array","flush","timeEnd","mp3Blob","rj","r","encodeBuffer","_createBlock","_component_van_dialog","isVisible","onClose","onCloseDialog","_component_van_cell","option","onTimeChange","onDecayChange","onMixChange","onReset","emits","emit","opt","$emit","createPizzicato","ctx","Pizzicato","Pz","context","masterGainNode","destination","Util","isString","isObject","isFunction","isNumber","isArray","isInRange","isBool","isOscillator","audioNode","isAudioBufferSourceNode","isSound","sound","Sound","isEffect","effect","key","Effects","normalize","ceil","getDryLevel","getWetLevel","gainNode","getPrototypeOf","inputNode","apply","defineProperty","enumerable","get","set","volume","error","Events","on","callback","_events","_event","handler","trigger","off","description","self","descriptionError","getDescriptionError","hasOptions","options","defaultAttack","defaultRelease","Error","supportedSources","source","path","audioFunction","initializeWithWave","waveOptions","getRawSourceNode","sourceNode","createOscillator","gainSuccessor","initializeWithUrl","request","XMLHttpRequest","open","responseType","progressEvent","decodeAudioData","response","createBufferSource","loop","bind","shift","onreadystatechange","event","status","statusText","send","initializeWithInput","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","handleStream","stream","createMediaStreamSource","handleError","catch","initializeWithFunction","bufferSize","createScriptProcessor","onaudioprocess","initializeWithSoundObject","detached","masterVolume","fadeNode","lastTimePlayed","effects","effectConnectors","paused","attack","release","sustain","create","play","when","offsetTime","getSourceNode","applyAttack","stopWithRelease","pause","elapsedTime","clone","addEffect","onEnded","previousNode","removeEffect","shouldResumePlaying","targetNode","effectConnector","connectEffects","connectors","isLastEffect","destinationNode","previousSourceNode","setValueAtTime","linearRampToValueAtTime","getInputNode","onended","cancelScheduledValues","isFirefox","toLowerCase","remainingAttackTime","setTargetAtTime","stopSound","remainingReleaseTime","Group","sounds","mergeGainNode","addSound","removeSound","baseEffect","Filter","defaults","peak","filterNode","Delay","feedback","feedbackGainNode","delayNode","Compressor","threshold","knee","ratio","compressorNode","createDynamicsCompressor","getCurrentGainReduction","reduction","LowPassFilter","HighPassFilter","filterPrototype","Q","buildImpulse","impulse","createBuffer","impulseL","impulseR","reverse","random","pow","reverbNode","createConvolver","Distortion","waveShaperNode","createWaveShaper","adjustGain","writable","configurable","x","n_samples","curve","Float32Array","deg","PI","abs","Flanger","speed","depth","inputFeedbackNode","oscillatorNode","feedbackNode","enumberable","StereoPanner","pan","createStereoPanner","pannerNode","createPanner","isStereoPannerNode","setPosition","Convolver","convolverNode","audioData","PingPongDelay","channelMerger","Reverb","Tremolo","tremoloGainNode","lfoNode","shaperNode","DubDelay","cutoff","bqFilterNode","RingModulator","distortion","vIn","vInGain","vInInverter1","vInInverter2","vInDiode1","DiodeNode","vInDiode2","vInInverter3","vcInverter1","vcDiode3","vcDiode4","outGain","compressor","context_","vb","vl","setCurve","getDistortionCurve","setDistortion","v","wsCurve","_i","_ref","retVal","diodeNodes","l","Quadrafuzz","lowGain","midLowGain","midHighGain","highGain","lowpassLeft","bandpass1Left","bandpass2Left","highpassLeft","overdrives","filters","ReverbDialog","AudioContext","webkitAudioContext","rbDlg","remainTime","reverbMap","curReverbConvolver","offlineAudioCtx","bgGain","voiceGain","bgSource","voiceSource","rTimer","delayPlayTimer","setVisibilyChange","alert","init","unmounted","cancelAnimationFrame","close","suspend","visibilityState","doStop","showConfirmDialog","getReverb","audioUrl","fetch","ok","arrayBuffer","audioBuffer","curReverbNode","doPlay","jumpTo","exportAudio","recordedSegments","accompanimentBlob","recordDuration","accompanimentBuffer","loadAudioData","totalLength","bgBuffer","Tone","setContext","pitchShift","PitchShift","pitch","segment","preSeg","end","silentBuffer","createSilentAudio","voiceBuffer","startSample","endSample","onstatechange","setCurTime","startVoiceSource","goStart","newBgSource","newVoiceSource","resume","setCurLrc","requestAnimationFrame","audioCtx","duration","frameCount","resolve","reject","reader","err","onerror","readAsArrayBuffer","onlyVoice","bufferSource","OfflineAudioContext","voiceBufferSource","startRendering","renderedBuffer","progress","progess","onSetting","onTimeupdate","onTimeUpdate","onLoadedmetadata","onLoadedMetadata","_component_van_picker","onTouchstart","onTouchStart","onTouchend","onTouchEnd","_normalizeClass","getCurClass","columns","curVal","readonly","countingdown","_renderList","dotCount","onReplay","jumpToSing","jumpShow","_component_van_action_sheet","fShow","fShowList","onSelect","onFshowSelect","onCancel","onFshowCancel","_component_SettingDialog","visible","settingShow","onlrcDelayChange","_component_van_radio_group","direction","onLrcEncodingChange","_component_van_radio","onBanzouVolumeChange","onBanzouPitchChange","Boolean","watch","newVal","SettingDialog","needCountdown","showCountdownTime","scrolling","mediaRecorder","recordStarttime","pitchShift_banzou","gainNode_banzou","analyser","channelCount","sampleSize","echoCancellation","noiseSuppression","autoGainControl","initMediaRecorder","connectAuido","initAnalyser","setCountdownTime","loadAudio","clearTimer","createAnalyser","fftSize","cvs","waveBox","getContext","drawWaveform","bufferLength","dataArray","Uint8Array","canvas","canvasCtx","draw","getByteTimeDomainData","clearRect","lineWidth","strokeStyle","beginPath","sliceWidth","moveTo","lineTo","stroke","animationId","checkQianzouLength","selectedValues","changeTime","cdTimer","delayTimer","touchEndTimer","setMediaRecorder","ondataavailable","MediaRecorder","removeRecordedSegmentsAfter","sText","touchTime","mediaElem","createMediaElementSource","delay","countdown","valueChangeTime","fun","doReplay","isAlreadyPaused","action","audioDuration","orient","onOrientChange","imgList","_normalizeStyle","getBg","onRemoveImg","filelist","url","ref_for","onVolumeChange","_hoisted_26","_hoisted_27","_hoisted_28","onVoiceRemove","_hoisted_29","_hoisted_30","multiple","onImgFileSelect","onAudioFileSelect","onAudioAdd","compose","curReverbData","_ctx","curReverbItem","rbSettingShow","fileList","setItemRef","imgFile","onImgAdd","audioFile","addVoice","audBuffer","vList","rItem","routes","component","HomeView","RecordView","EditView","ComposeView","router","createRouter","history","createWebHashHistory","pinia","createPinia","use","piniaPluginPersistedstate","app","createApp","App","Vant","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","getter","__esModule","a","definition","g","globalThis","Function","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}