{"version":3,"file":"js/512.f5f7c711.js","mappings":"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","sources":["webpack://allsing/./src/common/js/Pizzicato.js","webpack://allsing/./src/common/js/downloadAudio.js","webpack://allsing/./src/common/js/progress.js","webpack://allsing/./src/components/ReverbDialog.vue","webpack://allsing/./src/components/ReverbDialog.vue?ed25"],"sourcesContent":["export default function createPizzicato(ctx) {\n\t'use strict';\n\n\tvar Pizzicato = {};\n\tvar Pz = Pizzicato;\n\t// var commonJS = typeof module === \"object\" && module.exports;\n\t// var amd = typeof define === \"function\" && define.amd;\n\n\t// if (commonJS)\n\t// \tmodule.exports = Pizzicato;\n\t// else if (amd)\n\t// \tdefine([], Pizzicato);\n\t// else\n\t// \troot.Pizzicato = root.Pz = Pizzicato;\n\n\t// var AudioContext = root.AudioContext || root.webkitAudioContext; \n\n\t// if (!AudioContext) {\n\t// \tconsole.error('No AudioContext found in this environment. Please ensure your window or global object contains a working AudioContext constructor function.');\n\t// \treturn;\n\t// }\n\n\tPizzicato.context = ctx;\n\n\tvar masterGainNode = Pizzicato.context.createGain();\n\tmasterGainNode.connect(Pizzicato.context.destination);\n\n\tPizzicato.Util = {\n\t\n\t\tisString: function(arg) {\n\t\t\treturn toString.call(arg) === '[object String]';\n\t\t},\n\t\n\t\tisObject: function(arg) {\n\t\t\treturn toString.call(arg) === '[object Object]';\n\t\t},\n\t\n\t\tisFunction: function(arg) {\n\t\t\treturn toString.call(arg) === '[object Function]';\n\t\t},\n\t\n\t\tisNumber: function(arg) {\n\t\t\treturn toString.call(arg) === '[object Number]' && arg === +arg;\n\t\t},\n\t\n\t\tisArray: function(arg) {\n\t\t\treturn toString.call(arg) === '[object Array]';\n\t\t},\n\t\n\t\tisInRange: function(arg, min, max) {\n\t\t\tif (!Pz.Util.isNumber(arg) || !Pz.Util.isNumber(min) || !Pz.Util.isNumber(max))\n\t\t\t\treturn false;\n\t\n\t\t\treturn arg >= min && arg <= max;\n\t\t},\n\t\n\t\tisBool: function(arg) {\n\t\t\treturn typeof(arg) === \"boolean\";\n\t\t},\n\t\n\t\tisOscillator: function(audioNode) {\n\t\t\treturn (audioNode && audioNode.toString() === \"[object OscillatorNode]\");\n\t\t},\n\t\n\t\tisAudioBufferSourceNode: function(audioNode) {\n\t\t\treturn (audioNode && audioNode.toString() === \"[object AudioBufferSourceNode]\");\n\t\t},\n\t\n\t\tisSound: function(sound) {\n\t\t\treturn sound instanceof Pz.Sound;\n\t\t},\n\t\n\t\tisEffect: function(effect) {\n\t\t\tfor (var key in Pizzicato.Effects)\n\t\t\t\tif (effect instanceof Pizzicato.Effects[key])\n\t\t\t\t\treturn true;\n\t\n\t\t\treturn false;\n\t\t},\n\t\n\t\t// Takes a number from 0 to 1 and normalizes it to fit within range floor to ceiling\n\t\tnormalize: function(num, floor, ceil) {\n\t\t\tif (!Pz.Util.isNumber(num) || !Pz.Util.isNumber(floor) || !Pz.Util.isNumber(ceil))\n\t\t\t\treturn;\n\t\t\t\n\t\t\treturn ((ceil - floor) * num) / 1 + floor;\n\t\t},\n\t\n\t\tgetDryLevel: function(mix) {\n\t\t\tif (!Pz.Util.isNumber(mix) || mix > 1 || mix < 0)\n\t\t\t\treturn 0;\n\t\n\t\t\tif (mix <= 0.5)\n\t\t\t\treturn 1;\n\t\n\t\t\treturn 1 - ((mix - 0.5) * 2);\n\t\t},\n\t\n\t\tgetWetLevel: function(mix) {\n\t\t\tif (!Pz.Util.isNumber(mix) || mix > 1 || mix < 0)\n\t\t\t\treturn 0;\n\t\n\t\t\tif (mix >= 0.5)\n\t\t\t\treturn 1;\n\t\n\t\t\treturn 1 - ((0.5 - mix) * 2);\n\t\t}\n\t};\n\t/* In order to allow an AudioNode to connect to a Pizzicato \n\tEffect object, we must shim its connect method */\n\tvar gainNode = Pizzicato.context.createGain();\n\tvar audioNode = Object.getPrototypeOf(Object.getPrototypeOf(gainNode));\n\tvar connect = audioNode.connect;\n\t\n\taudioNode.connect = function(node) {\n\t\t// var endpoint = Pz.Util.isEffect(node) ? node.inputNode : node;\n\t\t// connect.call(this, endpoint);\n\t\t// return node;\n\t\tvar b = Pz.Util.isEffect(node);\n\t\tif(b) {\n\t\t\tconnect.call(this, node.inputNode);\n\t\t\treturn node;\n\t\t}\n\t\telse {\n\t\t\treturn connect.apply(this, arguments);\n\t\t}\n\t};\n\n\tObject.defineProperty(Pizzicato, 'volume', {\n\t\tenumerable: true,\n\t\t\t\n\t\tget: function() {\n\t\t\treturn masterGainNode.gain.value;\n\t\t},\n\n\t\tset: function(volume) {\n\t\t\tif (Pz.Util.isInRange(volume, 0, 1) && masterGainNode)\n\t\t\t\tmasterGainNode.gain.value = volume;\n\t\t}\n\t});\n\n\tObject.defineProperty(Pizzicato, 'masterGainNode', {\n\t\tenumerable: false,\n\n\t\tget: function() {\n\t\t\treturn masterGainNode;\n\t\t},\n\n\t\tset: function(volume) {\n\t\t\tconsole.error('Can\\'t set the master gain node');\n\t\t}\n\t});\n\t\tPizzicato.Events = {\n\t\t\n\t\t\t/**\n\t\t\t * Adds an event handler that will be treated upon\n\t\t\t * the triggering of that event.\n\t\t\t */\n\t\t\ton: function(name, callback, context) {\n\t\t\t\tif (!name || !callback)\n\t\t\t\t\treturn;\n\t\t\n\t\t\t\tthis._events = this._events || {};\n\t\t\t\tvar _event = this._events[name] || (this._events[name] = []);\n\t\t\n\t\t\t\t_event.push({\n\t\t\t\t\tcallback: callback,\n\t\t\t\t\tcontext: context || this,\n\t\t\t\t\thandler: this\n\t\t\t\t});\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Triggers a particular event. If a handler\n\t\t\t * is linked to that event, the handler will be\n\t\t\t * executed.\n\t\t\t */\n\t\t\ttrigger: function(name) {\n\t\t\t\tif (!name)\n\t\t\t\t\treturn;\n\t\t\n\t\t\t\tvar _event, length, args, i;\n\t\t\n\t\t\t\tthis._events = this._events || {};\n\t\t\t\t_event = this._events[name] || (this._events[name] = []);\n\t\t\n\t\t\t\tif (!_event)\n\t\t\t\t\treturn;\n\t\t\n\t\t\t\tlength = Math.max(0, arguments.length - 1);\n\t\t\t\targs = [];\n\t\t\n\t\t\t\tfor (i = 0; i < length; i++) \n\t\t\t\t\targs[i] = arguments[i + 1];\n\t\t\n\t\t\t\tfor (i = 0; i < _event.length; i++)\n\t\t\t\t\t_event[i].callback.apply(_event[i].context, args);\t\n\t\t\t},\n\t\t\n\t\t\t/**\n\t\t\t * Removes an event handler. If no name is provided,\n\t\t\t * all handlers for this object will be removed.\n\t\t\t */\n\t\t\toff: function(name) {\n\t\t\t\tif (name)\n\t\t\t\t\tthis._events[name] = undefined;\n\t\t\n\t\t\t\telse\n\t\t\t\t\tthis._events = {};\n\t\t\t}\n\t\t\n\t\t};\n\tPizzicato.Sound = function(description, callback) {\n\t\tvar self = this;\n\t\tvar util = Pizzicato.Util;\n\t\tvar descriptionError = getDescriptionError(description);\n\t\tvar hasOptions = util.isObject(description) && util.isObject(description.options);\n\t\tvar defaultAttack = 0.04;\n\t\tvar defaultRelease = 0.04;\n\t\n\t\tif (descriptionError) {\n\t\t\tconsole.error(descriptionError);\n\t\t\tthrow new Error('Error initializing Pizzicato Sound: ' + descriptionError);\n\t\t}\n\t\n\t\tthis.detached = hasOptions && description.options.detached;\n\t\tthis.masterVolume = Pizzicato.context.createGain();\n\t\tthis.fadeNode = Pizzicato.context.createGain();\n\t\tthis.fadeNode.gain.value = 0;\n\t\n\t\tif (!this.detached)\n\t\t\tthis.masterVolume.connect(Pizzicato.masterGainNode);\n\t\n\t\tthis.lastTimePlayed = 0;\n\t\tthis.effects = [];\n\t\tthis.effectConnectors = [];\n\t\tthis.playing = this.paused = false;\n\t\tthis.loop = hasOptions && description.options.loop;\n\t\tthis.attack = hasOptions && util.isNumber(description.options.attack) ? description.options.attack : defaultAttack;\n\t\tthis.volume = hasOptions && util.isNumber(description.options.volume) ? description.options.volume : 1;\n\t\n\t\tif (hasOptions && util.isNumber(description.options.release)) {\n\t\t\tthis.release = description.options.release;\n\t\t} else if (hasOptions && util.isNumber(description.options.sustain)) {\n\t\t\tconsole.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.');\n\t\t\tthis.release = description.options.sustain;\n\t\t} else {\n\t\t\tthis.release = defaultRelease;\n\t\t}\n\t\n\t\tif (!description)\n\t\t\t(initializeWithWave.bind(this))({}, callback);\n\t\n\t\telse if (util.isString(description))\n\t\t\t(initializeWithUrl.bind(this))(description, callback);\n\t\n\t\telse if (util.isFunction(description))\n\t\t\t(initializeWithFunction.bind(this))(description, callback);\n\t\n\t\telse if (description.source === 'file')\n\t\t\t(initializeWithUrl.bind(this))(description.options.path, callback);\n\t\n\t\telse if (description.source === 'wave')\n\t\t\t(initializeWithWave.bind(this))(description.options, callback);\n\t\n\t\telse if (description.source === 'input')\n\t\t\t(initializeWithInput.bind(this))(description, callback);\n\t\n\t\telse if (description.source === 'script')\n\t\t\t(initializeWithFunction.bind(this))(description.options, callback);\n\t\n\t\telse if (description.source === 'sound')\n\t\t\t(initializeWithSoundObject.bind(this))(description.options, callback);\n\t\n\t\n\t\tfunction getDescriptionError(description) {\n\t\t\tvar supportedSources = ['wave', 'file', 'input', 'script', 'sound'];\n\t\n\t\t\tif (description && (!util.isFunction(description) && !util.isString(description) && !util.isObject(description)))\n\t\t\t\treturn 'Description type not supported. Initialize a sound using an object, a function or a string.';\n\t\n\t\t\tif (util.isObject(description)) {\n\t\n\t\t\t\tif (!util.isString(description.source) || supportedSources.indexOf(description.source) === -1)\n\t\t\t\t\treturn 'Specified source not supported. Sources can be wave, file, input or script';\n\t\n\t\t\t\tif (description.source === 'file' && (!description.options || !description.options.path))\n\t\t\t\t\treturn 'A path is needed for sounds with a file source';\n\t\n\t\t\t\tif (description.source === 'script' && (!description.options || !description.options.audioFunction))\n\t\t\t\t\treturn 'An audio function is needed for sounds with a script source';\n\t\t\t}\n\t\t}\n\t\n\t\n\t\tfunction initializeWithWave(waveOptions, callback) {\n\t\t\twaveOptions = waveOptions || {};\n\t\t\tthis.getRawSourceNode = function() {\n\t\t\t\tvar frequency = this.sourceNode ? this.sourceNode.frequency.value : waveOptions.frequency;\n\t\t\t\tvar node = Pizzicato.context.createOscillator();\n\t\t\t\tnode.type = waveOptions.type || 'sine';\n\t\t\t\tnode.frequency.value = (frequency || 440);\n\t\n\t\t\t\treturn node;\n\t\t\t};\n\t\t\tthis.sourceNode = this.getRawSourceNode();\n\t\t\tthis.sourceNode.gainSuccessor = Pz.context.createGain();\n\t\t\tthis.sourceNode.connect(this.sourceNode.gainSuccessor);\n\t\n\t\t\tif (util.isFunction(callback))\n\t\t\t\tcallback();\n\t\t}\n\t\n\t\n\t\tfunction initializeWithUrl(paths, callback) {\n\t\t\tpaths = util.isArray(paths) ? paths : [paths];\n\t\n\t\t\tvar request = new XMLHttpRequest();\n\t\t\trequest.open('GET', paths[0], true);\n\t\t\trequest.responseType = 'arraybuffer';\n\t\n\t\t\trequest.onload = function(progressEvent) {\n\t\n\t\t\t\tPizzicato.context.decodeAudioData(progressEvent.target.response, (function(buffer) {\n\t\n\t\t\t\t\tself.getRawSourceNode = function() {\n\t\t\t\t\t\tvar node = Pizzicato.context.createBufferSource();\n\t\t\t\t\t\tnode.loop = this.loop;\n\t\t\t\t\t\tnode.buffer = buffer;\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t};\n\t\t\t\t\tif (util.isFunction(callback))\n\t\t\t\t\t\tcallback();\n\t\n\t\t\t\t}).bind(self), (function(error) {\n\t\n\t\t\t\t\tconsole.error('Error decoding audio file ' + paths[0]);\n\t\n\t\t\t\t\tif (paths.length > 1) {\n\t\t\t\t\t\tpaths.shift();\n\t\t\t\t\t\tinitializeWithUrl(paths, callback);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\terror = error || new Error('Error decoding audio file ' + paths[0]);\n\t\n\t\t\t\t\tif (util.isFunction(callback))\n\t\t\t\t\t\tcallback(error);\n\t\n\t\t\t\t}).bind(self));\n\t\n\t\t\t};\n\t\t\trequest.onreadystatechange = function(event) {\n\t\n\t\t\t\tif (request.readyState === 4 && request.status !== 200) {\n\t\t\t\t\tconsole.error('Error while fetching ' + paths[0] + '. ' + request.statusText);\n\t\t\t\t}\n\t\t\t};\n\t\t\trequest.send();\n\t\t}\n\t\n\t\n\t\tfunction initializeWithInput(options, callback) {\n\t\t\tnavigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);\n\t\n\t\t\tif (!navigator.getUserMedia && !navigator.mediaDevices.getUserMedia) {\n\t\t\t\tconsole.error('Your browser does not support getUserMedia');\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar handleStream = (function(stream) {\n\t\t\t\tself.getRawSourceNode = function() {\n\t\t\t\t\treturn Pizzicato.context.createMediaStreamSource(stream);\n\t\t\t\t};\n\t\t\t\tif (util.isFunction(callback))\n\t\t\t\t\tcallback();\n\t\t\t}).bind(self);\n\t\n\t\t\tvar handleError = function(error) {\n\t\t\t\tif (util.isFunction(callback))\n\t\t\t\t\tcallback(error);\n\t\t\t};\n\t\n\t\t\tif (!!navigator.mediaDevices.getUserMedia)\n\t\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true }).then(handleStream).catch(handleError);\n\t\t\telse\n\t\t\t\tnavigator.getUserMedia({ audio: true }, handleStream, handleError);\n\t\t}\n\t\n\t\n\t\tfunction initializeWithFunction(options, callback) {\n\t\t\tvar audioFunction = util.isFunction(options) ? options : options.audioFunction;\n\t\t\tvar bufferSize = util.isObject(options) && options.bufferSize ? options.bufferSize : null;\n\t\n\t\t\tif (!bufferSize) {\n\t\t\t\ttry { // Webkit does not automatically chose the buffer size\n\t\t\t\t\tvar test = Pizzicato.context.createScriptProcessor();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tbufferSize = 2048;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tthis.getRawSourceNode = function() {\n\t\t\t\tvar node = Pizzicato.context.createScriptProcessor(bufferSize, 1, 1);\n\t\t\t\tnode.onaudioprocess = audioFunction;\n\t\t\t\treturn node;\n\t\t\t};\n\t\t}\n\t\n\t\n\t\tfunction initializeWithSoundObject(options, callback) {\n\t\t\tthis.getRawSourceNode = options.sound.getRawSourceNode;\n\t\n\t\t\tif (options.sound.sourceNode && Pz.Util.isOscillator(options.sound.sourceNode)) {\n\t\t\t\tthis.sourceNode = this.getRawSourceNode();\n\t\t\t\tthis.frequency = options.sound.frequency;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t\n\tPizzicato.Sound.prototype = Object.create(Pizzicato.Events, {\n\t\n\t\tplay: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(when, offset) {\n\t\n\t\t\t\tif (this.playing)\n\t\t\t\t\treturn;\n\t\n\t\t\t\tif (!Pz.Util.isNumber(offset))\n\t\t\t\t\toffset = this.offsetTime || 0;\n\t\n\t\t\t\tif (!Pz.Util.isNumber(when))\n\t\t\t\t\twhen = 0;\n\t\n\t\t\t\tthis.playing = true;\n\t\t\t\tthis.paused = false;\n\t\t\t\tthis.sourceNode = this.getSourceNode();\n\t\n\t\t\t\tthis.applyAttack();\n\t\n\t\t\t\tif (Pz.Util.isFunction(this.sourceNode.start)) {\n\t\t\t\t\tthis.lastTimePlayed = Pizzicato.context.currentTime - offset;\n\t\t\t\t\tthis.sourceNode.start(Pz.context.currentTime + when, offset);\n\t\t\t\t}\n\t\n\t\t\t\tthis.trigger('play');\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tstop: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tif (!this.paused && !this.playing)\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.paused = this.playing = false;\n\t\t\t\tthis.stopWithRelease();\n\t\n\t\t\t\tthis.offsetTime = 0;\n\t\t\t\tthis.trigger('stop');\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tpause: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tif (this.paused || !this.playing)\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.paused = true;\n\t\t\t\tthis.playing = false;\n\t\n\t\t\t\tthis.stopWithRelease();\n\t\n\t\t\t\tvar elapsedTime = Pz.context.currentTime - this.lastTimePlayed;\n\t\n\t\t\t\t// If we are using a buffer node - potentially in loop mode - we need to\n\t\t\t\t// know where to re-start the sound independently of the loop it is in.\n\t\t\t\tif (this.sourceNode.buffer)\n\t\t\t\t\tthis.offsetTime = elapsedTime % (this.sourceNode.buffer.length / Pz.context.sampleRate);\n\t\t\t\telse\n\t\t\t\t\tthis.offsetTime = elapsedTime;\n\t\n\t\t\t\tthis.trigger('pause');\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tclone: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tvar clone = new Pizzicato.Sound({\n\t\t\t\t\tsource: 'sound',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tloop: this.loop,\n\t\t\t\t\t\tattack: this.attack,\n\t\t\t\t\t\trelease: this.release,\n\t\t\t\t\t\tvolume: this.volume,\n\t\t\t\t\t\tsound: this\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tfor (var i = 0; i < this.effects.length; i++)\n\t\t\t\t\tclone.addEffect(this.effects[i]);\n\t\n\t\t\t\treturn clone;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tonEnded: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(node) {\n\t\t\t\treturn function() {\n\t\t\t\t\t// This function may've been called from the release\n\t\t\t\t\t// end. If in that time the Sound has been played again,\n\t\t\t\t\t// no action should be taken.\n\t\t\t\t\tif (!!this.sourceNode && this.sourceNode !== node)\n\t\t\t\t\t\treturn;\n\t\n\t\t\t\t\tif (this.playing)\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\tif (!this.paused)\n\t\t\t\t\t\tthis.trigger('end');\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Adding effects will create a graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect added. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t * \n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Sound object using the same effect.\n\t\t */\n\t\taddEffect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(effect) {\n\t\t\t\tif (!Pz.Util.isEffect(effect)) {\n\t\t\t\t\tconsole.error('The object provided is not a Pizzicato effect.');\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\tthis.effects.push(effect);\n\t\n\t\t\t\t// Connects effect in the last position\n\t\t\t\tvar previousNode = this.effectConnectors.length > 0 ? this.effectConnectors[this.effectConnectors.length - 1] : this.fadeNode;\n\t\t\t\tpreviousNode.disconnect();\n\t\t\t\tpreviousNode.connect(effect);\n\t\n\t\t\t\t// Creates connector for the newly added effect\n\t\t\t\tvar gain = Pz.context.createGain();\n\t\t\t\tthis.effectConnectors.push(gain);\n\t\t\t\teffect.connect(gain);\n\t\t\t\tgain.connect(this.masterVolume);\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * When removing effects, the graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect should be \n\t\t * conserved. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t * \n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Sound object using the same effect.\n\t\t */\n\t\tremoveEffect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(effect) {\n\t\n\t\t\t\tvar index = this.effects.indexOf(effect);\n\t\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tconsole.warn('Cannot remove effect that is not applied to this sound.');\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\tvar shouldResumePlaying = this.playing;\n\t\n\t\t\t\tif (shouldResumePlaying)\n\t\t\t\t\tthis.pause();\n\t\n\t\t\t\tvar previousNode = (index === 0) ? this.fadeNode : this.effectConnectors[index - 1];\n\t\t\t\tpreviousNode.disconnect();\n\t\n\t\t\t\t// Disconnect connector and effect\n\t\t\t\tvar effectConnector = this.effectConnectors[index];\n\t\t\t\teffectConnector.disconnect();\n\t\t\t\teffect.disconnect(effectConnector);\n\t\n\t\t\t\t// Remove connector and effect from our arrays\n\t\t\t\tthis.effectConnectors.splice(index, 1);\n\t\t\t\tthis.effects.splice(index, 1);\n\t\n\t\t\t\tvar targetNode; \n\t\t\t\tif (index > this.effects.length - 1 || this.effects.length === 0)\n\t\t\t\t\ttargetNode = this.masterVolume;\n\t\t\t\telse\n\t\t\t\t\ttargetNode = this.effects[index];\n\t\n\t\t\t\tpreviousNode.connect(targetNode);\n\t\n\t\t\t\tif (shouldResumePlaying)\n\t\t\t\t\tthis.play();\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.masterVolume.connect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tdisconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.masterVolume.disconnect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tconnectEffects: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\n\t\t\t\tvar connectors = [];\n\t\n\t\t\t\tfor (var i = 0; i < this.effects.length; i++) {\n\t\n\t\t\t\t\tvar isLastEffect = i === this.effects.length - 1;\n\t\t\t\t\tvar destinationNode = isLastEffect ? this.masterVolume : this.effects[i + 1].inputNode;\n\t\n\t\t\t\t\tconnectors[i] = Pz.context.createGain();\n\t\n\t\t\t\t\tthis.effects[i].outputNode.disconnect(this.effectConnectors[i]);\n\t\n\t\t\t\t\tthis.effects[i].outputNode.connect(destinationNode);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tvolume: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\tif (this.masterVolume)\n\t\t\t\t\treturn this.masterVolume.gain.value;\n\t\t\t},\n\t\n\t\t\tset: function(volume) {\n\t\t\t\tif (Pz.Util.isInRange(volume, 0, 1) && this.masterVolume)\n\t\t\t\t\tthis.masterVolume.gain.value = volume;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tfrequency: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\tif (this.sourceNode && Pz.Util.isOscillator(this.sourceNode)) {\n\t\t\t\t\treturn this.sourceNode.frequency.value;\n\t\t\t\t}\n\t\n\t\t\t\treturn null;\n\t\t\t},\n\t\n\t\t\tset: function(frequency) {\n\t\t\t\tif (this.sourceNode && Pz.Util.isOscillator(this.sourceNode)) {\n\t\t\t\t\tthis.sourceNode.frequency.value = frequency;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t \t * @deprecated - Use \"release\"\n\t\t */\n\t\tsustain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\tconsole.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.');\n\t\t\t\treturn this.release;\n\t\t\t},\n\t\n\t\t\tset: function(sustain){\n\t\t\t\tconsole.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.');\n\t\n\t\t\t\tif (Pz.Util.isInRange(sustain, 0, 10))\n\t\t\t\t\tthis.release = sustain;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\t/**\n\t\t * Returns the node that produces the sound. For example, an oscillator\n\t\t * if the Sound object was initialized with a wave option.\n\t\t */\n\t\tgetSourceNode: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tif (!!this.sourceNode) {\n\t\n\t\t\t\t\t// Directly disconnecting the previous source node causes a \n\t\t\t\t\t// 'click' noise, especially noticeable if the sound is played \n\t\t\t\t\t// while the release is ongoing. To address this, we fadeout the \n\t\t\t\t\t// old source node before disonnecting it.\n\t\n\t\t\t\t\tvar previousSourceNode = this.sourceNode;\n\t\t\t\t\tpreviousSourceNode.gainSuccessor.gain.setValueAtTime(previousSourceNode.gainSuccessor.gain.value, Pz.context.currentTime);\n\t\t\t\t\tpreviousSourceNode.gainSuccessor.gain.linearRampToValueAtTime(0.0001, Pz.context.currentTime + 0.2);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tpreviousSourceNode.disconnect();\n\t\t\t\t\t\tpreviousSourceNode.gainSuccessor.disconnect();\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\t\n\t\t\t\tvar sourceNode = this.getRawSourceNode();\n\t\n\t\t\t\t// A gain node will be placed after the source node to avoid\n\t\t\t\t// clicking noises (by fading out the sound)\n\t\t\t\tsourceNode.gainSuccessor = Pz.context.createGain();\n\t\t\t\tsourceNode.connect(sourceNode.gainSuccessor);\n\t\t\t\tsourceNode.gainSuccessor.connect(this.fadeNode);\n\t\t\t\tthis.fadeNode.connect(this.getInputNode());\n\t\n\t\t\t\tif (Pz.Util.isAudioBufferSourceNode(sourceNode))\n\t\t\t\t\tsourceNode.onended = this.onEnded(sourceNode).bind(this);\n\t\n\t\t\t\treturn sourceNode;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\t/**\n\t\t * Returns the first node in the graph. When there are effects,\n\t\t * the first node is the input node of the first effect.\n\t\t */\n\t\tgetInputNode: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tif (this.effects.length > 0)\n\t\t\t\t\treturn this.effects[0].inputNode;\n\t\n\t\t\t\treturn this.masterVolume;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Will take the current source node and work up the volume\n\t\t * gradually in as much time as specified in the attack property\n\t\t * of the sound.\n\t\t */\n\t\tapplyAttack: {\n\t\t\tenumerable: false,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tvar currentValue = this.fadeNode.gain.value;\n\t\t\t\tthis.fadeNode.gain.cancelScheduledValues(Pz.context.currentTime);\n\t\n\t\t\t\tif (!this.attack) {\n\t\t\t\t\tthis.fadeNode.gain.setTargetAtTime(1.0, Pz.context.currentTime, 0.001);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\t// We can't calculate the remaining attack time \n\t\t\t\t// in Firefox due to https://bugzilla.mozilla.org/show_bug.cgi?id=893020\n\t\t\t\tvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\t\t\t\tvar remainingAttackTime = this.attack;\n\t\n\t\t\t\tif (!isFirefox)\n\t\t\t\t\tremainingAttackTime = (1 - this.fadeNode.gain.value) * this.attack;\n\t\n\t\t\t\tthis.fadeNode.gain.setTargetAtTime(1.0, Pz.context.currentTime, remainingAttackTime * 2);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Will take the current source node and work down the volume\n\t\t * gradually in as much time as specified in the release property\n\t\t * of the sound before stopping the source node.\n\t\t */\n\t\tstopWithRelease: {\n\t\t\tenumerable: false,\n\t\n\t\t\tvalue: function(callback) {\n\t\n\t\t\t\tvar node = this.sourceNode;\n\t\t\t\tvar stopSound = function() {\n\t\t\t\t\treturn Pz.Util.isFunction(node.stop) ? node.stop(0) : node.disconnect();\n\t\t\t\t};\n\t\n\t\t\t\tvar currentValue = this.fadeNode.gain.value;\n\t\t\t\tthis.fadeNode.gain.cancelScheduledValues(Pz.context.currentTime);\n\t\n\t\t\t\tif (!this.release) {\n\t\t\t\t\tthis.fadeNode.gain.setTargetAtTime(0.0, Pz.context.currentTime, 0.001);\n\t\t\t\t\tstopSound();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\t// We can't calculate the remaining attack time \n\t\t\t\t// in Firefox due to https://bugzilla.mozilla.org/show_bug.cgi?id=893020\n\t\t\t\tvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\t\t\t\tvar remainingReleaseTime = this.release;\n\t\n\t\t\t\tif (!isFirefox)\n\t\t\t\t\tremainingReleaseTime = this.fadeNode.gain.value * this.release;\n\t\n\t\t\t\tthis.fadeNode.gain.setTargetAtTime(0.00001, Pz.context.currentTime, remainingReleaseTime / 5);\n\t\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tstopSound();\n\t\t\t\t}, remainingReleaseTime * 1000);\n\t\t\t}\n\t\t}\n\t});\n\t\n\tPizzicato.Group = function(sounds) {\n\t\n\t\tsounds = sounds || [];\n\t\t\n\t\tthis.mergeGainNode = Pz.context.createGain();\n\t\tthis.masterVolume = Pz.context.createGain();\n\t\tthis.sounds = [];\n\t\tthis.effects = [];\n\t\tthis.effectConnectors = [];\n\t\n\t\tthis.mergeGainNode.connect(this.masterVolume);\n\t\tthis.masterVolume.connect(Pz.masterGainNode);\n\t\n\t\tfor (var i = 0; i < sounds.length; i++)\n\t\t\tthis.addSound(sounds[i]);\n\t};\n\t\n\tPizzicato.Group.prototype = Object.create(Pz.Events, {\n\t\n\t\tconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.masterVolume.connect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tdisconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.masterVolume.disconnect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\taddSound: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(sound) {\n\t\t\t\tif (!Pz.Util.isSound(sound)) {\n\t\t\t\t\tconsole.error('You can only add Pizzicato.Sound objects');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this.sounds.indexOf(sound) > -1) {\n\t\t\t\t\tconsole.warn('The Pizzicato.Sound object was already added to this group');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (sound.detached) {\n\t\t\t\t\tconsole.warn('Groups do not support detached sounds. You can manually create an audio graph to group detached sounds together.');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tsound.disconnect(Pz.masterGainNode);\n\t\t\t\tsound.connect(this.mergeGainNode);\n\t\t\t\tthis.sounds.push(sound);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tremoveSound: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(sound) {\n\t\t\t\tvar index = this.sounds.indexOf(sound);\n\t\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tconsole.warn('Cannot remove a sound that is not part of this group.');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tsound.disconnect(this.mergeGainNode);\n\t\t\t\tsound.connect(Pz.masterGainNode);\n\t\t\t\tthis.sounds.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tvolume: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\tif (this.masterVolume)\n\t\t\t\t\treturn this.masterVolume.gain.value;\n\t\t\t},\n\t\n\t\t\tset: function(volume) {\n\t\t\t\tif (Pz.Util.isInRange(volume, 0, 1))\n\t\t\t\t\tthis.masterVolume.gain.value = volume;\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tplay: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tfor (var i = 0; i < this.sounds.length; i++)\n\t\t\t\t\tthis.sounds[i].play();\n\t\n\t\t\t\tthis.trigger('play');\n\t\t\t}\n\t\n\t\t},\n\t\n\t\n\t\tstop: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tfor (var i = 0; i < this.sounds.length; i++)\n\t\t\t\t\tthis.sounds[i].stop();\n\t\n\t\t\t\tthis.trigger('stop');\n\t\t\t}\n\t\n\t\t},\n\t\n\t\n\t\tpause: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function() {\n\t\t\t\tfor (var i = 0; i < this.sounds.length; i++)\n\t\t\t\t\tthis.sounds[i].pause();\n\t\n\t\t\t\tthis.trigger('pause');\n\t\t\t}\n\t\n\t\t},\n\t\n\t\t/**\n\t\t * Similarly to Sound objects, adding effects will create a graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect added. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t * \n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Group object using the same effect.\n\t\t */\n\t\taddEffect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(effect) {\n\t\t\t\tif (!Pz.Util.isEffect(effect)) {\n\t\t\t\t\tconsole.error('The object provided is not a Pizzicato effect.');\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\tthis.effects.push(effect);\n\t\n\t\t\t\t// Connects effect in the last position\n\t\t\t\tvar previousNode = this.effectConnectors.length > 0 ? this.effectConnectors[this.effectConnectors.length - 1] : this.mergeGainNode;\n\t\t\t\tpreviousNode.disconnect();\n\t\t\t\tpreviousNode.connect(effect);\n\t\n\t\t\t\t// Creates connector for the newly added effect\n\t\t\t\tvar gain = Pz.context.createGain();\n\t\t\t\tthis.effectConnectors.push(gain);\n\t\t\t\teffect.connect(gain);\n\t\t\t\tgain.connect(this.masterVolume);\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * When removing effects, the graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect should be \n\t\t * conserved. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t * \n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Group object using the same effect.\n\t\t */\n\t\tremoveEffect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(effect) {\n\t\t\t\tvar index = this.effects.indexOf(effect);\n\t\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tconsole.warn('Cannot remove effect that is not applied to this group.');\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\tvar previousNode = (index === 0) ? this.mergeGainNode : this.effectConnectors[index - 1];\n\t\t\t\tpreviousNode.disconnect();\n\t\n\t\t\t\t// Disconnect connector and effect\n\t\t\t\tvar effectConnector = this.effectConnectors[index];\n\t\t\t\teffectConnector.disconnect();\n\t\t\t\teffect.disconnect(effectConnector);\n\t\n\t\t\t\t// Remove connector and effect from our arrays\n\t\t\t\tthis.effectConnectors.splice(index, 1);\n\t\t\t\tthis.effects.splice(index, 1);\n\t\n\t\t\t\tvar targetNode; \n\t\t\t\tif (index > this.effects.length - 1 || this.effects.length === 0)\n\t\t\t\t\ttargetNode = this.masterVolume;\n\t\t\t\telse\n\t\t\t\t\ttargetNode = this.effects[index];\n\t\n\t\t\t\tpreviousNode.connect(targetNode);\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects = {};\n\t\n\tvar baseEffect = Object.create(null, {\n\t\n\t\tconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.outputNode.connect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\t\n\t\tdisconnect: {\n\t\t\tenumerable: true,\n\t\n\t\t\tvalue: function(audioNode) {\n\t\t\t\tthis.outputNode.disconnect(audioNode);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t});\n\tPizzicato.Effects.Delay = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tfeedback: 0.5,\n\t\t\ttime: 0.3,\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.feedbackGainNode = Pizzicato.context.createGain();\n\t\tthis.delayNode = Pizzicato.context.createDelay();\n\t\n\t\t// line in to dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\t// dry line out\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\t// feedback loop\n\t\tthis.delayNode.connect(this.feedbackGainNode);\n\t\tthis.feedbackGainNode.connect(this.delayNode);\n\t\n\t\t// line in to wet mix\n\t\tthis.inputNode.connect(this.delayNode);\n\t\t// wet out\n\t\tthis.delayNode.connect(this.wetGainNode);\n\t\t\n\t\t// wet line out\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Delay.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n\t\ttime: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.time;\t\n\t\t\t},\n\t\n\t\t\tset: function(time) {\n\t\t\t\tif (!Pz.Util.isInRange(time, 0, 180))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\tthis.delayNode.delayTime.value = time;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n\t\tfeedback: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.feedback;\t\n\t\t\t},\n\t\n\t\t\tset: function(feedback) {\n\t\t\t\tif (!Pz.Util.isInRange(feedback, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.feedback = parseFloat(feedback, 10);\n\t\t\t\tthis.feedbackGainNode.gain.value = this.feedback;\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.Compressor = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tthreshold: -24,\n\t\t\tknee: 30,\n\t\t\tattack: 0.003,\n\t\t\trelease: 0.250,\n\t\t\tratio: 12\n\t\t};\n\t\n\t\tthis.inputNode = this.compressorNode = Pizzicato.context.createDynamicsCompressor();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\t\n\t\tthis.compressorNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Compressor.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * The level above which compression is applied to the audio.\n\t\t * MIN: -100\n\t\t * MAX: 0\n\t\t */\n\t\tthreshold: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.threshold.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, -100, 0))\n\t\t\t\t\tthis.compressorNode.threshold.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * A value representing the range above the threshold where \n\t\t * the curve smoothly transitions to the \"ratio\" portion. More info:\n\t\t * http://www.homestudiocorner.com/what-is-knee-on-a-compressor/\n\t\t * MIN 0\n\t\t * MAX 40\n\t\t */\n\t\tknee: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.knee.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 0, 40))\n\t\t\t\t\tthis.compressorNode.knee.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * How soon the compressor starts to compress the dynamics after \n\t\t * the threshold is exceeded. If volume changes are slow, you can \n\t\t * push this to a high value. Short attack times will result in a \n\t\t * fast response to sudden, loud sounds, but will make the changes \n\t\t * in volume much more obvious to listeners.\n\t\t * MIN 0\n\t\t * MAX 1\n\t\t */\n\t\tattack: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.attack.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 0, 1))\n\t\t\t\t\tthis.compressorNode.attack.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * How soon the compressor starts to release the volume level \n\t\t * back to normal after the level drops below the threshold. \n\t\t * A long time value will tend to lose quiet sounds that come \n\t\t * after loud ones, but will avoid the volume being raised too \n\t\t * much during short quiet sections like pauses in speech.\n\t\t * MIN 0\n\t\t * MAX 1\n\t\t */\n\t\trelease: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.release.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 0, 1))\n\t\t\t\t\tthis.compressorNode.release.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * The amount of compression applied to the audio once it \n\t\t * passes the threshold level. The higher the Ratio the more \n\t\t * the loud parts of the audio will be compressed.\n\t\t * MIN 1\n\t\t * MAX 20\n\t\t */\n\t\tratio: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.compressorNode.ratio.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 1, 20))\n\t\t\t\t\tthis.compressorNode.ratio.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\tgetCurrentGainReduction: function() {\n\t\t\treturn this.compressorNode.reduction;\n\t\t}\n\t\n\t});\n\t/**\n\t * Frequencies below the cutoff frequency pass \n\t * through; frequencies above it are attenuated.\n\t */\n\tPizzicato.Effects.LowPassFilter = function(options) {\n\t\tFilter.call(this, options, 'lowpass');\n\t};\n\t\n\t/**\n\t * Frequencies below the cutoff frequency are \n\t * attenuated; frequencies above it pass through.\n\t */\n\tPizzicato.Effects.HighPassFilter = function(options) {\n\t\tFilter.call(this, options, 'highpass');\n\t};\n\t\n\t/**\n\t * Filters used by Pizzicato stem from the biquad filter node. This \n\t * function acts as a common constructor. The only thing that changes \n\t * between filters is the 'type' of the biquad filter node.\n\t */\n\tfunction Filter(options, type) {\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tfrequency: 350,\n\t\t\tpeak: 1\n\t\t};\n\t\n\t\tthis.inputNode = this.filterNode = Pz.context.createBiquadFilter();\n\t\tthis.filterNode.type = type;\n\t\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\n\t\tthis.filterNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t}\n\t\n\tvar filterPrototype = Object.create(baseEffect, {\n\t\t\n\t\t/**\n\t\t * The cutoff frequency of the filter.\n\t\t * MIN: 10\n\t\t * MAX: 22050 (half the sampling rate of the current context)\n\t\t */\n\t\tfrequency: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.filterNode.frequency.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 10, 22050))\n\t\t\t\t\tthis.filterNode.frequency.value = value;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Indicates how peaked the frequency is around \n\t\t * the cutoff. The greater the value is, the \n\t\t * greater is the peak.\n\t\t * MIN: 0.0001\n\t\t * MAX: 1000\n\t\t */\n\t\tpeak: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.filterNode.Q.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (Pizzicato.Util.isInRange(value, 0.0001, 1000))\n\t\t\t\t\tthis.filterNode.Q.value = value;\n\t\t\t}\n\t\t}\n\t});\n\t\n\tPizzicato.Effects.LowPassFilter.prototype = filterPrototype;\n\tPizzicato.Effects.HighPassFilter.prototype = filterPrototype;\n\tPizzicato.Effects.Distortion = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tgain: 0.5\n\t\t};\n\t\n\t\tthis.waveShaperNode = Pizzicato.context.createWaveShaper();\n\t\tthis.inputNode = this.outputNode = this.waveShaperNode;\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Distortion.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the gain (amount of distortion).\n\t\t */\n\t\tgain: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.gain;\n\t\t\t},\n\t\n\t\t\tset: function(gain) {\n\t\t\t\tif (!Pz.Util.isInRange(gain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.gain = gain;\n\t\t\t\tthis.adjustGain();\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Sets the wave curve with the correct gain. Taken from\n\t\t * http://stackoverflow.com/questions/22312841/waveshaper-node-in-webaudio-how-to-emulate-distortion\n\t\t */\n\t\tadjustGain: {\n\t\t\twritable: false,\n\t\t\tconfigurable: false,\n\t\t\tenumerable: false,\n\t\t\tvalue: function() {\n\t\t\t\tvar gain = Pz.Util.isNumber(this.options.gain) ? parseInt(this.options.gain * 100, 10) : 50;\n\t\t\t\tvar n_samples = 44100;\n\t\t\t\tvar curve = new Float32Array(n_samples);\n\t\t\t\tvar deg = Math.PI / 180;\n\t\t\t\tvar x;\n\t\n\t\t\t\tfor (var i = 0; i < n_samples; ++i ) {\n\t\t\t\t\tx = i * 2 / n_samples - 1;\n\t\t\t\t\tcurve[i] = (3 + gain) * x * 20 * deg / (Math.PI + gain * Math.abs(x));\n\t\t\t\t}\n\t\n\t\t\t\tthis.waveShaperNode.curve = curve;\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.Flanger = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\ttime: 0.45,\n\t\t\tspeed: 0.2,\n\t\t\tdepth: 0.1,\n\t\t\tfeedback: 0.1,\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.inputFeedbackNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.delayNode = Pizzicato.context.createDelay();\n\t\tthis.oscillatorNode = Pizzicato.context.createOscillator();\n\t\tthis.gainNode = Pizzicato.context.createGain();\n\t\tthis.feedbackNode = Pizzicato.context.createGain();\n\t\tthis.oscillatorNode.type = 'sine';\n\t\n\t\tthis.inputNode.connect(this.inputFeedbackNode);\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\n\t\tthis.inputFeedbackNode.connect(this.delayNode);\n\t\tthis.inputFeedbackNode.connect(this.wetGainNode);\n\t\n\t\tthis.delayNode.connect(this.wetGainNode);\n\t\tthis.delayNode.connect(this.feedbackNode);\n\t\n\t\tthis.feedbackNode.connect(this.inputFeedbackNode);\n\t\n\t\tthis.oscillatorNode.connect(this.gainNode);\n\t\tthis.gainNode.connect(this.delayNode.delayTime);\n\t\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tthis.oscillatorNode.start(0);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Flanger.prototype = Object.create(baseEffect, {\n\t\t\n\t\ttime: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.time;\n\t\t\t},\n\t\n\t\t\tset: function(time) {\n\t\n\t\t\t\tif (!Pz.Util.isInRange(time, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\tthis.delayNode.delayTime.value = Pz.Util.normalize(time, 0.001, 0.02);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tspeed: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.speed;\n\t\t\t},\n\t\n\t\t\tset: function(speed) {\n\t\t\t\tif (!Pz.Util.isInRange(speed, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.speed = speed;\n\t\t\t\tthis.oscillatorNode.frequency.value = Pz.Util.normalize(speed, 0.5, 5);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tdepth: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.depth;\n\t\t\t},\n\t\n\t\t\tset: function(depth) {\n\t\t\t\tif (!Pz.Util.isInRange(depth, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.depth = depth;\n\t\t\t\tthis.gainNode.gain.value = Pz.Util.normalize(depth, 0.0005, 0.005);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tfeedback: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.feedback;\n\t\t\t},\n\t\n\t\t\tset: function(feedback) {\n\t\t\t\tif (!Pz.Util.isInRange(feedback, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.feedback = feedback;\n\t\t\t\tthis.feedbackNode.gain.value = Pz.Util.normalize(feedback, 0, 0.8);\n\t\t\t}\n\t\t},\n\t\n\t\n\t\tmix: {\n\t\t\tenumberable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix;\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.StereoPanner = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tpan: 0\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\n\t\tif (Pizzicato.context.createStereoPanner) {\n\t\t\tthis.pannerNode = Pizzicato.context.createStereoPanner();\n\t\t\tthis.inputNode.connect(this.pannerNode);\n\t\t\tthis.pannerNode.connect(this.outputNode);\n\t\n\t\t} else if (Pizzicato.context.createPanner) {\n\t\n\t\t\tconsole.warn('Your browser does not support the StereoPannerNode. Will use PannerNode instead.');\n\t\n\t\t\tthis.pannerNode = Pizzicato.context.createPanner();\n\t\t\tthis.pannerNode.type = 'equalpower';\n\t\t\tthis.inputNode.connect(this.pannerNode);\n\t\t\tthis.pannerNode.connect(this.outputNode);\n\t\n\t\t} else {\n\t\t\tconsole.warn('Your browser does not support the Panner effect.');\n\t\t\tthis.inputNode.connect(this.outputNode);\n\t\t}\n\t\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.StereoPanner.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Pan position\n\t\t */\n\t\tpan: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.pan;\t\n\t\t\t},\n\t\n\t\t\tset: function(pan) {\n\t\t\t\tif (!Pz.Util.isInRange(pan, -1, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.pan = pan;\n\t\n\t\t\t\tif (!this.pannerNode)\n\t\t\t\t\treturn;\n\t\n\t\t\t\tvar isStereoPannerNode = this.pannerNode.toString().indexOf('StereoPannerNode') > -1;\n\t\n\t\t\t\tif (isStereoPannerNode) {\n\t\t\t\t\tthis.pannerNode.pan.value = pan;\t\n\t\t\t\t} else {\n\t\t\t\t\tthis.pannerNode.setPosition(pan, 0, 1 - Math.abs(pan));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.Convolver = function(options, callback) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar self = this;\n\t\tvar request = new XMLHttpRequest();\n\t\tvar defaults = {\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.callback = callback;\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.convolverNode = Pizzicato.context.createConvolver();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\n\t\tthis.inputNode.connect(this.convolverNode);\n\t\n\t\tthis.convolverNode.connect(this.wetGainNode);\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t\n\t\tif (!options.impulse) {\n\t\t\tconsole.error('No impulse file specified.');\n\t\t\treturn;\n\t\t}\n\t\n\t\trequest.open('GET', options.impulse, true);\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onload = function (e) {\n\t\t\tvar audioData = e.target.response;\n\t\n\t\t\tPizzicato.context.decodeAudioData(audioData, function(buffer) {\n\t\n\t\t\t\tself.convolverNode.buffer = buffer;\n\t\n\t\t\t\tif (self.callback && Pz.Util.isFunction(self.callback))\n\t\t\t\t\tself.callback();\n\t\n\t\t\t}, function(error) {\n\t\n\t\t\t\terror = error || new Error('Error decoding impulse file');\n\t\n\t\t\t\tif (self.callback && Pz.Util.isFunction(self.callback))\n\t\t\t\t\tself.callback(error);\n\t\t\t});\n\t\t};\n\t\n\t\trequest.onreadystatechange = function(event) {\n\t\t\tif (request.readyState === 4 && request.status !== 200) {\n\t\t\t\tconsole.error('Error while fetching ' + options.impulse + '. ' + request.statusText);\n\t\t\t}\n\t\t};\n\t\n\t\trequest.send();\n\t};\n\t\n\tPizzicato.Effects.Convolver.prototype = Object.create(baseEffect, {\n\t\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix;\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t}\n\t});\n\t/**\n\t * Adapted from https://github.com/mmckegg/web-audio-school/blob/master/lessons/3.%20Effects/18.%20Ping%20Pong%20Delay/answer.js\n\t */\n\t\n\tPizzicato.Effects.PingPongDelay = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tfeedback: 0.5,\n\t\t\ttime: 0.3,\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.delayNodeLeft = Pizzicato.context.createDelay();\n\t\tthis.delayNodeRight = Pizzicato.context.createDelay();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.feedbackGainNode = Pizzicato.context.createGain();\n\t\tthis.channelMerger = Pizzicato.context.createChannelMerger(2);\n\t\n\t\t// dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\t// dry mix out\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\t// the feedback loop\n\t\tthis.delayNodeLeft.connect(this.channelMerger, 0, 0);\n\t\tthis.delayNodeRight.connect(this.channelMerger, 0, 1);\n\t\tthis.delayNodeLeft.connect(this.delayNodeRight);\n\t\tthis.feedbackGainNode.connect(this.delayNodeLeft);\n\t\tthis.delayNodeRight.connect(this.feedbackGainNode);\n\t\n\t\t// wet mix\n\t\tthis.inputNode.connect(this.feedbackGainNode);\n\t\n\t\t// wet out\n\t\tthis.channelMerger.connect(this.wetGainNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.PingPongDelay.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n\t\ttime: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.time;\t\n\t\t\t},\n\t\n\t\t\tset: function(time) {\n\t\t\t\tif (!Pz.Util.isInRange(time, 0, 180))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\tthis.delayNodeLeft.delayTime.value = time;\n\t\t\t\tthis.delayNodeRight.delayTime.value = time;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n\t\tfeedback: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.feedback;\t\n\t\t\t},\n\t\n\t\t\tset: function(feedback) {\n\t\t\t\tif (!Pz.Util.isInRange(feedback, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.feedback = parseFloat(feedback, 10);\n\t\t\t\tthis.feedbackGainNode.gain.value = this.feedback;\n\t\t\t}\n\t\t}\n\t\n\t});\n\t/**\n\t * Adapted from https://github.com/web-audio-components/simple-reverb\n\t */\n\t\n\tPizzicato.Effects.Reverb = function(options) {\n\t\tvar self = this;\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tmix: 0.5,\n\t\t\ttime: 0.01,\n\t\t\tdecay: 0.01,\n\t\t\treverse: false\n\t\t};\n\t\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.reverbNode = Pizzicato.context.createConvolver();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\n\t\tthis.inputNode.connect(this.reverbNode);\n\t\tthis.reverbNode.connect(this.wetGainNode);\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t\n\t\t(buildImpulse.bind(this))();\n\t};\n\t\n\tPizzicato.Effects.Reverb.prototype = Object.create(baseEffect, {\n\t\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\t\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix;\n\t\t\t},\n\t\n\t\t\tset: function (mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\ttime: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function () {\n\t\t\t\treturn this.options.time;\n\t\t\t},\n\t\n\t\t\tset: function (time) {\n\t\t\t\tif (!Pz.Util.isInRange(time, 0.0001, 10))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\t(buildImpulse.bind(this))();\n\t\t\t}\n\t\t},\n\t\n\t\tdecay: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function () {\n\t\t\t\treturn this.options.decay;\n\t\t\t},\n\t\n\t\t\tset: function (decay) {\n\t\t\t\tif (!Pz.Util.isInRange(decay, 0.0001, 10))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.decay = decay;\n\t\t\t\t(buildImpulse.bind(this))();\n\t\t\t}\n\t\n\t\t},\n\t\n\t\treverse: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function () {\n\t\t\t\treturn this.options.reverse;\n\t\t\t},\n\t\n\t\t\tset: function (reverse) {\n\t\t\t\tif (!Pz.Util.isBool(reverse))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.reverse = reverse;\n\t\t\t\t(buildImpulse.bind(this))();\n\t\t\t}\n\t\t}\n\t\n\t});\n\t\n\tfunction buildImpulse() {\n\t\n\t\tvar length = Pz.context.sampleRate * this.time;\n\t\tvar impulse = Pizzicato.context.createBuffer(2, length, Pz.context.sampleRate);\n\t\tvar impulseL = impulse.getChannelData(0);\n\t\tvar impulseR = impulse.getChannelData(1);\n\t\tvar n, i;\n\t\n\t\tfor (i = 0; i < length; i++) {\n\t\t\tn = this.reverse ? length - i : i;\n\t\t\timpulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, this.decay);\n\t\t\timpulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, this.decay);\n\t\t}\n\t\n\t        // https://github.com/alemangui/pizzicato/issues/91\n\t        // ConvolverNode can be associated with only one buffer.\n\t        // Not sure what's the best way, but we are recreating ConvolverNode\n\t        // when properties change to work it around.\n\t        if (this.reverbNode.buffer) {\n\t          this.inputNode.disconnect(this.reverbNode);\n\t          this.reverbNode.disconnect(this.wetGainNode);\n\t\n\t          this.reverbNode = Pizzicato.context.createConvolver();\n\t          this.inputNode.connect(this.reverbNode);\n\t          this.reverbNode.connect(this.wetGainNode);\n\t        }\n\t\n\t\tthis.reverbNode.buffer = impulse;\n\t}\n\t\n\tPizzicato.Effects.Tremolo = function(options) {\n\t\n\t\t// adapted from\n\t\t// https://github.com/mmckegg/web-audio-school/blob/master/lessons/3.%20Effects/13.%20Tremolo/answer.js\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tspeed: 4,\n\t\t\tdepth: 1,\n\t\t\tmix: 0.8\n\t\t};\n\t\n\t\t// create nodes\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\n\t\tthis.tremoloGainNode = Pizzicato.context.createGain();\n\t\tthis.tremoloGainNode.gain.value = 0;\n\t\tthis.lfoNode = Pizzicato.context.createOscillator();\n\t\n\t\tthis.shaperNode = Pizzicato.context.createWaveShaper();\n\t\tthis.shaperNode.curve = new Float32Array([0, 1]);\n\t\tthis.shaperNode.connect(this.tremoloGainNode.gain);\n\t\n\t\t// dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\t\n\t\t// wet mix\n\t\tthis.lfoNode.connect(this.shaperNode);\n\t\tthis.lfoNode.type = 'sine';\n\t\tthis.lfoNode.start(0);\n\t\n\t\tthis.inputNode.connect(this.tremoloGainNode);\n\t\tthis.tremoloGainNode.connect(this.wetGainNode);\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.Tremolo.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1)) \n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Speed of the tremolo\n\t\t */\n\t\tspeed: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.speed;\t\n\t\t\t},\n\t\n\t\t\tset: function(speed) {\n\t\t\t\tif (!Pz.Util.isInRange(speed, 0, 20)) \n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\tthis.options.speed = speed;\n\t\t\t\tthis.lfoNode.frequency.value = speed;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Depth of the tremolo\n\t\t */\n\t\tdepth: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.depth;\t\n\t\t\t},\n\t\n\t\t\tset: function(depth) {\n\t\t\t\tif (!Pz.Util.isInRange(depth, 0, 1)) \n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\tthis.options.depth = depth;\n\t\t\t\tthis.shaperNode.curve = new Float32Array([1-depth, 1]);\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.DubDelay = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tfeedback: 0.6,\n\t\t\ttime: 0.7,\n\t\t\tmix: 0.5,\n\t\t\tcutoff: 700\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\tthis.feedbackGainNode = Pizzicato.context.createGain();\n\t\tthis.delayNode = Pizzicato.context.createDelay();\n\t\tthis.bqFilterNode = Pizzicato.context.createBiquadFilter(); \n\t\n\t\n\t\t// dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\t// wet mix\n\t\tthis.inputNode.connect(this.wetGainNode);\n\t\tthis.inputNode.connect(this.feedbackGainNode);\n\t\n\t\tthis.feedbackGainNode.connect(this.bqFilterNode);\n\t\tthis.bqFilterNode.connect(this.delayNode);\n\t\tthis.delayNode.connect(this.feedbackGainNode);\n\t\tthis.delayNode.connect(this.wetGainNode);\n\t\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tPizzicato.Effects.DubDelay.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n\t\ttime: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.time;\t\n\t\t\t},\n\t\n\t\t\tset: function(time) {\n\t\t\t\tif (!Pz.Util.isInRange(time, 0, 180))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.time = time;\n\t\t\t\tthis.delayNode.delayTime.value = time;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n\t\tfeedback: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.feedback;\t\n\t\t\t},\n\t\n\t\t\tset: function(feedback) {\n\t\t\t\tif (!Pz.Util.isInRange(feedback, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.feedback = parseFloat(feedback, 10);\n\t\t\t\tthis.feedbackGainNode.gain.value = this.feedback;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Frequency on delay repeats\n\t\t */\n\t\tcutoff: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.cutoff;\t\n\t\t\t},\n\t\n\t\t\tset: function(cutoff) {\n\t\t\t\tif (!Pz.Util.isInRange(cutoff, 0, 4000))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.cutoff = cutoff;\n\t\t\t\tthis.bqFilterNode.frequency.value = this.cutoff;\n\t\t\t}\n\t\t}\n\t\n\t\n\t\n\t});\n\t/**\n\t * See http://webaudio.prototyping.bbc.co.uk/ring-modulator/\n\t */\n\tPizzicato.Effects.RingModulator = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tspeed: 30,\n\t\t\tdistortion: 1,\n\t\t\tmix: 0.5\n\t\t};\n\t\n\t\tthis.inputNode = Pizzicato.context.createGain();\n\t\tthis.outputNode = Pizzicato.context.createGain();\n\t\tthis.dryGainNode = Pizzicato.context.createGain();\n\t\tthis.wetGainNode = Pizzicato.context.createGain();\n\t\n\t\n\t\t/**\n\t\t * `vIn` is the modulation oscillator input \n\t\t * `vc` is the audio input.\n\t\t */\n\t\tthis.vIn = Pizzicato.context.createOscillator();\n\t\tthis.vIn.start(0);\n\t\tthis.vInGain = Pizzicato.context.createGain();\n\t\tthis.vInGain.gain.value = 0.5;\n\t\tthis.vInInverter1 = Pizzicato.context.createGain();\n\t\tthis.vInInverter1.gain.value = -1;\n\t\tthis.vInInverter2 = Pizzicato.context.createGain();\n\t\tthis.vInInverter2.gain.value = -1;\n\t\tthis.vInDiode1 = new DiodeNode(Pizzicato.context);\n\t\tthis.vInDiode2 = new DiodeNode(Pizzicato.context);\n\t\tthis.vInInverter3 = Pizzicato.context.createGain();\n\t\tthis.vInInverter3.gain.value = -1;\n\t\tthis.vcInverter1 = Pizzicato.context.createGain();\n\t\tthis.vcInverter1.gain.value = -1;\n\t\tthis.vcDiode3 = new DiodeNode(Pizzicato.context);\n\t\tthis.vcDiode4 = new DiodeNode(Pizzicato.context);\n\t\n\t\tthis.outGain = Pizzicato.context.createGain();\n\t\tthis.outGain.gain.value = 3;\n\t\n\t\tthis.compressor = Pizzicato.context.createDynamicsCompressor();\n\t\tthis.compressor.threshold.value = -24;\n\t\tthis.compressor.ratio.value = 16;\n\t\n\t\t// dry mix\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\t// wet mix\t\n\t\tthis.inputNode.connect(this.vcInverter1);\n\t\tthis.inputNode.connect(this.vcDiode4.node);\n\t\tthis.vcInverter1.connect(this.vcDiode3.node);\n\t\tthis.vIn.connect(this.vInGain);\n\t\tthis.vInGain.connect(this.vInInverter1);\n\t\tthis.vInGain.connect(this.vcInverter1);\n\t\tthis.vInGain.connect(this.vcDiode4.node);\n\t\tthis.vInInverter1.connect(this.vInInverter2);\n\t\tthis.vInInverter1.connect(this.vInDiode2.node);\n\t\tthis.vInInverter2.connect(this.vInDiode1.node);\n\t\tthis.vInDiode1.connect(this.vInInverter3);\n\t\tthis.vInDiode2.connect(this.vInInverter3);\n\t\tthis.vInInverter3.connect(this.compressor);\n\t\tthis.vcDiode3.connect(this.compressor);\n\t\tthis.vcDiode4.connect(this.compressor);\n\t\tthis.compressor.connect(this.outGain);\n\t\tthis.outGain.connect(this.wetGainNode);\n\t\n\t\t// line out\n\t\tthis.wetGainNode.connect(this.outputNode);\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tvar DiodeNode = function(context_) {\n\t\tthis.context = context_;\n\t\tthis.node = this.context.createWaveShaper();\n\t\tthis.vb = 0.2;\n\t\tthis.vl = 0.4;\n\t\tthis.h = 1;\n\t\tthis.setCurve();\n\t};\n\t\n\tDiodeNode.prototype.setDistortion = function (distortion) {\n\t\tthis.h = distortion;\n\t\treturn this.setCurve();\n\t};\n\t\n\tDiodeNode.prototype.setCurve = function () {\n\t\tvar i, \n\t\t\tsamples, \n\t\t\tv, \n\t\t\tvalue, \n\t\t\twsCurve, \n\t\t\t_i, \n\t\t\t_ref, \n\t\t\tretVal;\n\t\n\t\tsamples = 1024;\n\t\twsCurve = new Float32Array(samples);\n\t\t\n\t\tfor (i = _i = 0, _ref = wsCurve.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n\t\t\tv = (i - samples / 2) / (samples / 2);\n\t\t\tv = Math.abs(v);\n\t\t\tif (v <= this.vb) {\n\t\t\t\tvalue = 0;\n\t\t\t} else if ((this.vb < v) && (v <= this.vl)) {\n\t\t\t\tvalue = this.h * ((Math.pow(v - this.vb, 2)) / (2 * this.vl - 2 * this.vb));\n\t\t\t} else {\n\t\t\t\tvalue = this.h * v - this.h * this.vl + (this.h * ((Math.pow(this.vl - this.vb, 2)) / (2 * this.vl - 2 * this.vb)));\n\t\t\t}\n\t\t\twsCurve[i] = value;\n\t\t}\n\t\n\t\tretVal = this.node.curve = wsCurve;\n\t\treturn retVal;\n\t};\n\t\n\tDiodeNode.prototype.connect = function(destination) {\n\t\treturn this.node.connect(destination);\n\t};\n\t\n\t\n\tPizzicato.Effects.RingModulator.prototype = Object.create(baseEffect, {\n\t\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n\t\tmix: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.mix\t;\t\n\t\t\t},\n\t\n\t\t\tset: function(mix) {\n\t\t\t\tif (!Pz.Util.isInRange(mix, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.mix = mix;\n\t\t\t\tthis.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix);\n\t\t\t\tthis.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Speed on the input oscillator\n\t\t */\n\t\tspeed: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.speed;\t\n\t\t\t},\n\t\n\t\t\tset: function(speed) {\n\t\t\t\tif (!Pz.Util.isInRange(speed, 0, 2000))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.speed = speed;\n\t\t\t\tthis.vIn.frequency.value = speed;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Level of distortion\n\t\t */\n\t\tdistortion: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.distortion;\t\n\t\t\t},\n\t\n\t\t\tset: function(distortion) {\n\t\t\t\tif (!Pz.Util.isInRange(distortion, 0.2, 50))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.distortion = parseFloat(distortion, 10);\n\t\n\t\t\t\tvar diodeNodes = [this.vInDiode1, this.vInDiode2, this.vcDiode3, this.vcDiode4];\n\t\n\t\t\t\tfor (var i=0, l=diodeNodes.length; i<l; i++) {\n\t\t\t\t\tdiodeNodes[i].setDistortion(distortion);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t});\n\tPizzicato.Effects.Quadrafuzz = function(options) {\n\t\n\t\tthis.options = {};\n\t\toptions = options || this.options;\n\t\n\t\tvar defaults = {\n\t\t\tlowGain: 0.6,\n\t\t\tmidLowGain: 0.8,\n\t\t\tmidHighGain: 0.5,\n\t\t\thighGain: 0.6\n\t\t};\n\t\n\t\n\t\tthis.inputNode = Pz.context.createGain();\n\t\tthis.outputNode = Pz.context.createGain();\n\t\tthis.dryGainNode = Pz.context.createGain();\n\t\tthis.wetGainNode = Pz.context.createGain();\n\t\n\t\n\t\tthis.lowpassLeft = Pz.context.createBiquadFilter();\n\t\tthis.lowpassLeft.type = 'lowpass';\n\t\tthis.lowpassLeft.frequency.value = 147;\n\t\tthis.lowpassLeft.Q.value = 0.7071;\n\t\n\t\tthis.bandpass1Left = Pz.context.createBiquadFilter();\n\t\tthis.bandpass1Left.type = 'bandpass';\n\t\tthis.bandpass1Left.frequency.value = 587;\n\t\tthis.bandpass1Left.Q.value = 0.7071;\n\t\n\t\tthis.bandpass2Left = Pz.context.createBiquadFilter();\n\t\tthis.bandpass2Left.type = 'bandpass';\n\t\tthis.bandpass2Left.frequency.value = 2490;\n\t\tthis.bandpass2Left.Q.value = 0.7071;\n\t\n\t\tthis.highpassLeft = Pz.context.createBiquadFilter();\n\t\tthis.highpassLeft.type = 'highpass';\n\t\tthis.highpassLeft.frequency.value = 4980;\n\t\tthis.highpassLeft.Q.value = 0.7071;\n\t\n\t\n\t\tthis.overdrives = [];\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis.overdrives[i] = Pz.context.createWaveShaper();\n\t\t\tthis.overdrives[i].curve = getDistortionCurve();\n\t\t}\n\t\n\t\n\t\tthis.inputNode.connect(this.wetGainNode);\n\t\tthis.inputNode.connect(this.dryGainNode);\n\t\tthis.dryGainNode.connect(this.outputNode);\n\t\n\t\tvar filters = [this.lowpassLeft, this.bandpass1Left, this.bandpass2Left, this.highpassLeft];\n\t\tfor (i = 0; i < filters.length; i++) {\n\t\t\tthis.wetGainNode.connect(filters[i]);\n\t\t\tfilters[i].connect(this.overdrives[i]);\n\t\t\tthis.overdrives[i].connect(this.outputNode);\n\t\t}\n\t\n\t\tfor (var key in defaults) {\n\t\t\tthis[key] = options[key];\n\t\t\tthis[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key];\n\t\t}\n\t};\n\t\n\tfunction getDistortionCurve(gain) {\n\t\tvar sampleRate = Pz.context.sampleRate;\n\t\tvar curve = new Float32Array(sampleRate);\n\t\tvar deg = Math.PI / 180;\n\t\n\t\tfor (var i = 0; i < sampleRate; i++) {\n\t\t\tvar x = i * 2 / sampleRate - 1;\n\t\t\tcurve[i] = (3 + gain) * x * 20 * deg / (Math.PI + gain * Math.abs(x));\n\t\t}\n\t\treturn curve;\n\t}\n\t\n\tPizzicato.Effects.Quadrafuzz.prototype = Object.create(baseEffect, {\n\t\n\t\tlowGain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.lowGain;\n\t\t\t},\n\t\n\t\t\tset: function(lowGain) {\n\t\t\t\tif (!Pz.Util.isInRange(lowGain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.lowGain = lowGain;\n\t\t\t\tthis.overdrives[0].curve = getDistortionCurve(Pz.Util.normalize(this.lowGain, 0, 150));\n\t\t\t}\n\t\t},\n\t\n\t\tmidLowGain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.midLowGain;\n\t\t\t},\n\t\n\t\t\tset: function(midLowGain) {\n\t\t\t\tif (!Pz.Util.isInRange(midLowGain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.midLowGain = midLowGain;\n\t\t\t\tthis.overdrives[1].curve = getDistortionCurve(Pz.Util.normalize(this.midLowGain, 0, 150));\n\t\t\t}\n\t\t},\n\t\n\t\tmidHighGain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.midHighGain;\n\t\t\t},\n\t\n\t\t\tset: function(midHighGain) {\n\t\t\t\tif (!Pz.Util.isInRange(midHighGain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.midHighGain = midHighGain;\n\t\t\t\tthis.overdrives[2].curve = getDistortionCurve(Pz.Util.normalize(this.midHighGain, 0, 150));\n\t\t\t}\n\t\t},\n\t\n\t\thighGain: {\n\t\t\tenumerable: true,\n\t\n\t\t\tget: function() {\n\t\t\t\treturn this.options.highGain;\n\t\t\t},\n\t\n\t\t\tset: function(highGain) {\n\t\t\t\tif (!Pz.Util.isInRange(highGain, 0, 1))\n\t\t\t\t\treturn;\n\t\n\t\t\t\tthis.options.highGain = highGain;\n\t\t\t\tthis.overdrives[3].curve = getDistortionCurve(Pz.Util.normalize(this.highGain, 0, 150));\n\t\t\t}\n\t\t}\n\t});\n\t\n\treturn Pizzicato;\n}\n","// 创建音频并下载\r\nlet working = false;\r\nasync function downloadAudio(abuffer, len, compress = false, onProgress, onFinish) {\r\n    // // set sample length and rate\r\n    // var duration = abuffer.duration,\r\n    //   rate = abuffer.sampleRate,\r\n    //   offset = 0;\r\n    // Generate audio file and assign URL\r\n    working = true;\r\n    var audio = await bufferToWave(abuffer, len, compress, onProgress, onFinish);\r\n    if(!audio) {\r\n      return;\r\n    }\r\n\r\n    var new_file = URL.createObjectURL(audio);\r\n    var fileName = 'song' + (compress ? '.mp3' : '.wav');\r\n    var link = document.createElement('a');\r\n    link.href = new_file;\r\n    link.download = fileName;\r\n    link.click();\r\n    window.URL.revokeObjectURL(link.href);\r\n    onFinish();\r\n}\r\n\r\nfunction stopDownload(){\r\n  working = false;\r\n}\r\n\r\nasync function bufferToWave(abuffer, len, compress, onProgress) {\r\n  var numOfChan = abuffer.numberOfChannels,\r\n    length = len * numOfChan * 2 + 44,\r\n    buffer = new ArrayBuffer(length),\r\n    view = new DataView(buffer),\r\n    channels = [],\r\n    i,\r\n    sample,\r\n    offset = 0,\r\n    pos = 0;\r\n\r\n  // write WAVE header\r\n  setUint32(0x46464952); // \"RIFF\"\r\n  setUint32(length - 8); // file length - 8\r\n  setUint32(0x45564157); // \"WAVE\"\r\n\r\n  setUint32(0x20746d66); // \"fmt \" chunk\r\n  setUint32(16); // length = 16\r\n  setUint16(1); // PCM (uncompressed)\r\n  setUint16(numOfChan);\r\n  setUint32(abuffer.sampleRate);\r\n  setUint32(abuffer.sampleRate * 2 * numOfChan); // avg. bytes/sec\r\n  setUint16(numOfChan * 2); // block-align\r\n  setUint16(16); // 16-bit (hardcoded in this demo)\r\n\r\n  setUint32(0x61746164); // \"data\" - chunk\r\n  setUint32(length - pos - 4); // chunk length\r\n\r\n  // write interleaved data\r\n  for (i = 0; i < abuffer.numberOfChannels; i++)\r\n    channels.push(abuffer.getChannelData(i));\r\n\r\n  while (pos < length) {\r\n    for (i = 0; i < numOfChan; i++) {\r\n      // interleave channels\r\n      sample = Math.max(-1, Math.min(1, channels[i][offset])); // clamp\r\n      sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0; // scale to 16-bit signed int\r\n      view.setInt16(pos, sample, true); // write 16-bit sample\r\n      pos += 2;\r\n    }\r\n    offset++; // next source sample\r\n  }\r\n\r\n  //转wav 就注释下面三行 放开第四行\r\n  if(compress) {\r\n    let wavHdr = lamejs.WavHeader.readHeader(new DataView(buffer));\r\n    let wavSamples = new Int16Array(\r\n      buffer,\r\n      wavHdr.dataOffset,\r\n      wavHdr.dataLen / 2,\r\n    );\r\n    return await wavToMp3(wavHdr.channels, wavHdr.sampleRate, wavSamples, onProgress);\r\n  }\r\n\r\n  // create Blob\r\n  return new Blob([buffer], { type: 'audio/wav' });\r\n\r\n  function setUint16(data) {\r\n    view.setUint16(pos, data, true);\r\n    pos += 2;\r\n  }\r\n\r\n  function setUint32(data) {\r\n    view.setUint32(pos, data, true);\r\n    pos += 4;\r\n  }\r\n}\r\n\r\nasync function wavToMp3(channels=2, sampleRate=48000, samples, onProgress) {\r\n  var buffer = [];\r\n  /*\r\n    !!!!!注意: 下面这段可以不看了,问题已经解决了,看看下面的那段\r\n    //-这里很诡异 示例中写的是44100 但是转完以后 会慢一半的速度 原因是上门的offlineContext中的声道设置成了2 把上面的offline那个改成1 这里就没事了\r\n    //一开始尝试上面的offline设置成2 然后这里吧44100 乘以2  速度就不慢了 但是发现会有杂音\r\n    //现在这样貌似没啥问题了 少了一个声道 但是听起来好像也还可以...\r\n  */\r\n  var mp3enc = new lamejs.Mp3Encoder(channels, sampleRate, 128);\r\n  var remaining = samples.length;\r\n  var samplesPerFrame = 4608; // 原来是1152 后来改成4608 速度就快了 但是不知道有没有问题\r\n  console.time();\r\n  for (var i = 0; remaining >= samplesPerFrame; i += samplesPerFrame) {\r\n    var mono = samples.subarray(i, i + samplesPerFrame);\r\n    var left = mono.filter(function (element, index, array) {\r\n      return index % 2 === 0;\r\n    });\r\n    var right = mono.filter(function (element, index, array) {\r\n      return index % 2;\r\n    });\r\n    //    之前的注释: 一开始改了源码  后来发现这里传两个参数 第二个参数也是mono也行\r\n    /*\r\n      20211202. 目前通过研究发现, 创建单声道和双声道是不一样的, 单声道的话mp3enc.encodeBuffer后面就一个参数就行,但是双声道就需要两个参数,\r\n                之前之所以报错,就是因为上面写了双声道,结果把下面用的是单声道的代码, 双声道的时候 需要像上面代码那样,\r\n                把这段文件流拆开成两段,分别给左右两个声道. 否则就会出现声音慢一倍的效果\r\n    */\r\n    // var mp3buf = mp3enc.encodeBuffer(left, right);\r\n    if(!working) {\r\n      return null;\r\n    }\r\n    var mp3buf = await encodeMp3(mp3enc,left, right);\r\n    \r\n    if (mp3buf && mp3buf.length > 0) {\r\n      buffer.push(new Int8Array(mp3buf));\r\n    }\r\n    remaining -= samplesPerFrame;\r\n    //console.log(i, remaining, samples.length)\r\n    onProgress(Math.floor(i/samples.length * 100))\r\n  }\r\n  var d = mp3enc.flush();\r\n  if (d.length > 0) {\r\n    buffer.push(new Int8Array(d));\r\n  }\r\n  console.timeEnd();\r\n  var mp3Blob = new Blob(buffer, { type: 'audio/mp3' });\r\n  return mp3Blob;\r\n  //var bUrl = window.URL.createObjectURL(mp3Blob);\r\n\r\n  // send the download link to the console\r\n  //console.log('mp3 download:', bUrl);\r\n}\r\n\r\nasync function encodeMp3(mp3enc, left, right) {\r\n  return new Promise((rs, rj)=>{\r\n    let r = mp3enc.encodeBuffer(left, right);\r\n    setTimeout(()=>{\r\n      rs(r);\r\n    }, 0)\r\n  })\r\n}\r\n\r\nexport default downloadAudio;\r\nexport {stopDownload};\r\n","let renderProgress = {\r\n  timer: null,\r\n  start(audioContext, total, onProgess, finish) {\r\n    this.timer = setInterval(() => {\r\n      if (audioContext.currentTime < total) {\r\n        onProgess(Math.floor(audioContext.currentTime/total * 100));\r\n      }\r\n      else {\r\n        onProgess(100);\r\n        this.stop();\r\n        setTimeout(() => {\r\n          finish();\r\n        }, 1000);\r\n      }\r\n    }, 200);\r\n  },\r\n  stop() {\r\n    clearInterval(this.timer);\r\n  }\r\n};\r\n\r\nexport {renderProgress}\r\n","<template>\n  <van-dialog v-model:show=\"isVisible\" title=\"混响设置\" @close=\"onCloseDialog\">\n    \n    <div class=\"c-setting-box\">\n      <van-cell title=\"混响时间:\" :value=\"option.value.time\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"option.value.time\"\n          @change=\"onTimeChange\"\n          min=\"0\"\n          max=\"5\"\n          step=\"0.1\"\n        />\n      </div>\n      <van-cell title=\"衰减\" :value=\"option.value.decay\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"option.value.decay\"\n          @change=\"onDecayChange\"\n          min=\"0\"\n          max=\"5\"\n          step=\"0.1\"\n        />\n      </div>      \n      <van-cell title=\"混合\" :value=\"option.value.mix\" />\n      <div class=\"c-setting-sliderbox\">\n        <van-slider\n          v-model=\"option.value.mix\"\n          @change=\"onMixChange\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n        />\n      </div>\n      <div class=\"c-setting-resetbtnbox\">\n        <van-button type=\"warning\" size=\"small\" @click=\"onReset\">重置参数</van-button>\n      </div>      \n    </div>\n  </van-dialog>    \n</template>\n\n<script>\nimport useStore from \"../store\";\nimport { ref } from \"vue\";\nexport default {\n  name: \"setting\",\n  props: {\n    // option: { type: Object, default: () => ({ time: 0, decay: 0, mix: 0 }) }\n  },\n  emits: ['change'],  \n  setup(props, { emit }) {\n   \n    // 如果需要从外部关闭对话框，可以定义一个方法来关闭 \n    // let onCloseDialog = ()=> {  \n    //   console.log('关闭对话框');\n    //   emit('update:visible', false);  \n    // } \n    const store = useStore();\n    let isVisible = ref(false);\n    let option = ref({});\n    return { isVisible, option, store };\n  },\n  methods: {\n    show(opt) {\n      this.isVisible = true;\n      this.option.value = opt;\n    },\n    onCloseDialog() {\n      this.isVisible = false;\n      this.option.value = {};\n      this.$emit('close');\n    },\n    onTimeChange(val) {\n      this.option.value.time = val;\n      this.$emit('change', this.option.value);\n    },\n    onDecayChange(val) {\n      this.option.value.decay = val;\n      this.$emit('change', this.option.value);\n    },\n    onMixChange(val) {\n      this.option.value.mix = val;\n      this.$emit('change', this.option.value);\n    },\n    onReset() {\n      this.option.value.time = this.store.reverbOption_default.time;\n      this.option.value.decay = this.store.reverbOption_default.decay;\n      this.option.value.mix = this.store.reverbOption_default.mix;\n      this.$emit('change', this.option.value);\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n.c-setting-box {\n  text-align: left;\n}\n.c-setting-sliderbox {\n  padding: 16px 20px;\n}\n.c-setting-resetbtnbox {\n  text-align: right;\n  padding: 4px 12px;\n  margin-top: 4px;\n  margin-bottom: 2px;\n}\n</style>\n","import { render } from \"./ReverbDialog.vue?vue&type=template&id=731bbba6&scoped=true\"\nimport script from \"./ReverbDialog.vue?vue&type=script&lang=js\"\nexport * from \"./ReverbDialog.vue?vue&type=script&lang=js\"\n\nimport \"./ReverbDialog.vue?vue&type=style&index=0&id=731bbba6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-731bbba6\"]])\n\nexport default __exports__"],"names":["createPizzicato","ctx","Pizzicato","Pz","context","masterGainNode","createGain","connect","destination","Util","isString","arg","toString","call","isObject","isFunction","isNumber","isArray","isInRange","min","max","isBool","isOscillator","audioNode","isAudioBufferSourceNode","isSound","sound","Sound","isEffect","effect","key","Effects","normalize","num","floor","ceil","getDryLevel","mix","getWetLevel","gainNode","Object","getPrototypeOf","node","b","this","inputNode","apply","arguments","defineProperty","enumerable","get","gain","value","set","volume","console","error","Events","on","name","callback","_events","_event","push","handler","trigger","length","args","i","Math","off","undefined","description","self","util","descriptionError","getDescriptionError","hasOptions","options","defaultAttack","defaultRelease","Error","supportedSources","source","indexOf","path","audioFunction","initializeWithWave","waveOptions","getRawSourceNode","frequency","sourceNode","createOscillator","type","gainSuccessor","initializeWithUrl","paths","request","XMLHttpRequest","open","responseType","onload","progressEvent","decodeAudioData","target","response","buffer","createBufferSource","loop","bind","shift","onreadystatechange","event","readyState","status","statusText","send","initializeWithInput","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","handleStream","stream","createMediaStreamSource","handleError","audio","then","catch","initializeWithFunction","bufferSize","createScriptProcessor","e","onaudioprocess","initializeWithSoundObject","detached","masterVolume","fadeNode","lastTimePlayed","effects","effectConnectors","playing","paused","attack","release","sustain","warn","prototype","create","play","when","offset","offsetTime","getSourceNode","applyAttack","start","currentTime","stop","stopWithRelease","pause","elapsedTime","sampleRate","clone","addEffect","onEnded","previousNode","disconnect","removeEffect","index","shouldResumePlaying","targetNode","effectConnector","splice","connectEffects","connectors","isLastEffect","destinationNode","outputNode","previousSourceNode","setValueAtTime","linearRampToValueAtTime","setTimeout","getInputNode","onended","cancelScheduledValues","isFirefox","userAgent","toLowerCase","remainingAttackTime","setTargetAtTime","stopSound","remainingReleaseTime","window","Group","sounds","mergeGainNode","addSound","removeSound","baseEffect","Filter","defaults","peak","filterNode","createBiquadFilter","Delay","feedback","time","dryGainNode","wetGainNode","feedbackGainNode","delayNode","createDelay","delayTime","parseFloat","Compressor","threshold","knee","ratio","compressorNode","createDynamicsCompressor","getCurrentGainReduction","reduction","LowPassFilter","HighPassFilter","filterPrototype","Q","buildImpulse","n","impulse","createBuffer","impulseL","getChannelData","impulseR","reverse","random","pow","decay","reverbNode","createConvolver","Distortion","waveShaperNode","createWaveShaper","adjustGain","writable","configurable","x","parseInt","n_samples","curve","Float32Array","deg","PI","abs","Flanger","speed","depth","inputFeedbackNode","oscillatorNode","feedbackNode","enumberable","StereoPanner","pan","createStereoPanner","pannerNode","createPanner","isStereoPannerNode","setPosition","Convolver","convolverNode","audioData","PingPongDelay","delayNodeLeft","delayNodeRight","channelMerger","createChannelMerger","Reverb","Tremolo","tremoloGainNode","lfoNode","shaperNode","DubDelay","cutoff","bqFilterNode","RingModulator","distortion","vIn","vInGain","vInInverter1","vInInverter2","vInDiode1","DiodeNode","vInDiode2","vInInverter3","vcInverter1","vcDiode3","vcDiode4","outGain","compressor","context_","vb","vl","h","setCurve","getDistortionCurve","setDistortion","samples","v","wsCurve","_i","_ref","retVal","diodeNodes","l","Quadrafuzz","lowGain","midLowGain","midHighGain","highGain","lowpassLeft","bandpass1Left","bandpass2Left","highpassLeft","overdrives","filters","working","async","downloadAudio","abuffer","len","compress","onProgress","onFinish","bufferToWave","new_file","URL","createObjectURL","fileName","link","document","createElement","href","download","click","revokeObjectURL","stopDownload","sample","numOfChan","numberOfChannels","ArrayBuffer","view","DataView","channels","pos","setUint32","setUint16","setInt16","wavHdr","lamejs","WavHeader","readHeader","wavSamples","Int16Array","dataOffset","dataLen","wavToMp3","Blob","data","mp3enc","Mp3Encoder","remaining","samplesPerFrame","mono","subarray","left","filter","element","array","right","mp3buf","encodeMp3","Int8Array","d","flush","timeEnd","mp3Blob","Promise","rs","rj","r","encodeBuffer","renderProgress","timer","audioContext","total","onProgess","finish","setInterval","clearInterval","class","_createBlock","_component_van_dialog","show","$setup","isVisible","_cache","$event","title","onClose","$options","onCloseDialog","default","_withCtx","_createElementVNode","_hoisted_1","_createVNode","_component_van_cell","option","_hoisted_2","_component_van_slider","modelValue","onChange","onTimeChange","step","_hoisted_3","onDecayChange","_hoisted_4","onMixChange","_hoisted_5","_component_van_button","size","onClick","onReset","_createTextVNode","_","props","emits","setup","emit","store","useStore","ref","methods","opt","$emit","val","reverbOption_default","__exports__","render"],"sourceRoot":""}