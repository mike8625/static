{"version":3,"sources":["components/Dialog.tsx","common/ts/util.ts","components/RecordWin.tsx","components/InputWin.tsx","components/Player.tsx","pages/Comp.tsx","pages/Setting.tsx","store/store.ts","App.tsx","index.tsx"],"names":["Dialog","state","onCancel","props","onDialogCancel","onAccept","onDialogAccept","className","style","display","this","visible","title","children","size","onClick","Component","defaultProps","mss","level","isfixNum","cvtNum","n","days","hours","minutes","arr","list","i","length","slice","num","Array","reverse","url","test","fileName","str","match","replace","Recorder","require","RecordWin","rec","wave","rs","started","recordTime","dialogShow","recording","time","canRecord","recOpen","type","sampleRate","bitRate","onProcess","buffers","powerLevel","bufferDuration","bufferSampleRate","newBufferIdx","asyncEnd","onDgAccept","setTimeString","input","open","setState","setTimeout","WaveView","elem","Int16Array","onRecordBtnClick","msg","isUserNotAllow","e","alert","ms","t","util","join","resetTime","pause","resume","start","onDgCancel","reset","stop","close","blob","duration","window","URL","webkitURL","createObjectURL","closeDialog","onRef","Promise","rj","recIcon","o","InputWin","content","ReactDOM","render","React","cloneElement","component","div","unmountComponentAtNode","remove","ele","querySelector","value","document","createElement","body","append","resolve","Player","observer","currentTime","muted","paused","volume","totalTimeStr","currentTimeStr","active","refs","createRef","releaseUrl","au","src","startsWith","revokeObjectURL","errorFun","endFun","timeFun","Math","ceil","target","getCurrentTimeStr","loadFun","getTotalTimeStr","s","setDisabled","onBtnPlayClick","play","onPlay","item","id","onBtnPauseClick","onTimeSliderChange","v","console","log","onEditText","text","then","store","editItem","onVolumeSliderChange","onAudioNameClick","prompt","onPress","reject","trim","info","name","addEventListener","removeEventListener","ref","onChange","defaultValue","step","min","max","handleStyle","borderColor","height","width","marginLeft","marginTop","backgroundColor","trackStyle","onRemove","Comp","subTitle","disabled","subTileChanged","onChangeSubTitle","txt","onFileSelect","f","files","typeName","includes","toLowerCase","objectURL","generateId","addAudioObject","onItemRemove","delItem","onItemPlay","idx","mode","leftContent","onSetting","rightContent","onAdd","hideTitle","accept","map","index","key","random","toString","history","push","BUTTONS","showActionSheetWithOptions","options","cancelButtonIndex","message","maskClosable","buttonIndex","setFile","setUrl","setRecorder","auFile","click","addItem","rwin","showDialog","styled","default","Setting","icon","onLeftClick","goBack","renderHeader","Item","extra","checked","setTitleHidden","Dist","init","b","localStorage","audio_comp_hide_title","splice","forEach","releasUrl","observable","action","Router","HashRouter","Route","Link","Redirect","App","path","exact","to","getElementById"],"mappings":"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","file":"static/js/main.d2b1c76a.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './Dialog.less';\r\nimport {Button} from 'antd-mobile';\r\nexport interface IProps { \r\n    visible: boolean;\r\n    title: string;\r\n    onDialogCancel():void;\r\n    //onDialogCancel:()=>void;\r\n    onDialogAccept():void;\r\n\r\n}\r\n// å®šä¹‰ State ç±»å‹\r\nexport interface IState{\r\n    \r\n}\r\n\r\nclass Dialog extends Component<IProps, IState> {\r\n    static defaultProps: IProps = {\r\n        visible: false,\r\n        title: '',\r\n        onDialogCancel(){},\r\n        onDialogAccept(){}\r\n    }\r\n    readonly state: IState = {\r\n        \r\n    };\r\n    onCancel = ()=>{\r\n        this.props.onDialogCancel();\r\n    }\r\n    onAccept = ()=> {\r\n        this.props.onDialogAccept();\r\n    }\r\n    render() {\r\n      return (\r\n        <div className='c-dg-mask' style={{display: this.props.visible ? 'block' : 'none'}}>\r\n            <div className='c-dg-box'>\r\n                <div className='c-dg-title'>{this.props.title}</div>\r\n                <div className='c-dg-content'>{this.props.children}</div>\r\n                <div className='c-dg-footer'>\r\n                <Button size=\"small\" onClick={this.onCancel}>å–æ¶ˆ</Button>\r\n                <Button size='small' onClick={this.onAccept}>ç¡®å®š</Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      );\r\n    }    \r\n  }\r\n  \r\n  export default Dialog;\r\n","export default  {\r\n    second2Time ( mss:number, level:number, isfixNum:boolean ) {\r\n        function cvtNum(n:number){\r\n          return n >> 0;\r\n        }\r\n        function fixNum(num:number){\r\n          if(num < 10)\r\n            return \"0\" + num;\r\n          return num + \"\";  \r\n        }\r\n        let days = cvtNum(mss / (1000 * 60 * 60 * 24));\r\n        let hours = cvtNum((mss % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\r\n        let minutes = cvtNum((mss % (1000 * 60 * 60)) / (1000 * 60));\r\n        let seconds = cvtNum((mss % (1000 * 60)) / 1000);\r\n        let arr = [seconds, minutes, hours, days];\r\n        if(level){\r\n          let list = [1, 60, 60, 24];\r\n          for(let i = arr.length - 1; i >= level; i--){\r\n            arr[i-1] += arr[i] * list[i];\r\n          }\r\n          arr = arr.slice(0, level);\r\n        }\r\n        let list = new Array<String>();\r\n        if(isfixNum){\r\n          for(let i = 0; i < arr.length; i++){\r\n            list[i] = fixNum(arr[i]);\r\n          }      \r\n        }\r\n        return list.reverse();\r\n    },\r\n    isIPhone(): boolean {\r\n      return new RegExp('\\\\biPhone\\\\b|\\\\biPod\\\\b', 'i').test(window.navigator.userAgent);\r\n    }, \r\n    isUrl(url: string): boolean {\r\n      return /^((https|http|ftp|rtsp|mms)?:\\/\\/)/.test(url);\r\n    },\r\n    getTypeName(fileName: string): string {\r\n      let str = fileName.match(/\\.([^\\.]*)$/);\r\n      return str ? str[1] : \"\";\r\n    },\r\n    removeTypeName: function(fileName:string)\r\n    {\r\n      return fileName.replace(/\\.[^\\.]*$/,\"\");\r\n    },\r\n}\r\n","import React, { Component, ReactNode } from 'react';\r\nimport Dialog from './Dialog';\r\nimport './RecordWin.less';\r\nimport {Modal} from 'antd-mobile';\r\nimport util from '../common/ts/util';\r\n\r\n// å½•éŸ³\r\nconst Recorder = require('recorder-core/recorder.mp3.min');\r\nrequire('recorder-core/src/extensions/waveview');\r\nexport interface IProps { \r\n    onRef(o:any):void;\r\n}\r\nexport interface IState{\r\n    dialogShow: boolean;\r\n    recording: boolean;\r\n    time: string;\r\n    canRecord: boolean\r\n}\r\n\r\nclass RecordWin extends Component<IProps, IState> {\r\n    private rec:any = null;\r\n    private wave:any = null;\r\n    private rs: any = null;\r\n    private started: boolean = false;\r\n    //è®°å½•ä¸€ä¸‹å½•äº†å¤šå°‘ç§’äº†\r\n    private recordTime:number = 0;\r\n\r\n    constructor(props:any){\r\n        super(props);\r\n        this.props.onRef(this)\r\n    }\r\n    static defaultProps: IProps = {\r\n        onRef(o:any){}\r\n    }\r\n    readonly state: IState = {\r\n        dialogShow: false,\r\n        recording: false,\r\n        time: \"00:00\",\r\n        canRecord: false\r\n    };\r\n    recOpen=()=>{//ä¸€èˆ¬åœ¨æ˜¾ç¤ºå‡ºå½•éŸ³æŒ‰é’®æˆ–ç›¸å…³çš„å½•éŸ³ç•Œé¢æ—¶è¿›è¡Œæ­¤æ–¹æ³•è°ƒç”¨ï¼Œåé¢ç”¨æˆ·ç‚¹å‡»å¼€å§‹å½•éŸ³æ—¶å°±èƒ½ç•…é€šæ— é˜»äº†\r\n        this.rec=Recorder({\r\n            type:\"mp3\",sampleRate:16000,bitRate:32 //mp3æ ¼å¼ï¼ŒæŒ‡å®šé‡‡æ ·ç‡hzã€æ¯”ç‰¹ç‡kbpsï¼Œå…¶ä»–å‚æ•°ä½¿ç”¨é»˜è®¤é…ç½®ï¼›æ³¨æ„ï¼šæ˜¯æ•°å­—çš„å‚æ•°å¿…é¡»æä¾›æ•°å­—ï¼Œä¸è¦ç”¨å­—ç¬¦ä¸²ï¼›éœ€è¦ä½¿ç”¨çš„typeç±»å‹ï¼Œéœ€æå‰æŠŠæ ¼å¼æ”¯æŒæ–‡ä»¶åŠ è½½è¿›æ¥ï¼Œæ¯”å¦‚ä½¿ç”¨wavæ ¼å¼éœ€è¦æå‰åŠ è½½wav.jsç¼–ç å¼•æ“\r\n            ,onProcess:(buffers:any,powerLevel:any,bufferDuration:any,bufferSampleRate:any,newBufferIdx:any,asyncEnd:any)=>{\r\n                // console.log(bufferDuration)\r\n                if(bufferDuration > 300000) { // æœ€å¤šå½•äº”åˆ†é’Ÿ\r\n                    this.onDgAccept();\r\n                    return;\r\n                }\r\n                this.recordTime = bufferDuration;\r\n                this.setTimeString(bufferDuration);\r\n                //å½•éŸ³å®æ—¶å›è°ƒï¼Œå¤§çº¦1ç§’è°ƒç”¨12æ¬¡æœ¬å›è°ƒ\r\n                //å¯åˆ©ç”¨extensions/waveview.jsæ‰©å±•å®æ—¶ç»˜åˆ¶æ³¢å½¢\r\n                //å¯åˆ©ç”¨extensions/sonic.jsæ‰©å±•å®æ—¶å˜é€Ÿå˜è°ƒï¼Œæ­¤æ‰©å±•è®¡ç®—é‡å·¨å¤§ï¼ŒonProcesséœ€è¦è¿”å›trueå¼€å¯å¼‚æ­¥æ¨¡å¼\r\n                this.wave.input(buffers[buffers.length-1],powerLevel,bufferSampleRate);//è¾“å…¥éŸ³é¢‘æ•°æ®ï¼Œæ›´æ–°æ˜¾ç¤ºæ³¢å½¢\r\n            }\r\n        });\r\n    \r\n        //var dialog=createDelayDialog(); æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ€§çš„å¼¹ä¸€ä¸ªå¯¹è¯æ¡†ï¼šä¸ºäº†é˜²æ­¢ç§»åŠ¨ç«¯æµè§ˆå™¨å­˜åœ¨ç¬¬ä¸‰ç§æƒ…å†µï¼šç”¨æˆ·å¿½ç•¥ï¼Œå¹¶ä¸”ï¼ˆæˆ–è€…å›½äº§ç³»ç»ŸUCç³»ï¼‰æµè§ˆå™¨æ²¡æœ‰ä»»ä½•å›è°ƒï¼Œæ­¤å¤„demoçœç•¥äº†å¼¹çª—çš„ä»£ç \r\n        this.rec.open(()=>{//æ‰“å¼€éº¦å…‹é£æˆæƒè·å¾—ç›¸å…³èµ„æº\r\n            //dialog&&dialog.Cancel(); å¦‚æœå¼€å¯äº†å¼¹æ¡†ï¼Œæ­¤å¤„éœ€è¦å–æ¶ˆ\r\n            //rec.start() æ­¤å¤„å¯ä»¥ç«‹å³å¼€å§‹å½•éŸ³ï¼Œä½†ä¸å»ºè®®è¿™æ ·ç¼–å†™ï¼Œå› ä¸ºopenæ˜¯ä¸€ä¸ªå»¶è¿Ÿæ¼«é•¿çš„æ“ä½œï¼Œé€šè¿‡ä¸¤æ¬¡ç”¨æˆ·æ“ä½œæ¥åˆ†åˆ«è°ƒç”¨openå’Œstartæ˜¯æ¨èçš„æœ€ä½³æµç¨‹\r\n            //success&&success();\r\n            this.setState({\r\n                canRecord: true\r\n            },()=>{\r\n                setTimeout(()=>{\r\n                    if(this.wave == null) {\r\n                        this.wave = Recorder.WaveView({elem:\".c-rec-wave\"}); //åˆ›å»ºwaveå¯¹è±¡ï¼Œå†™è¿™é‡Œé¢æµè§ˆå™¨å¦¥å¦¥çš„\r\n                    }\r\n                    this.wave.input(new Int16Array(1), 0, 1);\r\n                    this.onRecordBtnClick();\r\n                }, 1000)\r\n            })\r\n\r\n            \r\n        },(msg:any,isUserNotAllow:any)=>{//ç”¨æˆ·æ‹’ç»æœªæˆæƒæˆ–ä¸æ”¯æŒ\r\n            //dialog&&dialog.Cancel(); å¦‚æœå¼€å¯äº†å¼¹æ¡†ï¼Œæ­¤å¤„éœ€è¦å–æ¶ˆ\r\n            // console.log((isUserNotAllow?\"UserNotAllowï¼Œ\":\"\")+\"æ— æ³•å½•éŸ³:\"+msg);\r\n            let e = (isUserNotAllow ? \"ç”¨æˆ·æ‹’ç»æˆæƒæˆ–ä¸æ”¯æŒï¼Œ\" : \"\") + \"æ— æ³•å½•éŸ³:\" + msg;\r\n            Modal.alert(\"æç¤º\", e);\r\n            //fail(e)\r\n        });\r\n    };    \r\n    \r\n    setTimeString = (ms:number)=> {\r\n        let t = util.second2Time(ms, 2, true);\r\n        this.setState({\r\n            time: t.join(\":\")\r\n        })\r\n    }\r\n    resetTime = ()=> {\r\n        this.setState({\r\n            time: '00:00'\r\n        })\r\n        this.recordTime = 0;\r\n    }\r\n    onRecordBtnClick = ()=> {\r\n        if(this.state.recording) {\r\n            this.rec.pause();\r\n            this.setState({\r\n                recording: false\r\n            })\r\n        }\r\n        else {\r\n            if(!this.started) {\r\n                this.rec.start();\r\n            }\r\n            else {\r\n                this.rec.resume();\r\n            }\r\n            this.started = true;\r\n            this.setState({\r\n                recording: true\r\n            })\r\n        }\r\n    }\r\n    onDgCancel = ()=>{\r\n        this.reset();\r\n        this.rec.stop(()=>{\r\n            this.rec.close();\r\n            this.rs(null);     \r\n        });   \r\n    }\r\n    onDgAccept = ()=> {\r\n        if(!this.started || this.recordTime < 2000) {\r\n            Modal.alert('æç¤º', 'æ²¡æœ‰å½•éŸ³æˆ–è€…å½•éŸ³æ—¶é—´å¤ªçŸ­');\r\n            return;\r\n        }\r\n        this.reset();\r\n        this.rec.stop((blob:any,duration:any)=>{\r\n            // console.log(blob,(window.URL||webkitURL).createObjectURL(blob),\"æ—¶é•¿:\"+duration+\"ms\");\r\n            this.rec.close();//é‡Šæ”¾å½•éŸ³èµ„æºï¼Œå½“ç„¶å¯ä»¥ä¸é‡Šæ”¾ï¼Œåé¢å¯ä»¥è¿ç»­è°ƒç”¨startï¼›ä½†ä¸é‡Šæ”¾æ—¶ç³»ç»Ÿæˆ–æµè§ˆå™¨ä¼šä¸€ç›´æç¤ºåœ¨å½•éŸ³ï¼Œæœ€ä½³æ“ä½œæ˜¯å½•å®Œå°±closeæ‰\r\n            //ç®€å•åˆ©ç”¨URLç”Ÿæˆæ’­æ”¾åœ°å€ï¼Œæ³¨æ„ä¸ç”¨äº†æ—¶éœ€è¦revokeObjectURLï¼Œå¦åˆ™éœ¸å å†…å­˜\r\n            let url = (window.URL||webkitURL).createObjectURL(blob);\r\n            // console.log(this.rs)\r\n            this.rs(url);\r\n        },(msg:any)=>{\r\n            this.rec.close();//å¯ä»¥é€šè¿‡stopæ–¹æ³•çš„ç¬¬3ä¸ªå‚æ•°æ¥è‡ªåŠ¨è°ƒç”¨close\r\n        });        \r\n    }\r\n    reset = ()=> {\r\n        this.closeDialog();\r\n        this.resetTime();\r\n        this.started = false;\r\n        this.setState({\r\n            recording: false\r\n        })        \r\n    }\r\n    showDialog() {\r\n        this.recOpen();\r\n        this.setState({\r\n            dialogShow: true\r\n        })\r\n        return new Promise((rs, rj)=>{\r\n            this.rs = rs;\r\n        });\r\n    }\r\n    closeDialog() {\r\n        this.setState({\r\n            dialogShow: false\r\n        })        \r\n    }\r\n    render() {\r\n        let recIcon: ReactNode;\r\n        if(!this.state.recording){\r\n            recIcon = (<i className=\"c-recbtn-icon c-recbtn-recording\" ></i>);\r\n        }\r\n        else {\r\n            recIcon =  (<i className=\"c-recbtn-icon c-recbtn-pause\" ></i>);\r\n        }\r\n\r\n      return (\r\n        <Dialog title=\"å½•éŸ³\" onDialogCancel={this.onDgCancel} onDialogAccept={this.onDgAccept} visible={this.state.dialogShow}>\r\n            <div className='c-rec-wave'>\r\n\r\n            </div>\r\n            <div className='c-rec-panel'>\r\n                <div className='c-recbtn' style={{display: this.state.canRecord?'flex':'none'}} onClick={this.onRecordBtnClick}>\r\n                    {recIcon}\r\n                </div>\r\n                <div className='c-no-rec' style={{display: !this.state.canRecord?'block':'none'}}>è¯·æ ¹æ®æç¤ºæˆæƒå½•éŸ³æƒé™,å¦‚é•¿æ—¶é—´æ²¡æœ‰ååº”,è¯´æ˜æµè§ˆå™¨ä¸æ”¯æŒå½•éŸ³,å¯ä»¥å°è¯•é€‰æ‹©æ–‡ä»¶ä¸­çš„å½•éŸ³æŒ‰é’®</div>\r\n                <div className=\"c-rectime\" style={{display: this.state.canRecord?'block':'none'}}>{this.state.time}</div>\r\n            </div>\r\n        </Dialog>\r\n      );\r\n    }    \r\n  }\r\n  \r\n  export default RecordWin;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './InputWin.less';\r\nimport Dialog from './Dialog';\r\nconst InputWin = (content?:string) => {\r\n    content = content || '';\r\n    let onDgCancel = ()=>{\r\n        reset();  \r\n    }\r\n    let onDgAccept = ()=> {\r\n        let ele = div.querySelector('textarea')||{value:''};\r\n        rs(ele.value);\r\n        reset();       \r\n        \r\n    }\r\n    // å°è¯•inputçš„æ—¶å€™æ”¹å˜å€¼ æ— æ•ˆ...\r\n    // let onInutChange = function(e:any) {\r\n    //    // let ele = div.querySelector('textarea');\r\n    //    // ele && (ele.value = e.target.value);\r\n    //     txt = e.target.value;\r\n    //     console.log(txt)\r\n    // }\r\n    let reset = ()=> {\r\n        //è¿™è¡Œæ˜¯ç½‘ä¸ŠæŠ„çš„ è¯•äº†ä¸€ä¸‹å»æ‰è¿™å±€ å¥½åƒä¹Ÿæ²¡äº‹...\r\n        ReactDOM.render(React.cloneElement(component, {visible: false}), div)\r\n        ReactDOM.unmountComponentAtNode(div)\r\n        div.remove()\r\n    }    \r\n    const component = <Dialog title=\"è¯·è¾“å…¥å†…å®¹\" onDialogCancel={onDgCancel} onDialogAccept={onDgAccept} visible={true}>\r\n                        <div>\r\n                          <textarea className='c-inputwin-text'></textarea>\r\n                        </div>\r\n                    </Dialog>\r\n               \r\n    const div = document.createElement('div')\r\n    document.body.append(div)\r\n    ReactDOM.render(component, div);\r\n    let ele = div.querySelector('textarea');\r\n    ele && (ele.value = content);\r\n    let rs:any;\r\n    return new Promise((resolve, rj)=>{\r\n        rs = resolve;\r\n    })\r\n  }\r\n  \r\nexport {InputWin}\r\n","import React, { Component } from 'react';\r\nimport './Player.less';\r\nimport {Slider, Icon, Modal, Toast } from 'antd-mobile';\r\nimport {InputWin} from './InputWin';\r\nimport util from '../common/ts/util';\r\nimport { AudioObject } from '../store/store';\r\nimport {observer} from 'mobx-react';\r\n\r\nexport interface IProps { \r\n    store: any,\r\n    item: AudioObject,\r\n    onRemove: (id: string)=>void,\r\n    onPlay: (id: string)=>void\r\n}\r\nexport interface IState{\r\n    currentTime: number;\r\n    duration: number,\r\n    muted: boolean;\r\n    paused: boolean;\r\n    volume: number,\r\n    totalTimeStr: string,\r\n    currentTimeStr: string,\r\n    active: boolean\r\n}\r\n@observer\r\nclass Player extends Component<IProps, IState> {\r\n    readonly state: IState = {\r\n        currentTime: 0,\r\n        duration: 0,\r\n        muted: false,\r\n        paused: true,\r\n        volume: 0,\r\n        totalTimeStr: '00:00',\r\n        currentTimeStr: '00:00',\r\n        active: false\r\n    };    \r\n    refs: any = React.createRef() \r\n    componentDidMount() {\r\n        // console.log(this.refs.au)\r\n        this.refs.au.addEventListener(\"timeupdate\", this.timeFun, false);\r\n        this.refs.au.addEventListener(\"loadedmetadata\", this.loadFun, false);\r\n        this.refs.au.addEventListener(\"ended\", this.endFun, false);\r\n        this.refs.au.addEventListener(\"error\", this.errorFun, false);\r\n    }\r\n    componentWillUnmount() {\r\n        this.refs.au.pause();\r\n        this.refs.au.removeEventListener(\"timeupdate\", this.timeFun, false);\r\n        this.refs.au.removeEventListener(\"loadedmetadata\", this.loadFun, false);\r\n        this.refs.au.removeEventListener(\"ended\", this.endFun, false);\r\n        this.refs.au.removeEventListener(\"error\", this.errorFun, false);\r\n        //this.releaseUrl();\r\n    }\r\n    releaseUrl = ()=> {\r\n        if(this.refs.au.src.startsWith(\"blob:\")) {\r\n            window.URL.revokeObjectURL(this.refs.au.src);\r\n        }\r\n    }\r\n    errorFun = (e:any)=> {\r\n        Modal.alert('æç¤º', 'æ’­æ”¾å¤±è´¥');\r\n    }\r\n    endFun = (e:any)=> {\r\n        this.setState({\r\n            paused: true\r\n        })\r\n    }\r\n    timeFun = (e:any)=> {\r\n        // console.log(e.target.currentTime)\r\n        // console.log('update')\r\n        let t = Math.ceil(e.target.currentTime);\r\n        this.setState({\r\n            currentTime: t,\r\n            currentTimeStr: this.getCurrentTimeStr(t)\r\n        })\r\n    }\r\n    // todo event çš„ç±»å‹\r\n    loadFun = (e:any)=> {\r\n        // console.log('load')\r\n        let t = Math.ceil(e.target.duration);\r\n        this.setState({\r\n            duration: t,\r\n            totalTimeStr: this.getTotalTimeStr(t)\r\n        })\r\n    }\r\n    setTimeString = (s:number)=> {\r\n        this.setState({\r\n            currentTime: s\r\n        })\r\n    }\r\n    resetTime = ()=> {\r\n        this.setState({\r\n            currentTime: 0\r\n        })\r\n    }\r\n   \r\n    setDisabled = ()=> {\r\n        this.setState({\r\n            muted: !this.state.muted\r\n        })\r\n    }\r\n\r\n    onBtnPlayClick = () => {\r\n        this.refs.au.play();\r\n        this.setState({\r\n            paused: false,\r\n            active: true\r\n        });\r\n        this.props.onPlay(this.props.item.id);\r\n    }\r\n\r\n    onBtnPauseClick = () => {\r\n        this.refs.au.pause();\r\n        this.setState({\r\n            paused: true,\r\n            active: false\r\n        })\r\n    }\r\n    onTimeSliderChange = (v:any)=> {\r\n        console.log(v);\r\n        this.refs.au.currentTime = v;\r\n    }\r\n    onEditText = () => {\r\n        InputWin(this.props.item.text).then((text:any)=>{\r\n            let o:AudioObject = {\r\n                ...this.props.item\r\n            }\r\n            o.text = text;\r\n            this.props.store.editItem(o);\r\n        })\r\n    }\r\n    getCurrentTimeStr = (currentTime:number)=> {\r\n        return util.second2Time(currentTime * 1000, 2, true).join(\":\");\r\n    }\r\n    getTotalTimeStr = (duration:number)=> {\r\n        return util.second2Time(duration * 1000, 2, true).join(\":\");\r\n    }\r\n    onVolumeSliderChange = (v:any) => {\r\n        this.refs.au.volume = v;\r\n    }\r\n    onAudioNameClick = ()=> {\r\n        Modal.prompt('è¯·è¾“å…¥åç§°', '',\r\n        [\r\n          {\r\n            text: 'å–æ¶ˆ',\r\n            onPress: value => new Promise((resolve) => {\r\n              resolve();\r\n            }),\r\n          },\r\n          {\r\n            text: 'ç¡®å®š',\r\n            onPress: value => new Promise((resolve, reject) => {\r\n                value = value.trim();\r\n                if(value == \"\") {\r\n                    Toast.info(\"è¯·è¾“å…¥åç§°\");\r\n                    reject();\r\n                }\r\n                let o = {...this.props.item};\r\n                o.name = value;\r\n                this.props.store.editItem(o);\r\n                resolve();\r\n            }),\r\n          },\r\n        ], 'default', this.props.item.name, ['è¯·è¾“å…¥åç§°'])        \r\n    }\r\n    render() {\r\n\r\n      return (\r\n        <div className={this.state.active ? \"c-item-box c-item-active\" : \"c-item-box\"}>\r\n            <audio src={this.props.item.url} ref=\"au\"></audio>\r\n            <div className='c-item-head'>\r\n                {this.state.paused ? (<i className=\"c-item-playbtn\" onClick={this.onBtnPlayClick}></i>) :\r\n                (<i className=\"c-item-pausebtn\" onClick={this.onBtnPauseClick}></i>)}\r\n                <span className='c-item-audioname' onClick={this.onAudioNameClick}>{this.props.item.name||\"------\"}</span>\r\n                <span className={`icon iconfont icon-yinliang1 ${this.state.muted?'disabled': null}`} onClick={this.setDisabled}></span>\r\n                <div className='c-item-volume'>\r\n                    <Slider\r\n                        onChange={this.onVolumeSliderChange}\r\n                        defaultValue={1}\r\n                        step={0.1}\r\n                        min={0}\r\n                        max={1}\r\n                        handleStyle={{\r\n                            borderColor: '#ffffff',\r\n                            height: '18px',\r\n                            width: '18px',\r\n                            marginLeft: '-7px',\r\n                            marginTop: '-8px',\r\n                            backgroundColor: '#ffffff',\r\n                        }}\r\n                        trackStyle={{\r\n                            backgroundColor: \"#cdcdcd\"\r\n                        }}                        \r\n                    />                        \r\n                </div>\r\n            </div>\r\n            <div className=\"c-item-body\">\r\n                <div className='c-item-time'>{this.state.currentTimeStr}/{this.state.totalTimeStr}</div>\r\n                <div className='c-item-progressbox'>\r\n                    <Slider\r\n                            onChange={this.onTimeSliderChange}\r\n                            defaultValue={0}\r\n                            value={this.state.currentTime}\r\n                            min={0}\r\n                            max={this.state.duration}\r\n                            handleStyle={{\r\n                                borderColor: '#ffffff',\r\n                                backgroundColor: '#ffffff',\r\n                            }}\r\n                            trackStyle={{\r\n                                backgroundColor: \"#cdcdcd\"\r\n                            }}\r\n                    />  \r\n                </div>\r\n                <span className='icon iconfont icon-bianji c-item-text' onClick={this.onEditText}></span>             \r\n            </div>\r\n            <div className=\"c-item-foot\" style={{display: this.props.item.text === \"\" ? \"none\" : \"block\"}}>\r\n                 {this.props.item.text}\r\n            </div>\r\n            <Icon className='c-item-closebtn' type=\"cross-circle-o\" size={'md'}  onClick={(e)=>{this.props.onRemove(this.props.item.id)}}/>\r\n        </div>\r\n      );\r\n    }    \r\n  }\r\n  \r\n  export default Player;\r\n","import React, { Component } from 'react';\r\nimport {NavBar, ActionSheet, Modal, Toast, WhiteSpace} from 'antd-mobile';\r\nimport RecordWin from '../components/RecordWin';\r\n// import {InputWin} from '../components/InputWin'\r\nimport './Comp.less'\r\nimport '../common/fonts/iconfont.css'\r\nimport Player from '../components/Player'\r\nimport util from '../common/ts/util';\r\nimport {observer} from 'mobx-react';\r\nimport { AudioObject } from '../store/store';\r\n\r\nexport interface IProps { \r\n  history:any,\r\n  store: any\r\n}\r\n\r\n// å®šä¹‰ State ç±»å‹\r\nexport interface IState {\r\n    subTitle: string;\r\n    dialogShow: boolean;\r\n    disabled: boolean\r\n}\r\n@observer\r\nclass Comp extends Component<IProps, IState>  {\r\n    readonly state: IState = {\r\n        subTitle: 'è¯·è¾“å…¥æ ‡é¢˜',\r\n        dialogShow: false,\r\n        disabled: false\r\n    };\r\n    // public child: any;\r\n    \r\n    // onRef = (ref:any)=> {\r\n    //     this.child = ref;\r\n    // }\r\n    refs: any = React.createRef();\r\n    private subTileChanged = false;\r\n    setDisabled = ()=> {\r\n        this.setState({\r\n            disabled: !this.state.disabled\r\n        })\r\n    }\r\n    render() {\r\n      return (\r\n        <div className=\"c-page-con\">\r\n            <NavBar\r\n                mode=\"light\"\r\n                leftContent={<span className=\"icon iconfont icon-shezhi c-nav-icon\" onClick={()=>{this.onSetting();}}></span>}\r\n                rightContent={<span className=\"icon iconfont icon-tianjia c-nav-icon\" onClick={()=>{this.onAdd();}}></span>}\r\n            >Audio Compare</NavBar>\r\n           \r\n             {this.props.store.hideTitle ?<WhiteSpace size=\"xl\" /> : <div className=\"c-main-subtitlebox\" onClick={this.onChangeSubTitle}>\r\n                <span>{this.state.subTitle ||  \"ğŸµğŸµğŸµ\"}</span>\r\n\t\t            <i></i>                \r\n             </div>}\r\n            <input type=\"file\" ref=\"auFile\" accept=\"audio/*\" onChange={this.onFileSelect} style={{display:'none'}}></input>\r\n            \r\n            <div>\r\n              {this.props.store.list.map((item:AudioObject, index:number) => {\r\n                  return <Player key={item.id} store={this.props.store} ref={\"player\"+index} item={item} onRemove={this.onItemRemove} onPlay={()=>{this.onItemPlay(index)}}></Player>\r\n              })}\r\n            </div>\r\n            \r\n            {/* <div><button onClick={this.test1}>test</button></div> */}\r\n            <RecordWin ref=\"rwin\"></RecordWin>\r\n            {/* <Dialog title=\"test\" onDialogCancel={this.onDgCancel} onDialogAccept={this.onDgAccept} visible={this.state.dialogShow}>sssss</Dialog> */}\r\n        </div>\r\n      );\r\n    }\r\n    componentDidMount(){\r\n      // console.log(this.props); \r\n    }\r\n\r\n    generateId():string {\r\n      let n:number = Math.random() * 10000;\r\n      return n.toString();\r\n    }\r\n\r\n    onSetting() {\r\n      this.props.history.push('/Setting');\r\n    }\r\n    test1() {\r\n      // this.props.history.push('/About');\r\n    }\r\n    // onDgCancel = ()=>{\r\n    //     this.setState({\r\n    //       dialogShow: false\r\n    //     })\r\n    // }\r\n    // onDgAccept = ()=> {\r\n    //     this.setState({\r\n    //       dialogShow: false\r\n    //     })\r\n    // }\r\n    onAdd() {\r\n        const BUTTONS = ['é€‰æ‹©æ–‡ä»¶', 'è¾“å…¥ç½‘å€', 'å½•éŸ³', 'å–æ¶ˆ'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n          options: BUTTONS,\r\n          cancelButtonIndex: BUTTONS.length - 1,\r\n          //destructiveButtonIndex: BUTTONS.length - 2,\r\n          //title: 'è¯·é€‰æ‹©',\r\n          message: 'è¯·é€‰æ‹©æ·»åŠ æ–¹å¼',\r\n          maskClosable: true,\r\n        },\r\n        (buttonIndex) => {\r\n          console.log(buttonIndex)\r\n          switch(buttonIndex) {\r\n              case 0: \r\n                this.setFile()\r\n                break;\r\n              case 1:\r\n                this.setUrl();\r\n                break  \r\n              case 2:\r\n                this.setRecorder() \r\n                break;\r\n              default: \r\n          }\r\n\r\n        });        \r\n        // InputWin().then(r=>{\r\n        //     console.log(r)\r\n        // })\r\n        // this.child.showDialog().then((m:any)=>{\r\n        //     console.log(\"src-> \", m);\r\n        //     this.setState({\r\n        //         url: m\r\n        //     })\r\n        // });\r\n    }    \r\n    onChangeSubTitle = ()=> {\r\n        let txt = this.subTileChanged ? this.state.subTitle : \"\"\r\n        Modal.prompt('è¯·è¾“å…¥å†…å®¹', '',\r\n        [\r\n          {\r\n            text: 'å–æ¶ˆ',\r\n            onPress: value => new Promise((resolve) => {\r\n              resolve();\r\n            }),\r\n          },\r\n          {\r\n            text: 'ç¡®å®š',\r\n            onPress: value => new Promise((resolve, reject) => {\r\n                value = value.trim();\r\n                this.setState({\r\n                  subTitle: value\r\n                })\r\n                this.subTileChanged = true;\r\n                resolve();\r\n            }),\r\n          },\r\n        ], 'default', txt, ['è¯·è¾“å…¥å†…å®¹'])         \r\n    }\r\n    setFile() {\r\n        this.refs.auFile.click();\r\n    }\r\n    onFileSelect = (e:any)=>{\r\n        let f = e.target.files[0];\r\n        let typeName = util.getTypeName(f.name);\r\n        if(![\"mp3\", \"wav\", \"ogg\", \"webm\", \"aac\", \"m4a\"].includes(typeName.toLowerCase())) {\r\n            Toast.info(\"ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼\");\r\n            return;\r\n        }\r\n        // console.dir(e.target)\r\n        let objectURL = URL.createObjectURL(f);\r\n        // console.log(objectURL)\r\n\r\n        let id:string = this.generateId();\r\n        let o:AudioObject = {\r\n          id, url:objectURL, name: util.removeTypeName(f.name), text:\"\"\r\n        }\r\n        this.addAudioObject(o);\r\n        e.target.value = \"\";\r\n    }\r\n    setUrl() {\r\n        Modal.prompt('è¯·è¾“å…¥ç½‘å€', '',\r\n        [\r\n          {\r\n            text: 'å–æ¶ˆ',\r\n            onPress: value => new Promise((resolve) => {\r\n              resolve();\r\n            }),\r\n          },\r\n          {\r\n            text: 'ç¡®å®š',\r\n            onPress: value => new Promise((resolve, reject) => {\r\n                value = value.trim();\r\n                if(value == \"\" || !util.isUrl(value)) {\r\n                    Toast.info(\"è¯·è¾“å…¥æ­£ç¡®çš„ç½‘å€\");\r\n                    reject();\r\n                }\r\n                let id:string = this.generateId();\r\n                let o:AudioObject = {\r\n                  id, url:value, name: \"\", text:\"\"\r\n                }\r\n                this.addAudioObject(o);\r\n                resolve();\r\n            }),\r\n          },\r\n        ], 'default', '', ['è¯·è¾“å…¥ç½‘å€']) \r\n    }\r\n\r\n    addAudioObject(o:AudioObject) {\r\n      let list = this.props.store.list;\r\n      if(o.name == \"\"){\r\n        o.name = \"éŸ³é¢‘\" + (list.length + 1);\r\n      }\r\n      this.props.store.addItem(o);\r\n    }\r\n\r\n    setRecorder() {\r\n      this.refs.rwin.showDialog().then((url:any)=>{\r\n        if(url == null) {\r\n          return;\r\n        }\r\n        let id:string = this.generateId();\r\n        let o:AudioObject = {\r\n          id, url, name: \"\",text:\"\"\r\n        }\r\n        this.addAudioObject(o);        \r\n      })\r\n    }\r\n    onItemRemove=(id:string)=> {\r\n      Modal.alert('æç¤º', 'ç¡®è®¤åˆ é™¤?', [\r\n        { text: 'å–æ¶ˆ', onPress: () => console.log('cancel') },\r\n        { text: 'ç¡®å®š', onPress: () => {\r\n          this.props.store.delItem(id);\r\n        }},\r\n      ])      \r\n\r\n    }\r\n    onItemPlay = (idx: number)=> {\r\n      for(var i = 0; i < this.props.store.list.length;i++) {\r\n        if(i == idx) {\r\n          continue;\r\n        }\r\n        this.refs[\"player\" + i].onBtnPauseClick();\r\n      }\r\n    }\r\n  }\r\n  \r\n  export default Comp;\r\n","import React, { Component } from 'react';\r\nimport {NavBar, List, Switch, Icon} from 'antd-mobile';\r\nimport {observer} from 'mobx-react';\r\nimport './Setting.less';\r\nconst {default: styled} = require('styled-components');\r\nconsole.log(styled)\r\nexport interface IProps { \r\n    history:any,\r\n    store: any\r\n}\r\n@observer\r\nclass Setting extends Component<IProps> {\r\n   \r\n    render() {\r\n      return (\r\n        <div className=\"c-page-con\">\r\n            <NavBar\r\n                mode=\"light\"\r\n                icon={<Icon type=\"left\" />}\r\n                onLeftClick={() => {this.props.history.goBack()}}\r\n            >Setting</NavBar>            \r\n            <List renderHeader={() => 'è®¾ç½®'} >\r\n                <List.Item\r\n                extra={<Switch\r\n                    checked={this.props.store.hideTitle}\r\n                    onChange={() => {\r\n                        this.props.store.setTitleHidden(!this.props.store.hideTitle)\r\n                    }}\r\n                />}\r\n                >éšè—æ ‡é¢˜æ–‡å­—</List.Item>\r\n            </List>\r\n            <List renderHeader={() => 'å…³äº'} >\r\n                <List.Item\r\n                extra={<span>å°æ¬£</span>}\r\n                >ä½œè€…</List.Item>\r\n                <List.Item\r\n                extra={<span>41156358</span>}\r\n                >å¾®ä¿¡</List.Item>                \r\n            </List>        \r\n            <Dist>\r\n                <div className=\"center\"></div>\r\n            </Dist>                    \r\n        </div>\r\n      );\r\n    }\r\n    componentDidMount(){\r\n        // console.log(this.props)\r\n    }\r\n  }\r\n  \r\nexport default Setting;\r\n\r\n// è¿™ä¸ªçº¯ç²¹æ˜¯ä¸ºäº†æµ‹è¯•ä¸€ä¸‹styled-component æ²¡æœ‰å®é™…æ„ä¹‰\r\nexport const Dist = styled.div`\r\n      width: 120px;\r\n      height: 120px;\r\n      background-color: #1E7FF8;\r\n      border-radius: 50%;\r\n      margin: 30px auto;\r\n      position: relative;\r\n      box-shadow: 2px 2px 4px 2px #8e8c8c;\r\n      .center {\r\n        width: 40px;\r\n        height: 40px;\r\n        background: #FFFFFF;\r\n        border-radius: 50%;\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n      }\r\n      >div{  // æ•™ç¨‹å‰é¢è¿˜åŠ äº†ä¸€ä¸ª&è¡¨ç¤ºçˆ¶å…ƒç´  ,ä¸åŠ å¥½åƒä¹Ÿè¡Œ\r\n          display:none;\r\n      }\r\n      &{  // &è¡¨ç¤ºçˆ¶å…ƒç´ \r\n          display:none;\r\n      }\r\n`;\r\n","import {observable, action, computed} from 'mobx';\r\nexport interface AudioObject {\r\n    id: string,\r\n    url: string,\r\n    name: string,\r\n    text: string\r\n}\r\nclass Store {\r\n    @observable hideTitle:boolean = false;\r\n\r\n    @action setTitleHidden(b:boolean) {  //ç”¨æ¥ä¿®æ”¹todosçš„action\r\n       this.hideTitle = b;\r\n       localStorage.audio_comp_hide_title = b ? 1 : 0;\r\n       console.log(localStorage.audio_comp_hide_title)\r\n    }\r\n    \r\n    @observable list:Array<AudioObject> = [];\r\n\r\n    @action delItem(id: string){\r\n        for(let i = 0; i < this.list.length; i++) {\r\n            if(this.list[i].id == id) {\r\n                let url = this.list[i].url;\r\n                this.list.splice(i, 1);\r\n                if(url.startsWith(\"blob:\")){\r\n                    window.URL.revokeObjectURL(url);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    @action addItem(item: AudioObject) {\r\n        this.list.push(item);\r\n    }\r\n\r\n    @action editItem(item: AudioObject) {\r\n        for(let i = 0; i < this.list.length; i++) {\r\n            if(this.list[i].id == item.id) {\r\n                this.list.splice(i, 1, item);\r\n                return;\r\n            }\r\n        }      \r\n    }\r\n\r\n    constructor(){\r\n        this.init();\r\n    }\r\n\r\n    releasUrl(){\r\n        this.list.forEach(item=>{\r\n            if(item.url.startsWith(\"blob:\")){\r\n                window.URL.revokeObjectURL(item.url);\r\n            }\r\n        })\r\n    }\r\n\r\n    init() {\r\n        this.hideTitle = localStorage.audio_comp_hide_title == \"1\" ? true : false;\r\n        window.addEventListener(\"unload\", ()=>{this.releasUrl()}, false)\r\n    }\r\n\r\n}\r\n\r\nexport default new Store();\r\n","import React, { Component } from 'react';\r\nimport './App.less';\r\nimport Comp from './pages/Comp';\r\nimport Setting from './pages/Setting';\r\nimport store from './store/store'; \r\nconst { HashRouter: Router, Link, Route, Redirect } = require('react-router-dom');\r\n// const Home = () => (\r\n//   <div>\r\n//     <h2>Home</h2>\r\n//   </div>\r\n// )\r\n\r\n// const About = () => (\r\n//   <div>\r\n//     <h2>About</h2>\r\n//   </div>\r\n// )\r\n\r\n// const Product = () => (\r\n//   <div>\r\n//     <h2>Product</h2>\r\n//   </div>\r\n// )\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div className=\"App\">\r\n          {/* <Link to=\"/\" className=\"c-test\">Home</Link>\r\n          <Link to=\"/About\">About</Link>\r\n          <Link to=\"/Product\">Product</Link>\r\n          <Link to=\"/Comp\">Comp</Link> */}\r\n          <Route path=\"/\" exact  render={(props:any) => <Comp {...props} store={store}></Comp>}></Route>\r\n          <Route path=\"/setting\" render={(props:any) => <Setting {...props} store={store}></Setting>}></Route>\r\n          <Redirect path=\"/comp\" to=\"/\" />\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\nimport \"lib-flexible\"\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}